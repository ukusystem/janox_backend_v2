var Ca=Object.defineProperty;var eo=r=>{throw TypeError(r)};var xa=(r,a,o)=>a in r?Ca(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o;var Ve=(r,a,o)=>xa(r,typeof a!="symbol"?a+"":a,o),en=(r,a,o)=>a.has(r)||eo("Cannot "+o);var T=(r,a,o)=>(en(r,a,"read from private field"),o?o.call(r):a.get(r)),Me=(r,a,o)=>a.has(r)?eo("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(r):a.set(r,o),Te=(r,a,o,l)=>(en(r,a,"write to private field"),l?l.call(r,o):a.set(r,o),o),Ae=(r,a,o)=>(en(r,a,"access private method"),o);var Sr=(r,a,o,l)=>({set _(c){Te(r,a,c,o)},get _(){return T(r,a,l)}});import{K as $r,J as Vr,s as Rt,ax as Fo,U as Ke,R as rr,r as Be,M as Hr,j as q,N as wr,P as qr,aZ as Di,cO as to,$ as Ia,a0 as Ta,_ as Oa,dj as tn,dk as Ra,V as ro,dl as Pa,dm as ja,c as vr,S as $t,u as Fi,a as Wi,dn as Ba,aH as Wo,dp as Ma,B as dt,a2 as La,dq as Na,f as Ua,dr as Da,w as Fa,b as Wa,l as it,aX as $a,ar as rn,Q as Va,aF as nn,T as Je,p as no,bB as Ha,bC as qa,bD as za,D as $o,bE as Ga,as as Ya,ds as Ka,dt as Qa,bG as Za,bo as Ja,du as Xa,dv as el,dw as tl,dx as rl,dy as nl,dz as il,dA as ol,dB as sl,dC as al,dD as ll,dE as ul,dF as hl,bN as cl,a8 as lr,dG as fl,dH as dl,dI as pl,bV as gl,aI as ml,dJ as bl,by as yl,dK as wl}from"./index-B2MwQ28r.js";import{M as Vo}from"./MainSimpleCard-COKO55tB.js";import{C as _l}from"./CardContent-CM-ZmfFR.js";import{S as vl}from"./SpeedCameraIcon-DoAZ-uPr.js";import{c as Ho}from"./capitalizeFirstLetter-D3I3Kuho.js";import{u as qo}from"./usePreviousProps-DjccIP3f.js";import{v as El}from"./v4-C6aID195.js";function Sl(r){return $r("MuiAppBar",r)}Vr("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const kl=r=>{const{color:a,position:o,classes:l}=r,c={root:["root",`color${Ke(a)}`,`position${Ke(o)}`]};return qr(c,Sl,l)},io=(r,a)=>r?`${r==null?void 0:r.replace(")","")}, ${a})`:a,Al=Rt(Fo,{name:"MuiAppBar",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.root,a[`position${Ke(o.position)}`],a[`color${Ke(o.color)}`]]}})(rr(({theme:r})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":r.vars?r.vars.palette.AppBar.defaultBg:r.palette.grey[100],"--AppBar-color":r.vars?r.vars.palette.text.primary:r.palette.getContrastText(r.palette.grey[100]),...r.applyStyles("dark",{"--AppBar-background":r.vars?r.vars.palette.AppBar.defaultBg:r.palette.grey[900],"--AppBar-color":r.vars?r.vars.palette.text.primary:r.palette.getContrastText(r.palette.grey[900])})}},...Object.entries(r.palette).filter(Di(["contrastText"])).map(([a])=>({props:{color:a},style:{"--AppBar-background":(r.vars??r).palette[a].main,"--AppBar-color":(r.vars??r).palette[a].contrastText}})),{props:a=>a.enableColorOnDark===!0&&!["inherit","transparent"].includes(a.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:a=>a.enableColorOnDark===!1&&!["inherit","transparent"].includes(a.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...r.applyStyles("dark",{backgroundColor:r.vars?io(r.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:r.vars?io(r.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...r.applyStyles("dark",{backgroundImage:"none"})}}]}))),Vh=Be.forwardRef(function(a,o){const l=Hr({props:a,name:"MuiAppBar"}),{className:c,color:i="primary",enableColorOnDark:e=!1,position:n="fixed",...t}=l,s={...l,color:i,position:n,enableColorOnDark:e},u=kl(s);return q.jsx(Al,{square:!0,component:"header",ownerState:s,elevation:4,className:wr(u.root,c,n==="fixed"&&"mui-fixed"),ref:o,...t})});function Cl(r){const{badgeContent:a,invisible:o=!1,max:l=99,showZero:c=!1}=r,i=qo({badgeContent:a,max:l});let e=o;o===!1&&a===0&&!c&&(e=!0);const{badgeContent:n,max:t=l}=e?i:r,s=n&&Number(n)>t?`${t}+`:n;return{badgeContent:n,invisible:e,max:t,displayValue:s}}function xl(r){return $r("MuiBadge",r)}const Lt=Vr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),on=10,sn=4,Il=r=>{const{color:a,anchorOrigin:o,invisible:l,overlap:c,variant:i,classes:e={}}=r,n={root:["root"],badge:["badge",i,l&&"invisible",`anchorOrigin${Ke(o.vertical)}${Ke(o.horizontal)}`,`anchorOrigin${Ke(o.vertical)}${Ke(o.horizontal)}${Ke(c)}`,`overlap${Ke(c)}`,a!=="default"&&`color${Ke(a)}`]};return qr(n,xl,e)},Tl=Rt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(r,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Ol=Rt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.badge,a[o.variant],a[`anchorOrigin${Ke(o.anchorOrigin.vertical)}${Ke(o.anchorOrigin.horizontal)}${Ke(o.overlap)}`],o.color!=="default"&&a[`color${Ke(o.color)}`],o.invisible&&a.invisible]}})(rr(({theme:r})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:on*2,lineHeight:1,padding:"0 6px",height:on*2,borderRadius:on,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.entries(r.palette).filter(Di(["contrastText"])).map(([a])=>({props:{color:a},style:{backgroundColor:(r.vars||r).palette[a].main,color:(r.vars||r).palette[a].contrastText}})),{props:{variant:"dot"},style:{borderRadius:sn,height:sn*2,minWidth:sn*2,padding:0}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Lt.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Lt.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Lt.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Lt.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Lt.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Lt.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Lt.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Lt.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]})));function oo(r){return{vertical:(r==null?void 0:r.vertical)??"top",horizontal:(r==null?void 0:r.horizontal)??"right"}}const Rl=Be.forwardRef(function(a,o){const l=Hr({props:a,name:"MuiBadge"}),{anchorOrigin:c,className:i,classes:e,component:n,components:t={},componentsProps:s={},children:u,overlap:d="rectangular",color:p="default",invisible:m=!1,max:b=99,badgeContent:w,slots:_,slotProps:A,showZero:y=!1,variant:v="standard",...L}=l,{badgeContent:O,invisible:S,max:C,displayValue:j}=Cl({max:b,invisible:m,badgeContent:w,showZero:y}),Q=qo({anchorOrigin:oo(c),color:p,overlap:d,variant:v,badgeContent:w}),X=S||O==null&&v!=="dot",{color:ae=p,overlap:R=d,anchorOrigin:K,variant:J=v}=X?Q:l,W=oo(K),be=J!=="dot"?j:void 0,ce={...l,badgeContent:O,invisible:X,max:C,displayValue:be,showZero:y,anchorOrigin:W,color:ae,overlap:R,variant:J},le=Il(ce),de=(_==null?void 0:_.root)??t.Root??Tl,$=(_==null?void 0:_.badge)??t.Badge??Ol,se=(A==null?void 0:A.root)??s.root,I=(A==null?void 0:A.badge)??s.badge,re=to({elementType:de,externalSlotProps:se,externalForwardedProps:L,additionalProps:{ref:o,as:n},ownerState:ce,className:wr(se==null?void 0:se.className,le.root,i)}),we=to({elementType:$,externalSlotProps:I,ownerState:ce,className:wr(le.badge,I==null?void 0:I.className)});return q.jsxs(de,{...re,children:[u,q.jsx($,{...we,children:be})]})});function so(r){return r.substring(2).toLowerCase()}function Pl(r,a){return a.documentElement.clientWidth<r.clientX||a.documentElement.clientHeight<r.clientY}function jl(r){const{children:a,disableReactTree:o=!1,mouseEvent:l="onClick",onClickAway:c,touchEvent:i="onTouchEnd"}=r,e=Be.useRef(!1),n=Be.useRef(null),t=Be.useRef(!1),s=Be.useRef(!1);Be.useEffect(()=>(setTimeout(()=>{t.current=!0},0),()=>{t.current=!1}),[]);const u=Ia(Ta(a),n),d=Oa(b=>{const w=s.current;s.current=!1;const _=tn(n.current);if(!t.current||!n.current||"clientX"in b&&Pl(b,_))return;if(e.current){e.current=!1;return}let A;b.composedPath?A=b.composedPath().includes(n.current):A=!_.documentElement.contains(b.target)||n.current.contains(b.target),!A&&(o||!w)&&c(b)}),p=b=>w=>{s.current=!0;const _=a.props[b];_&&_(w)},m={ref:u};return i!==!1&&(m[i]=p(i)),Be.useEffect(()=>{if(i!==!1){const b=so(i),w=tn(n.current),_=()=>{e.current=!0};return w.addEventListener(b,d),w.addEventListener("touchmove",_),()=>{w.removeEventListener(b,d),w.removeEventListener("touchmove",_)}}},[d,i]),l!==!1&&(m[l]=p(l)),Be.useEffect(()=>{if(l!==!1){const b=so(l),w=tn(n.current);return w.addEventListener(b,d),()=>{w.removeEventListener(b,d)}}},[d,l]),Be.cloneElement(a,m)}function Bl(r){return $r("MuiSwitch",r)}const st=Vr("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Ml=r=>{const{classes:a,edge:o,size:l,color:c,checked:i,disabled:e}=r,n={root:["root",o&&`edge${Ke(o)}`,`size${Ke(l)}`],switchBase:["switchBase",`color${Ke(c)}`,i&&"checked",e&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},t=qr(n,Bl,a);return{...a,...t}},Ll=Rt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.root,o.edge&&a[`edge${Ke(o.edge)}`],a[`size${Ke(o.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${st.thumb}`]:{width:16,height:16},[`& .${st.switchBase}`]:{padding:4,[`&.${st.checked}`]:{transform:"translateX(16px)"}}}}]}),Nl=Rt(Ra,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.switchBase,{[`& .${st.input}`]:a.input},o.color!=="default"&&a[`color${Ke(o.color)}`]]}})(rr(({theme:r})=>({position:"absolute",top:0,left:0,zIndex:1,color:r.vars?r.vars.palette.Switch.defaultColor:`${r.palette.mode==="light"?r.palette.common.white:r.palette.grey[300]}`,transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest}),[`&.${st.checked}`]:{transform:"translateX(20px)"},[`&.${st.disabled}`]:{color:r.vars?r.vars.palette.Switch.defaultDisabledColor:`${r.palette.mode==="light"?r.palette.grey[100]:r.palette.grey[600]}`},[`&.${st.checked} + .${st.track}`]:{opacity:.5},[`&.${st.disabled} + .${st.track}`]:{opacity:r.vars?r.vars.opacity.switchTrackDisabled:`${r.palette.mode==="light"?.12:.2}`},[`& .${st.input}`]:{left:"-100%",width:"300%"}})),rr(({theme:r})=>({"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:ro(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(r.palette).filter(Di(["light"])).map(([a])=>({props:{color:a},style:{[`&.${st.checked}`]:{color:(r.vars||r).palette[a].main,"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[a].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:ro(r.palette[a].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${st.disabled}`]:{color:r.vars?r.vars.palette.Switch[`${a}DisabledColor`]:`${r.palette.mode==="light"?Pa(r.palette[a].main,.62):ja(r.palette[a].main,.55)}`}},[`&.${st.checked} + .${st.track}`]:{backgroundColor:(r.vars||r).palette[a].main}}}))]}))),Ul=Rt("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(r,a)=>a.track})(rr(({theme:r})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:r.transitions.create(["opacity","background-color"],{duration:r.transitions.duration.shortest}),backgroundColor:r.vars?r.vars.palette.common.onBackground:`${r.palette.mode==="light"?r.palette.common.black:r.palette.common.white}`,opacity:r.vars?r.vars.opacity.switchTrack:`${r.palette.mode==="light"?.38:.3}`}))),Dl=Rt("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(r,a)=>a.thumb})(rr(({theme:r})=>({boxShadow:(r.vars||r).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Fl=Be.forwardRef(function(a,o){const l=Hr({props:a,name:"MuiSwitch"}),{className:c,color:i="primary",edge:e=!1,size:n="medium",sx:t,...s}=l,u={...l,color:i,edge:e,size:n},d=Ml(u),p=q.jsx(Dl,{className:d.thumb,ownerState:u});return q.jsxs(Ll,{className:wr(d.root,c),sx:t,ownerState:u,children:[q.jsx(Nl,{type:"checkbox",icon:p,checkedIcon:p,ref:o,ownerState:u,...s,classes:{...d,root:d.switchBase}}),q.jsx(Ul,{className:d.track,ownerState:u})]})});function Wl(r){return $r("MuiToolbar",r)}Vr("MuiToolbar",["root","gutters","regular","dense"]);const $l=r=>{const{classes:a,disableGutters:o,variant:l}=r;return qr({root:["root",!o&&"gutters",l]},Wl,a)},Vl=Rt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.root,!o.disableGutters&&a.gutters,a[o.variant]]}})(rr(({theme:r})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:a})=>!a.disableGutters,style:{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:r.mixins.toolbar}]}))),Hh=Be.forwardRef(function(a,o){const l=Hr({props:a,name:"MuiToolbar"}),{className:c,component:i="div",disableGutters:e=!1,variant:n="regular",...t}=l,s={...l,component:i,disableGutters:e,variant:n},u=$l(s);return q.jsx(Vl,{as:i,className:wr(u.root,c),ref:o,ownerState:s,...t})}),Hl=vr(q.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),ql=vr(q.jsx("path",{d:"M9.37 5.51c-.18.64-.27 1.31-.27 1.99 0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkModeOutlined"),zl=vr(q.jsx("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen"),Gl=vr(q.jsx("path",{d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"}),"FullscreenExit"),Yl=vr(q.jsx("path",{d:"M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightModeOutlined"),Kl=({...r})=>q.jsx($t,{...r,children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[q.jsx("mask",{id:"mask0_2799_6900",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:q.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),q.jsx("g",{mask:"url(#mask0_2799_6900)",children:q.jsx("path",{d:"M4 19V17H6V10C6 8.61667 6.41667 7.3875 7.25 6.3125C8.08333 5.2375 9.16667 4.53333 10.5 4.2V2H13.5V4.2C14.8333 4.53333 15.9167 5.2375 16.75 6.3125C17.5833 7.3875 18 8.61667 18 10V17H20V19H4ZM12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 17H16V10C16 8.9 15.6083 7.95833 14.825 7.175C14.0417 6.39167 13.1 6 12 6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V17Z",fill:"currentColor"})})]})}),an=({isCanceled:r,...a})=>q.jsx($t,{...a,children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[r&&q.jsx("rect",{x:"2.21313",y:"2",width:"28.0306",height:"1.72918",transform:"rotate(44.5535 2.21313 2)",fill:"currentColor"}),q.jsx("mask",{id:"mask0_2799_6804",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:q.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),q.jsx("g",{mask:"url(#mask0_2799_6804)",children:q.jsx("path",{d:"M12 17C12.2833 17 12.5208 16.9042 12.7125 16.7125C12.9042 16.5208 13 16.2833 13 16C13 15.7167 12.9042 15.4792 12.7125 15.2875C12.5208 15.0958 12.2833 15 12 15C11.7167 15 11.4792 15.0958 11.2875 15.2875C11.0958 15.4792 11 15.7167 11 16C11 16.2833 11.0958 16.5208 11.2875 16.7125C11.4792 16.9042 11.7167 17 12 17ZM12 13C12.2833 13 12.5208 12.9042 12.7125 12.7125C12.9042 12.5208 13 12.2833 13 12C13 11.7167 12.9042 11.4792 12.7125 11.2875C12.5208 11.0958 12.2833 11 12 11C11.7167 11 11.4792 11.0958 11.2875 11.2875C11.0958 11.4792 11 11.7167 11 12C11 12.2833 11.0958 12.5208 11.2875 12.7125C11.4792 12.9042 11.7167 13 12 13ZM12 9C12.2833 9 12.5208 8.90417 12.7125 8.7125C12.9042 8.52083 13 8.28333 13 8C13 7.71667 12.9042 7.47917 12.7125 7.2875C12.5208 7.09583 12.2833 7 12 7C11.7167 7 11.4792 7.09583 11.2875 7.2875C11.0958 7.47917 11 7.71667 11 8C11 8.28333 11.0958 8.52083 11.2875 8.7125C11.4792 8.90417 11.7167 9 12 9ZM2 20V14C2.55 14 3.02083 13.8042 3.4125 13.4125C3.80417 13.0208 4 12.55 4 12C4 11.45 3.80417 10.9792 3.4125 10.5875C3.02083 10.1958 2.55 10 2 10V4H22V10C21.45 10 20.9792 10.1958 20.5875 10.5875C20.1958 10.9792 20 11.45 20 12C20 12.55 20.1958 13.0208 20.5875 13.4125C20.9792 13.8042 21.45 14 22 14V20H2ZM4 18H20V15.45C19.3833 15.0833 18.8958 14.5958 18.5375 13.9875C18.1792 13.3792 18 12.7167 18 12C18 11.2833 18.1792 10.6208 18.5375 10.0125C18.8958 9.40417 19.3833 8.91667 20 8.55V6H4V8.55C4.61667 8.91667 5.10417 9.40417 5.4625 10.0125C5.82083 10.6208 6 11.2833 6 12C6 12.7167 5.82083 13.3792 5.4625 13.9875C5.10417 14.5958 4.61667 15.0833 4 15.45V18Z",fill:"currentColor"})})]})}),ao=({...r})=>q.jsx($t,{...r,children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[q.jsx("mask",{id:"mask0_2799_6824",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:q.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),q.jsx("g",{mask:"url(#mask0_2799_6824)",children:q.jsx("path",{d:"M4 19H20V17H4V19ZM8 13H10V10C10 9.45 10.1958 8.97917 10.5875 8.5875C10.9792 8.19583 11.45 8 12 8V6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V13ZM7 15H17V10C17 8.61667 16.5125 7.4375 15.5375 6.4625C14.5625 5.4875 13.3833 5 12 5C10.6167 5 9.4375 5.4875 8.4625 6.4625C7.4875 7.4375 7 8.61667 7 10V15ZM2 21V15H5V10C5 8.05 5.67917 6.39583 7.0375 5.0375C8.39583 3.67917 10.05 3 12 3C13.95 3 15.6042 3.67917 16.9625 5.0375C18.3208 6.39583 19 8.05 19 10V15H22V21H2Z",fill:"currentColor"})})]})}),Ql=({...r})=>q.jsx($t,{...r,children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[q.jsx("mask",{id:"mask0_2799_6901",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:q.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),q.jsx("g",{mask:"url(#mask0_2799_6901)",children:q.jsx("path",{d:"M19.775 22.625L8.125 10.975C8.09167 11.1417 8.0625 11.3083 8.0375 11.475C8.0125 11.6417 8 11.8167 8 12C8 12.55 8.10417 13.0667 8.3125 13.55C8.52083 14.0333 8.80833 14.4583 9.175 14.825L7.75 16.25C7.21667 15.7 6.79167 15.0625 6.475 14.3375C6.15833 13.6125 6 12.8333 6 12C6 11.5333 6.05 11.0833 6.15 10.65C6.25 10.2167 6.39167 9.80832 6.575 9.42499L5.1 7.94999C4.75 8.54999 4.47917 9.18749 4.2875 9.86249C4.09583 10.5375 4 11.25 4 12C4 13.1167 4.20833 14.1583 4.625 15.125C5.04167 16.0917 5.61667 16.9333 6.35 17.65L4.925 19.075C4.025 18.1583 3.3125 17.0958 2.7875 15.8875C2.2625 14.6792 2 13.3833 2 12C2 10.9667 2.14583 9.99165 2.4375 9.07499C2.72917 8.15832 3.13333 7.29999 3.65 6.49999L1.375 4.22499L2.8 2.79999L21.2 21.2L19.775 22.625ZM20.35 17.5L18.9 16.05C19.25 15.45 19.5208 14.8125 19.7125 14.1375C19.9042 13.4625 20 12.75 20 12C20 10.8833 19.7917 9.84165 19.375 8.87499C18.9583 7.90832 18.3833 7.06665 17.65 6.34999L19.075 4.92499C19.975 5.82499 20.6875 6.87915 21.2125 8.08749C21.7375 9.29582 22 10.6 22 12C22 13.0167 21.8542 13.9875 21.5625 14.9125C21.2708 15.8375 20.8667 16.7 20.35 17.5ZM17.425 14.575L15.875 13.025C15.9083 12.8583 15.9375 12.6917 15.9625 12.525C15.9875 12.3583 16 12.1833 16 12C16 11.45 15.8958 10.9333 15.6875 10.45C15.4792 9.96665 15.1917 9.54165 14.825 9.17499L16.25 7.74999C16.7833 8.28332 17.2083 8.91249 17.525 9.63749C17.8417 10.3625 18 11.15 18 12C18 12.4667 17.95 12.9167 17.85 13.35C17.75 13.7833 17.6083 14.1917 17.425 14.575Z",fill:"currentColor"})})]})}),Zl=({...r})=>q.jsx($t,{...r,children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[q.jsx("mask",{id:"mask0_6109_70900",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:q.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),q.jsx("g",{mask:"url(#mask0_6109_70900)",children:q.jsx("path",{d:"M4 21C3.45 21 2.97917 20.8042 2.5875 20.4125C2.19583 20.0208 2 19.55 2 19V8C2 7.45 2.19583 6.97917 2.5875 6.5875C2.97917 6.19583 3.45 6 4 6H8V4C8 3.45 8.19583 2.97917 8.5875 2.5875C8.97917 2.19583 9.45 2 10 2H14C14.55 2 15.0208 2.19583 15.4125 2.5875C15.8042 2.97917 16 3.45 16 4V6H20C20.55 6 21.0208 6.19583 21.4125 6.5875C21.8042 6.97917 22 7.45 22 8V19C22 19.55 21.8042 20.0208 21.4125 20.4125C21.0208 20.8042 20.55 21 20 21H4ZM10 6H14V4H10V6ZM20 15H15V17H9V15H4V19H20V15ZM11 15H13V13H11V15ZM4 13H9V11H15V13H20V8H4V13Z",fill:"currentColor"})})]})}),Jl=({...r})=>q.jsx($t,{...r,children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[q.jsx("mask",{id:"mask0_2799_6755",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:q.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),q.jsx("g",{mask:"url(#mask0_2799_6755)",children:q.jsx("path",{d:"M5 17.85C5.9 16.9667 6.94583 16.2708 8.1375 15.7625C9.32917 15.2542 10.6167 15 12 15C13.3833 15 14.6708 15.2542 15.8625 15.7625C17.0542 16.2708 18.1 16.9667 19 17.85V5H5V17.85ZM12 13C12.9667 13 13.7917 12.6583 14.475 11.975C15.1583 11.2917 15.5 10.4667 15.5 9.5C15.5 8.53333 15.1583 7.70833 14.475 7.025C13.7917 6.34167 12.9667 6 12 6C11.0333 6 10.2083 6.34167 9.525 7.025C8.84167 7.70833 8.5 8.53333 8.5 9.5C8.5 10.4667 8.84167 11.2917 9.525 11.975C10.2083 12.6583 11.0333 13 12 13ZM3 21V3H21V21H3ZM12 11C11.5833 11 11.2292 10.8542 10.9375 10.5625C10.6458 10.2708 10.5 9.91667 10.5 9.5C10.5 9.08333 10.6458 8.72917 10.9375 8.4375C11.2292 8.14583 11.5833 8 12 8C12.4167 8 12.7708 8.14583 13.0625 8.4375C13.3542 8.72917 13.5 9.08333 13.5 9.5C13.5 9.91667 13.3542 10.2708 13.0625 10.5625C12.7708 10.8542 12.4167 11 12 11ZM6.725 19H17.275C16.5417 18.35 15.7125 17.8542 14.7875 17.5125C13.8625 17.1708 12.9333 17 12 17C11.0667 17 10.1292 17.1708 9.1875 17.5125C8.24583 17.8542 7.425 18.35 6.725 19Z",fill:"currentColor"})})]})}),Xl=({...r})=>q.jsx($t,{...r,children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[q.jsx("mask",{id:"mask0_2799_6762",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:q.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),q.jsx("g",{mask:"url(#mask0_2799_6762)",children:q.jsx("path",{d:"M19.95 21C17.8667 21 15.8042 20.55 13.7625 19.65C11.7208 18.75 9.86667 17.4667 8.2 15.8C6.53333 14.1333 5.25 12.2833 4.35 10.25C3.45 8.21667 3 6.15 3 4.05V3H8.9L9.825 8.025L6.975 10.9C7.34167 11.55 7.75 12.1667 8.2 12.75C8.65 13.3333 9.13333 13.875 9.65 14.375C10.1333 14.8583 10.6625 15.3208 11.2375 15.7625C11.8125 16.2042 12.4333 16.6167 13.1 17L16 14.1L21 15.125V21H19.95ZM6.025 9L7.675 7.35L7.25 5H5.025C5.10833 5.75 5.23333 6.45417 5.4 7.1125C5.56667 7.77083 5.775 8.4 6.025 9ZM14.975 17.95C15.6417 18.2333 16.3125 18.4583 16.9875 18.625C17.6625 18.7917 18.3333 18.9 19 18.95V16.75L16.65 16.275L14.975 17.95Z",fill:"currentColor"})})]})}),eu=({...r})=>q.jsx($t,{...r,children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[q.jsx("mask",{id:"mask0_2799_7012",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:q.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),q.jsx("g",{mask:"url(#mask0_2799_7012)",children:q.jsx("path",{d:"M2 20V4H22V20H2ZM12 13L4 8V18H20V8L12 13ZM12 11L20 6H4L12 11ZM4 8V6V18V8Z",fill:"currentColor"})})]})}),tu=Rt(r=>q.jsx(Fl,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...r,checkedIcon:q.jsx(ql,{sx:{width:24,height:24,color:"text.primary"}}),icon:q.jsx(Yl,{sx:{width:24,height:24,color:"text.primary"}})}))(({theme:r})=>({width:80,height:40,padding:0,"& .MuiSwitch-switchBase":{padding:0,width:40,height:40,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(40px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,border:`1px solid ${r.palette.custom.outlineBoder}`,backgroundColor:r.palette.background.default},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}}},"& .MuiSwitch-track":{borderRadius:40/2,backgroundColor:r.palette.background.default,border:`1px solid ${r.palette.custom.outlineBoder}`,opacity:1,transition:r.transitions.create(["background-color"],{duration:500})}})),qh=()=>{const r=Fi(),{mode:a}=Wi(l=>l.themeStore),o=()=>{r(Ba({mode:a==="dark"?"light":"dark"}))};return q.jsx(q.Fragment,{children:q.jsx(tu,{checked:a==="dark",onChange:o,inputProps:{"aria-label":"toggle_theme_switch",id:"theme_toogle"}})})},zh=()=>{const[r,a]=Be.useState(!1),o=Fi(),l=()=>{r?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()},c=()=>{const e=document.fullscreenElement!==null;a(e),o(Ma({isFullScreen:e}))},i=e=>{e.key==="F11"?(e.preventDefault(),l()):e.key==="Escape"&&r&&l()};return Be.useEffect(()=>(document.addEventListener("fullscreenchange",c),()=>{document.removeEventListener("fullscreenchange",c)}),[]),Be.useEffect(()=>(window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}),[r]),q.jsxs(Wo,{onClick:l,size:"small",children:[!r&&q.jsx(zl,{sx:{fontSize:{md:28,xs:24},color:"text.primary"}}),r&&q.jsx(Gl,{sx:{fontSize:{md:28,xs:24},color:"text.primary"}})]})},ru=Be.forwardRef(({children:r,type:a="grow",position:o="top-left",...l},c)=>{let i={transformOrigin:"0 0 0"};switch(o){case"top-right":case"top":case"bottom-left":case"bottom-right":case"bottom":case"top-left":default:i={transformOrigin:"0 0 0"};break}return q.jsxs(dt,{ref:c,children:[a==="grow"&&q.jsx(La,{...l,children:q.jsx(dt,{sx:i,children:r})}),a==="fade"&&q.jsx(Na,{...l,timeout:{appear:0,enter:300,exit:150},children:q.jsx(dt,{sx:i,children:r})})]})}),Gh=()=>{const r=Ua(),a=Fi(),o=Wi(y=>y.authStore.user),[l]=Da(),[c,i]=Be.useState(o&&o.foto!==void 0?`${Fa}/${encodeURIComponent(o.foto)}`:void 0),e=()=>{i(Ya)},n=()=>{l(),a(Ka(void 0)),a(Qa(!1)),a(Za()),a(Ja()),a(Xa()),a(el()),a(tl()),a(rl.util.resetApiState()),a(nl.util.resetApiState()),a(il.util.resetApiState()),a(ol.util.resetApiState()),a(sl.util.resetApiState()),a(al.util.resetApiState()),a(ll.util.resetApiState()),a(ul.util.resetApiState()),a(hl.util.resetApiState()),r("/auth/login")},t=Wa(),s=Be.useRef(null),[u,d]=Be.useState(!1),[p,m]=Be.useState(!1),b=()=>{d(y=>!y)},w=y=>{s.current&&s.current.contains(y.target)||d(!1)},_=()=>{m(!0)},A=()=>{m(!1)};return q.jsxs(q.Fragment,{children:[q.jsx(it,{direction:"row",spacing:2,alignItems:"center",sx:{p:.5},children:q.jsx($a,{sx:{borderColor:u?t.palette.primary.main:"transparent",borderWidth:3,borderStyle:"solid",borderRadius:"50%","&:hover":{borderColor:t.palette.primary.main}},"aria-label":"open profile",ref:s,"aria-controls":u?"profile-grow":void 0,"aria-haspopup":"true",onClick:b,children:q.jsx(it,{justifyContent:"center",alignItems:"center",children:q.jsx(rn,{alt:"profile user",src:c,slotProps:{img:{onError:e}},sx:{width:38,height:38}})})})}),q.jsx(Va,{placement:"bottom-end",open:u,anchorEl:s.current,role:void 0,transition:!0,disablePortal:!0,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,11.4]}}]},children:({TransitionProps:y})=>q.jsx(ru,{type:"fade",in:u,...y,children:u&&q.jsx(Fo,{sx:{minWidth:240,maxWidth:400,[t.breakpoints.down("md")]:{maxWidth:250},backgroundColor:"transparent",backgroundImage:"inherit",border:"none",boxShadow:"none"},children:q.jsx(jl,{onClickAway:w,children:q.jsx(Vo,{sx:{boxShadow:"0px 4px 18px 0px rgba(42, 55, 60, 0.16)",":hover":{boxShadow:"0px 4px 18px 0px rgba(42, 55, 60, 0.16)"}},children:q.jsx(_l,{children:q.jsxs(nn,{container:!0,justifyContent:"space-between",alignItems:"center",rowSpacing:2,children:[q.jsx(nn,{size:12,sx:{borderRadius:3,":hover":{backgroundColor:"tertiary.opacityLight"},padding:1,cursor:"pointer"},onClick:_,children:q.jsxs(it,{direction:"row",spacing:1.25,alignItems:"center",children:[q.jsx(rn,{alt:"profile user",src:c,slotProps:{img:{onError:e}},sx:{width:52,height:52}}),q.jsx(it,{sx:{width:"100%",overflow:"hidden"},children:o&&q.jsxs(q.Fragment,{children:[q.jsx(Je,{variant:"body2",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:o.rol}),q.jsx(Je,{variant:"h6",color:"textPrimary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:`${o.nombre}  ${o.apellido}`})]})})]})}),q.jsx(nn,{size:12,children:q.jsx(no,{variant:"label",fullWidth:!0,color:"tertiary",size:"medium",startIcon:q.jsx(Hl,{}),onClick:n,children:"Cerrar sesión"})})]})})})})})})}),q.jsxs(Ha,{open:p,onClose:A,maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"background.paper",borderRadius:6,borderWidth:1,borderStyle:"solid",borderColor:"custom.outlineBoder",boxShadow:"0px 3px 12px 0px rgba(42, 55, 60, 0.14)"}},children:[q.jsx(qa,{children:q.jsx(Je,{variant:"h5",children:"Datos de la cuenta"})}),q.jsx(za,{children:q.jsx(it,{spacing:2,children:q.jsxs(it,{direction:"row",spacing:2,children:[q.jsx(rn,{alt:"profile user",src:c,slotProps:{img:{onError:e}},sx:{width:84,height:84}}),q.jsxs(it,{sx:{width:"100%",overflow:"hidden"},children:[o&&q.jsxs(q.Fragment,{children:[q.jsx(Je,{variant:"body1",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:o.rol}),q.jsx(Je,{variant:"h5",color:"textPrimary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:`${o.nombre}  ${o.apellido}`}),q.jsx(Je,{variant:"body1",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:`${o.cargo}`})]}),q.jsxs(it,{spacing:1,mt:2,children:[q.jsx(kr,{icon:q.jsx(Zl,{}),title:"Empresa:",value:`${o==null?void 0:o.contrata}`}),q.jsx(kr,{icon:q.jsx(Jl,{}),title:"DNI:",value:`${o==null?void 0:o.dni}`}),q.jsx(kr,{icon:q.jsx(Xl,{}),title:"Teléfono:",value:`${o==null?void 0:o.telefono}`}),q.jsx(kr,{icon:q.jsx(eu,{}),title:"Email:",value:`${o==null?void 0:o.correo}`})]})]})]})})}),q.jsx($o,{}),q.jsx(Ga,{children:q.jsx(no,{variant:"text",color:"tertiary",size:"medium",onClick:A,children:"Volver"})})]})]})},kr=({title:r,value:a,icon:o})=>q.jsx(q.Fragment,{children:q.jsxs(it,{direction:"row",spacing:1,alignItems:"center",children:[o,q.jsx(Je,{variant:"subtitle1",color:"textPrimary",children:r}),q.jsx(Je,{variant:"body1",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:a})]})});var $i=Object.defineProperty,nu=Object.getOwnPropertyDescriptor,iu=Object.getOwnPropertyNames,ou=Object.prototype.hasOwnProperty,at=(r,a)=>()=>(r&&(a=r(r=0)),a),ye=(r,a)=>()=>(a||r((a={exports:{}}).exports,a),a.exports),ur=(r,a)=>{for(var o in a)$i(r,o,{get:a[o],enumerable:!0})},su=(r,a,o,l)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of iu(a))!ou.call(r,c)&&c!==o&&$i(r,c,{get:()=>a[c],enumerable:!(l=nu(a,c))||l.enumerable});return r},De=r=>su($i({},"__esModule",{value:!0}),r),pe=at(()=>{}),Le={};ur(Le,{_debugEnd:()=>Zn,_debugProcess:()=>Qn,_events:()=>fi,_eventsCount:()=>di,_exiting:()=>Ln,_fatalExceptions:()=>Gn,_getActiveHandles:()=>Jo,_getActiveRequests:()=>Zo,_kill:()=>Dn,_linkedBinding:()=>Ko,_maxListeners:()=>ci,_preload_modules:()=>ui,_rawDebug:()=>jn,_startProfilerIdleNotifier:()=>Jn,_stopProfilerIdleNotifier:()=>Xn,_tickCallback:()=>Kn,abort:()=>ni,addListener:()=>pi,allowedNodeEnvironmentFlags:()=>qn,arch:()=>_n,argv:()=>Sn,argv0:()=>li,assert:()=>Xo,binding:()=>In,chdir:()=>Rn,config:()=>Nn,cpuUsage:()=>pr,cwd:()=>On,debugPort:()=>ai,default:()=>Hi,dlopen:()=>Qo,domain:()=>Mn,emit:()=>wi,emitWarning:()=>xn,env:()=>En,execArgv:()=>kn,execPath:()=>si,exit:()=>Vn,features:()=>zn,hasUncaughtExceptionCaptureCallback:()=>es,hrtime:()=>Or,kill:()=>$n,listeners:()=>rs,memoryUsage:()=>Wn,moduleLoadList:()=>Bn,nextTick:()=>Go,off:()=>mi,on:()=>kt,once:()=>gi,openStdin:()=>Hn,pid:()=>ii,platform:()=>vn,ppid:()=>oi,prependListener:()=>_i,prependOnceListener:()=>vi,reallyExit:()=>Un,release:()=>Pn,removeAllListeners:()=>yi,removeListener:()=>bi,resourceUsage:()=>Fn,setSourceMapsEnabled:()=>hi,setUncaughtExceptionCaptureCallback:()=>Yn,stderr:()=>ti,stdin:()=>ri,stdout:()=>ei,title:()=>wn,umask:()=>Tn,uptime:()=>ts,version:()=>An,versions:()=>Cn});function Vi(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function au(){!Xt||!Zt||(Xt=!1,Zt.length?_t=Zt.concat(_t):br=-1,_t.length&&zo())}function zo(){if(!Xt){var r=setTimeout(au,0);Xt=!0;for(var a=_t.length;a;){for(Zt=_t,_t=[];++br<a;)Zt&&Zt[br].run();br=-1,a=_t.length}Zt=null,Xt=!1,clearTimeout(r)}}function Go(r){var a=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)a[o-1]=arguments[o];_t.push(new Yo(r,a)),_t.length===1&&!Xt&&setTimeout(zo,0)}function Yo(r,a){this.fun=r,this.array=a}function nt(){}function Ko(r){Vi("_linkedBinding")}function Qo(r){Vi("dlopen")}function Zo(){return[]}function Jo(){return[]}function Xo(r,a){if(!r)throw new Error(a||"assertion error")}function es(){return!1}function ts(){return It.now()/1e3}function Or(r){var a=Math.floor((Date.now()-It.now())*.001),o=It.now()*.001,l=Math.floor(o)+a,c=Math.floor(o%1*1e9);return r&&(l=l-r[0],c=c-r[1],c<0&&(l--,c+=Rr)),[l,c]}function kt(){return Hi}function rs(r){return[]}var _t,Xt,Zt,br,wn,_n,vn,En,Sn,kn,An,Cn,xn,In,Tn,On,Rn,Pn,jn,Bn,Mn,Ln,Nn,Un,Dn,pr,Fn,Wn,$n,Vn,Hn,qn,zn,Gn,Yn,Kn,Qn,Zn,Jn,Xn,ei,ti,ri,ni,ii,oi,si,ai,li,ui,hi,It,ln,Rr,ci,fi,di,pi,gi,mi,bi,yi,wi,_i,vi,Hi,lu=at(()=>{pe(),me(),ge(),_t=[],Xt=!1,br=-1,Yo.prototype.run=function(){this.fun.apply(null,this.array)},wn="browser",_n="x64",vn="browser",En={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Sn=["/usr/bin/node"],kn=[],An="v16.8.0",Cn={},xn=function(r,a){console.warn((a?a+": ":"")+r)},In=function(r){Vi("binding")},Tn=function(r){return 0},On=function(){return"/"},Rn=function(r){},Pn={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},jn=nt,Bn=[],Mn={},Ln=!1,Nn={},Un=nt,Dn=nt,pr=function(){return{}},Fn=pr,Wn=pr,$n=nt,Vn=nt,Hn=nt,qn={},zn={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Gn=nt,Yn=nt,Kn=nt,Qn=nt,Zn=nt,Jn=nt,Xn=nt,ei=void 0,ti=void 0,ri=void 0,ni=nt,ii=2,oi=1,si="/bin/usr/node",ai=9229,li="node",ui=[],hi=nt,It={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},It.now===void 0&&(ln=Date.now(),It.timing&&It.timing.navigationStart&&(ln=It.timing.navigationStart),It.now=()=>Date.now()-ln),Rr=1e9,Or.bigint=function(r){var a=Or(r);return typeof BigInt>"u"?a[0]*Rr+a[1]:BigInt(a[0]*Rr)+BigInt(a[1])},ci=10,fi={},di=0,pi=kt,gi=kt,mi=kt,bi=kt,yi=kt,wi=nt,_i=kt,vi=kt,Hi={version:An,versions:Cn,arch:_n,platform:vn,release:Pn,_rawDebug:jn,moduleLoadList:Bn,binding:In,_linkedBinding:Ko,_events:fi,_eventsCount:di,_maxListeners:ci,on:kt,addListener:pi,once:gi,off:mi,removeListener:bi,removeAllListeners:yi,emit:wi,prependListener:_i,prependOnceListener:vi,listeners:rs,domain:Mn,_exiting:Ln,config:Nn,dlopen:Qo,uptime:ts,_getActiveRequests:Zo,_getActiveHandles:Jo,reallyExit:Un,_kill:Dn,cpuUsage:pr,resourceUsage:Fn,memoryUsage:Wn,kill:$n,exit:Vn,openStdin:Hn,allowedNodeEnvironmentFlags:qn,assert:Xo,features:zn,_fatalExceptions:Gn,setUncaughtExceptionCaptureCallback:Yn,hasUncaughtExceptionCaptureCallback:es,emitWarning:xn,nextTick:Go,_tickCallback:Kn,_debugProcess:Qn,_debugEnd:Zn,_startProfilerIdleNotifier:Jn,_stopProfilerIdleNotifier:Xn,stdout:ei,stdin:ri,stderr:ti,abort:ni,umask:Tn,chdir:Rn,cwd:On,env:En,title:wn,argv:Sn,execArgv:kn,pid:ii,ppid:oi,execPath:si,debugPort:ai,hrtime:Or,argv0:li,_preload_modules:ui,setSourceMapsEnabled:hi}}),ge=at(()=>{lu()}),Xe={};ur(Xe,{Buffer:()=>Dr,INSPECT_MAX_BYTES:()=>ns,default:()=>At,kMaxLength:()=>is});function uu(){if(Ei)return ar;Ei=!0,ar.byteLength=n,ar.toByteArray=s,ar.fromByteArray=p;for(var r=[],a=[],o=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,i=l.length;c<i;++c)r[c]=l[c],a[l.charCodeAt(c)]=c;a[45]=62,a[95]=63;function e(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=m.indexOf("=");w===-1&&(w=b);var _=w===b?0:4-w%4;return[w,_]}function n(m){var b=e(m),w=b[0],_=b[1];return(w+_)*3/4-_}function t(m,b,w){return(b+w)*3/4-w}function s(m){var b,w=e(m),_=w[0],A=w[1],y=new o(t(m,_,A)),v=0,L=A>0?_-4:_,O;for(O=0;O<L;O+=4)b=a[m.charCodeAt(O)]<<18|a[m.charCodeAt(O+1)]<<12|a[m.charCodeAt(O+2)]<<6|a[m.charCodeAt(O+3)],y[v++]=b>>16&255,y[v++]=b>>8&255,y[v++]=b&255;return A===2&&(b=a[m.charCodeAt(O)]<<2|a[m.charCodeAt(O+1)]>>4,y[v++]=b&255),A===1&&(b=a[m.charCodeAt(O)]<<10|a[m.charCodeAt(O+1)]<<4|a[m.charCodeAt(O+2)]>>2,y[v++]=b>>8&255,y[v++]=b&255),y}function u(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function d(m,b,w){for(var _,A=[],y=b;y<w;y+=3)_=(m[y]<<16&16711680)+(m[y+1]<<8&65280)+(m[y+2]&255),A.push(u(_));return A.join("")}function p(m){for(var b,w=m.length,_=w%3,A=[],y=16383,v=0,L=w-_;v<L;v+=y)A.push(d(m,v,v+y>L?L:v+y));return _===1?(b=m[w-1],A.push(r[b>>2]+r[b<<4&63]+"==")):_===2&&(b=(m[w-2]<<8)+m[w-1],A.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),A.join("")}return ar}function hu(){return Si?gr:(Si=!0,gr.read=function(r,a,o,l,c){var i,e,n=c*8-l-1,t=(1<<n)-1,s=t>>1,u=-7,d=o?c-1:0,p=o?-1:1,m=r[a+d];for(d+=p,i=m&(1<<-u)-1,m>>=-u,u+=n;u>0;i=i*256+r[a+d],d+=p,u-=8);for(e=i&(1<<-u)-1,i>>=-u,u+=l;u>0;e=e*256+r[a+d],d+=p,u-=8);if(i===0)i=1-s;else{if(i===t)return e?NaN:(m?-1:1)*(1/0);e=e+Math.pow(2,l),i=i-s}return(m?-1:1)*e*Math.pow(2,i-l)},gr.write=function(r,a,o,l,c,i){var e,n,t,s=i*8-c-1,u=(1<<s)-1,d=u>>1,p=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=l?0:i-1,b=l?1:-1,w=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(n=isNaN(a)?1:0,e=u):(e=Math.floor(Math.log(a)/Math.LN2),a*(t=Math.pow(2,-e))<1&&(e--,t*=2),e+d>=1?a+=p/t:a+=p*Math.pow(2,1-d),a*t>=2&&(e++,t/=2),e+d>=u?(n=0,e=u):e+d>=1?(n=(a*t-1)*Math.pow(2,c),e=e+d):(n=a*Math.pow(2,d-1)*Math.pow(2,c),e=0));c>=8;r[o+m]=n&255,m+=b,n/=256,c-=8);for(e=e<<c|n,s+=c;s>0;r[o+m]=e&255,m+=b,e/=256,s-=8);r[o+m-b]|=w*128},gr)}function cu(){if(ki)return Nt;ki=!0;let r=uu(),a=hu(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Nt.Buffer=e,Nt.SlowBuffer=A,Nt.INSPECT_MAX_BYTES=50;let l=2147483647;Nt.kMaxLength=l,e.TYPED_ARRAY_SUPPORT=c(),!e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{let h=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(h,f),h.foo()===42}catch{return!1}}Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}});function i(h){if(h>l)throw new RangeError('The value "'+h+'" is invalid for option "size"');let f=new Uint8Array(h);return Object.setPrototypeOf(f,e.prototype),f}function e(h,f,g){if(typeof h=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(h)}return n(h,f,g)}e.poolSize=8192;function n(h,f,g){if(typeof h=="string")return d(h,f);if(ArrayBuffer.isView(h))return m(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(D(h,ArrayBuffer)||h&&D(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(h,SharedArrayBuffer)||h&&D(h.buffer,SharedArrayBuffer)))return b(h,f,g);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let E=h.valueOf&&h.valueOf();if(E!=null&&E!==h)return e.from(E,f,g);let x=w(h);if(x)return x;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return e.from(h[Symbol.toPrimitive]("string"),f,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}e.from=function(h,f,g){return n(h,f,g)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array);function t(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function s(h,f,g){return t(h),h<=0?i(h):f!==void 0?typeof g=="string"?i(h).fill(f,g):i(h).fill(f):i(h)}e.alloc=function(h,f,g){return s(h,f,g)};function u(h){return t(h),i(h<0?0:_(h)|0)}e.allocUnsafe=function(h){return u(h)},e.allocUnsafeSlow=function(h){return u(h)};function d(h,f){if((typeof f!="string"||f==="")&&(f="utf8"),!e.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let g=y(h,f)|0,E=i(g),x=E.write(h,f);return x!==g&&(E=E.slice(0,x)),E}function p(h){let f=h.length<0?0:_(h.length)|0,g=i(f);for(let E=0;E<f;E+=1)g[E]=h[E]&255;return g}function m(h){if(D(h,Uint8Array)){let f=new Uint8Array(h);return b(f.buffer,f.byteOffset,f.byteLength)}return p(h)}function b(h,f,g){if(f<0||h.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<f+(g||0))throw new RangeError('"length" is outside of buffer bounds');let E;return f===void 0&&g===void 0?E=new Uint8Array(h):g===void 0?E=new Uint8Array(h,f):E=new Uint8Array(h,f,g),Object.setPrototypeOf(E,e.prototype),E}function w(h){if(e.isBuffer(h)){let f=_(h.length)|0,g=i(f);return g.length===0||h.copy(g,0,0,f),g}if(h.length!==void 0)return typeof h.length!="number"||ue(h.length)?i(0):p(h);if(h.type==="Buffer"&&Array.isArray(h.data))return p(h.data)}function _(h){if(h>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return h|0}function A(h){return+h!=h&&(h=0),e.alloc(+h)}e.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==e.prototype},e.compare=function(h,f){if(D(h,Uint8Array)&&(h=e.from(h,h.offset,h.byteLength)),D(f,Uint8Array)&&(f=e.from(f,f.offset,f.byteLength)),!e.isBuffer(h)||!e.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===f)return 0;let g=h.length,E=f.length;for(let x=0,N=Math.min(g,E);x<N;++x)if(h[x]!==f[x]){g=h[x],E=f[x];break}return g<E?-1:E<g?1:0},e.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(h,f){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return e.alloc(0);let g;if(f===void 0)for(f=0,g=0;g<h.length;++g)f+=h[g].length;let E=e.allocUnsafe(f),x=0;for(g=0;g<h.length;++g){let N=h[g];if(D(N,Uint8Array))x+N.length>E.length?(e.isBuffer(N)||(N=e.from(N)),N.copy(E,x)):Uint8Array.prototype.set.call(E,N,x);else if(e.isBuffer(N))N.copy(E,x);else throw new TypeError('"list" argument must be an Array of Buffers');x+=N.length}return E};function y(h,f){if(e.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||D(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);let g=h.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&g===0)return 0;let x=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return U(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return ne(h).length;default:if(x)return E?-1:U(h).length;f=(""+f).toLowerCase(),x=!0}}e.byteLength=y;function v(h,f,g){let E=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,f>>>=0,g<=f))return"";for(h||(h="utf8");;)switch(h){case"hex":return le(this,f,g);case"utf8":case"utf-8":return K(this,f,g);case"ascii":return be(this,f,g);case"latin1":case"binary":return ce(this,f,g);case"base64":return R(this,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,f,g);default:if(E)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),E=!0}}e.prototype._isBuffer=!0;function L(h,f,g){let E=h[f];h[f]=h[g],h[g]=E}e.prototype.swap16=function(){let h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<h;f+=2)L(this,f,f+1);return this},e.prototype.swap32=function(){let h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<h;f+=4)L(this,f,f+3),L(this,f+1,f+2);return this},e.prototype.swap64=function(){let h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<h;f+=8)L(this,f,f+7),L(this,f+1,f+6),L(this,f+2,f+5),L(this,f+3,f+4);return this},e.prototype.toString=function(){let h=this.length;return h===0?"":arguments.length===0?K(this,0,h):v.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(h){if(!e.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:e.compare(this,h)===0},e.prototype.inspect=function(){let h="",f=Nt.INSPECT_MAX_BYTES;return h=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(h+=" ... "),"<Buffer "+h+">"},o&&(e.prototype[o]=e.prototype.inspect),e.prototype.compare=function(h,f,g,E,x){if(D(h,Uint8Array)&&(h=e.from(h,h.offset,h.byteLength)),!e.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(f===void 0&&(f=0),g===void 0&&(g=h?h.length:0),E===void 0&&(E=0),x===void 0&&(x=this.length),f<0||g>h.length||E<0||x>this.length)throw new RangeError("out of range index");if(E>=x&&f>=g)return 0;if(E>=x)return-1;if(f>=g)return 1;if(f>>>=0,g>>>=0,E>>>=0,x>>>=0,this===h)return 0;let N=x-E,Y=g-f,Ee=Math.min(N,Y),Se=this.slice(E,x),Ie=h.slice(f,g);for(let je=0;je<Ee;++je)if(Se[je]!==Ie[je]){N=Se[je],Y=Ie[je];break}return N<Y?-1:Y<N?1:0};function O(h,f,g,E,x){if(h.length===0)return-1;if(typeof g=="string"?(E=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,ue(g)&&(g=x?0:h.length-1),g<0&&(g=h.length+g),g>=h.length){if(x)return-1;g=h.length-1}else if(g<0)if(x)g=0;else return-1;if(typeof f=="string"&&(f=e.from(f,E)),e.isBuffer(f))return f.length===0?-1:S(h,f,g,E,x);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(h,f,g):Uint8Array.prototype.lastIndexOf.call(h,f,g):S(h,[f],g,E,x);throw new TypeError("val must be string, number or Buffer")}function S(h,f,g,E,x){let N=1,Y=h.length,Ee=f.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(h.length<2||f.length<2)return-1;N=2,Y/=2,Ee/=2,g/=2}function Se(je,Re){return N===1?je[Re]:je.readUInt16BE(Re*N)}let Ie;if(x){let je=-1;for(Ie=g;Ie<Y;Ie++)if(Se(h,Ie)===Se(f,je===-1?0:Ie-je)){if(je===-1&&(je=Ie),Ie-je+1===Ee)return je*N}else je!==-1&&(Ie-=Ie-je),je=-1}else for(g+Ee>Y&&(g=Y-Ee),Ie=g;Ie>=0;Ie--){let je=!0;for(let Re=0;Re<Ee;Re++)if(Se(h,Ie+Re)!==Se(f,Re)){je=!1;break}if(je)return Ie}return-1}e.prototype.includes=function(h,f,g){return this.indexOf(h,f,g)!==-1},e.prototype.indexOf=function(h,f,g){return O(this,h,f,g,!0)},e.prototype.lastIndexOf=function(h,f,g){return O(this,h,f,g,!1)};function C(h,f,g,E){g=Number(g)||0;let x=h.length-g;E?(E=Number(E),E>x&&(E=x)):E=x;let N=f.length;E>N/2&&(E=N/2);let Y;for(Y=0;Y<E;++Y){let Ee=parseInt(f.substr(Y*2,2),16);if(ue(Ee))return Y;h[g+Y]=Ee}return Y}function j(h,f,g,E){return fe(U(f,h.length-g),h,g,E)}function Q(h,f,g,E){return fe(Z(f),h,g,E)}function X(h,f,g,E){return fe(ne(f),h,g,E)}function ae(h,f,g,E){return fe(oe(f,h.length-g),h,g,E)}e.prototype.write=function(h,f,g,E){if(f===void 0)E="utf8",g=this.length,f=0;else if(g===void 0&&typeof f=="string")E=f,g=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(g)?(g=g>>>0,E===void 0&&(E="utf8")):(E=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let x=this.length-f;if((g===void 0||g>x)&&(g=x),h.length>0&&(g<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let N=!1;for(;;)switch(E){case"hex":return C(this,h,f,g);case"utf8":case"utf-8":return j(this,h,f,g);case"ascii":case"latin1":case"binary":return Q(this,h,f,g);case"base64":return X(this,h,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,h,f,g);default:if(N)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),N=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(h,f,g){return f===0&&g===h.length?r.fromByteArray(h):r.fromByteArray(h.slice(f,g))}function K(h,f,g){g=Math.min(h.length,g);let E=[],x=f;for(;x<g;){let N=h[x],Y=null,Ee=N>239?4:N>223?3:N>191?2:1;if(x+Ee<=g){let Se,Ie,je,Re;switch(Ee){case 1:N<128&&(Y=N);break;case 2:Se=h[x+1],(Se&192)===128&&(Re=(N&31)<<6|Se&63,Re>127&&(Y=Re));break;case 3:Se=h[x+1],Ie=h[x+2],(Se&192)===128&&(Ie&192)===128&&(Re=(N&15)<<12|(Se&63)<<6|Ie&63,Re>2047&&(Re<55296||Re>57343)&&(Y=Re));break;case 4:Se=h[x+1],Ie=h[x+2],je=h[x+3],(Se&192)===128&&(Ie&192)===128&&(je&192)===128&&(Re=(N&15)<<18|(Se&63)<<12|(Ie&63)<<6|je&63,Re>65535&&Re<1114112&&(Y=Re))}}Y===null?(Y=65533,Ee=1):Y>65535&&(Y-=65536,E.push(Y>>>10&1023|55296),Y=56320|Y&1023),E.push(Y),x+=Ee}return W(E)}let J=4096;function W(h){let f=h.length;if(f<=J)return String.fromCharCode.apply(String,h);let g="",E=0;for(;E<f;)g+=String.fromCharCode.apply(String,h.slice(E,E+=J));return g}function be(h,f,g){let E="";g=Math.min(h.length,g);for(let x=f;x<g;++x)E+=String.fromCharCode(h[x]&127);return E}function ce(h,f,g){let E="";g=Math.min(h.length,g);for(let x=f;x<g;++x)E+=String.fromCharCode(h[x]);return E}function le(h,f,g){let E=h.length;(!f||f<0)&&(f=0),(!g||g<0||g>E)&&(g=E);let x="";for(let N=f;N<g;++N)x+=_e[h[N]];return x}function de(h,f,g){let E=h.slice(f,g),x="";for(let N=0;N<E.length-1;N+=2)x+=String.fromCharCode(E[N]+E[N+1]*256);return x}e.prototype.slice=function(h,f){let g=this.length;h=~~h,f=f===void 0?g:~~f,h<0?(h+=g,h<0&&(h=0)):h>g&&(h=g),f<0?(f+=g,f<0&&(f=0)):f>g&&(f=g),f<h&&(f=h);let E=this.subarray(h,f);return Object.setPrototypeOf(E,e.prototype),E};function $(h,f,g){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+f>g)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUintLE=e.prototype.readUIntLE=function(h,f,g){h=h>>>0,f=f>>>0,g||$(h,f,this.length);let E=this[h],x=1,N=0;for(;++N<f&&(x*=256);)E+=this[h+N]*x;return E},e.prototype.readUintBE=e.prototype.readUIntBE=function(h,f,g){h=h>>>0,f=f>>>0,g||$(h,f,this.length);let E=this[h+--f],x=1;for(;f>0&&(x*=256);)E+=this[h+--f]*x;return E},e.prototype.readUint8=e.prototype.readUInt8=function(h,f){return h=h>>>0,f||$(h,1,this.length),this[h]},e.prototype.readUint16LE=e.prototype.readUInt16LE=function(h,f){return h=h>>>0,f||$(h,2,this.length),this[h]|this[h+1]<<8},e.prototype.readUint16BE=e.prototype.readUInt16BE=function(h,f){return h=h>>>0,f||$(h,2,this.length),this[h]<<8|this[h+1]},e.prototype.readUint32LE=e.prototype.readUInt32LE=function(h,f){return h=h>>>0,f||$(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},e.prototype.readUint32BE=e.prototype.readUInt32BE=function(h,f){return h=h>>>0,f||$(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},e.prototype.readBigUInt64LE=te(function(h){h=h>>>0,z(h,"offset");let f=this[h],g=this[h+7];(f===void 0||g===void 0)&&he(h,this.length-8);let E=f+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,x=this[++h]+this[++h]*2**8+this[++h]*2**16+g*2**24;return BigInt(E)+(BigInt(x)<<BigInt(32))}),e.prototype.readBigUInt64BE=te(function(h){h=h>>>0,z(h,"offset");let f=this[h],g=this[h+7];(f===void 0||g===void 0)&&he(h,this.length-8);let E=f*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],x=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+g;return(BigInt(E)<<BigInt(32))+BigInt(x)}),e.prototype.readIntLE=function(h,f,g){h=h>>>0,f=f>>>0,g||$(h,f,this.length);let E=this[h],x=1,N=0;for(;++N<f&&(x*=256);)E+=this[h+N]*x;return x*=128,E>=x&&(E-=Math.pow(2,8*f)),E},e.prototype.readIntBE=function(h,f,g){h=h>>>0,f=f>>>0,g||$(h,f,this.length);let E=f,x=1,N=this[h+--E];for(;E>0&&(x*=256);)N+=this[h+--E]*x;return x*=128,N>=x&&(N-=Math.pow(2,8*f)),N},e.prototype.readInt8=function(h,f){return h=h>>>0,f||$(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},e.prototype.readInt16LE=function(h,f){h=h>>>0,f||$(h,2,this.length);let g=this[h]|this[h+1]<<8;return g&32768?g|4294901760:g},e.prototype.readInt16BE=function(h,f){h=h>>>0,f||$(h,2,this.length);let g=this[h+1]|this[h]<<8;return g&32768?g|4294901760:g},e.prototype.readInt32LE=function(h,f){return h=h>>>0,f||$(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},e.prototype.readInt32BE=function(h,f){return h=h>>>0,f||$(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},e.prototype.readBigInt64LE=te(function(h){h=h>>>0,z(h,"offset");let f=this[h],g=this[h+7];(f===void 0||g===void 0)&&he(h,this.length-8);let E=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(g<<24);return(BigInt(E)<<BigInt(32))+BigInt(f+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),e.prototype.readBigInt64BE=te(function(h){h=h>>>0,z(h,"offset");let f=this[h],g=this[h+7];(f===void 0||g===void 0)&&he(h,this.length-8);let E=(f<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(E)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+g)}),e.prototype.readFloatLE=function(h,f){return h=h>>>0,f||$(h,4,this.length),a.read(this,h,!0,23,4)},e.prototype.readFloatBE=function(h,f){return h=h>>>0,f||$(h,4,this.length),a.read(this,h,!1,23,4)},e.prototype.readDoubleLE=function(h,f){return h=h>>>0,f||$(h,8,this.length),a.read(this,h,!0,52,8)},e.prototype.readDoubleBE=function(h,f){return h=h>>>0,f||$(h,8,this.length),a.read(this,h,!1,52,8)};function se(h,f,g,E,x,N){if(!e.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>x||f<N)throw new RangeError('"value" argument is out of bounds');if(g+E>h.length)throw new RangeError("Index out of range")}e.prototype.writeUintLE=e.prototype.writeUIntLE=function(h,f,g,E){if(h=+h,f=f>>>0,g=g>>>0,!E){let Y=Math.pow(2,8*g)-1;se(this,h,f,g,Y,0)}let x=1,N=0;for(this[f]=h&255;++N<g&&(x*=256);)this[f+N]=h/x&255;return f+g},e.prototype.writeUintBE=e.prototype.writeUIntBE=function(h,f,g,E){if(h=+h,f=f>>>0,g=g>>>0,!E){let Y=Math.pow(2,8*g)-1;se(this,h,f,g,Y,0)}let x=g-1,N=1;for(this[f+x]=h&255;--x>=0&&(N*=256);)this[f+x]=h/N&255;return f+g},e.prototype.writeUint8=e.prototype.writeUInt8=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,1,255,0),this[f]=h&255,f+1},e.prototype.writeUint16LE=e.prototype.writeUInt16LE=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,2,65535,0),this[f]=h&255,this[f+1]=h>>>8,f+2},e.prototype.writeUint16BE=e.prototype.writeUInt16BE=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,2,65535,0),this[f]=h>>>8,this[f+1]=h&255,f+2},e.prototype.writeUint32LE=e.prototype.writeUInt32LE=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,4,4294967295,0),this[f+3]=h>>>24,this[f+2]=h>>>16,this[f+1]=h>>>8,this[f]=h&255,f+4},e.prototype.writeUint32BE=e.prototype.writeUInt32BE=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,4,4294967295,0),this[f]=h>>>24,this[f+1]=h>>>16,this[f+2]=h>>>8,this[f+3]=h&255,f+4};function I(h,f,g,E,x){H(f,E,x,h,g,7);let N=Number(f&BigInt(4294967295));h[g++]=N,N=N>>8,h[g++]=N,N=N>>8,h[g++]=N,N=N>>8,h[g++]=N;let Y=Number(f>>BigInt(32)&BigInt(4294967295));return h[g++]=Y,Y=Y>>8,h[g++]=Y,Y=Y>>8,h[g++]=Y,Y=Y>>8,h[g++]=Y,g}function re(h,f,g,E,x){H(f,E,x,h,g,7);let N=Number(f&BigInt(4294967295));h[g+7]=N,N=N>>8,h[g+6]=N,N=N>>8,h[g+5]=N,N=N>>8,h[g+4]=N;let Y=Number(f>>BigInt(32)&BigInt(4294967295));return h[g+3]=Y,Y=Y>>8,h[g+2]=Y,Y=Y>>8,h[g+1]=Y,Y=Y>>8,h[g]=Y,g+8}e.prototype.writeBigUInt64LE=te(function(h,f=0){return I(this,h,f,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeBigUInt64BE=te(function(h,f=0){return re(this,h,f,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeIntLE=function(h,f,g,E){if(h=+h,f=f>>>0,!E){let Ee=Math.pow(2,8*g-1);se(this,h,f,g,Ee-1,-Ee)}let x=0,N=1,Y=0;for(this[f]=h&255;++x<g&&(N*=256);)h<0&&Y===0&&this[f+x-1]!==0&&(Y=1),this[f+x]=(h/N>>0)-Y&255;return f+g},e.prototype.writeIntBE=function(h,f,g,E){if(h=+h,f=f>>>0,!E){let Ee=Math.pow(2,8*g-1);se(this,h,f,g,Ee-1,-Ee)}let x=g-1,N=1,Y=0;for(this[f+x]=h&255;--x>=0&&(N*=256);)h<0&&Y===0&&this[f+x+1]!==0&&(Y=1),this[f+x]=(h/N>>0)-Y&255;return f+g},e.prototype.writeInt8=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,1,127,-128),h<0&&(h=255+h+1),this[f]=h&255,f+1},e.prototype.writeInt16LE=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,2,32767,-32768),this[f]=h&255,this[f+1]=h>>>8,f+2},e.prototype.writeInt16BE=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,2,32767,-32768),this[f]=h>>>8,this[f+1]=h&255,f+2},e.prototype.writeInt32LE=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,4,2147483647,-2147483648),this[f]=h&255,this[f+1]=h>>>8,this[f+2]=h>>>16,this[f+3]=h>>>24,f+4},e.prototype.writeInt32BE=function(h,f,g){return h=+h,f=f>>>0,g||se(this,h,f,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[f]=h>>>24,this[f+1]=h>>>16,this[f+2]=h>>>8,this[f+3]=h&255,f+4},e.prototype.writeBigInt64LE=te(function(h,f=0){return I(this,h,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),e.prototype.writeBigInt64BE=te(function(h,f=0){return re(this,h,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function we(h,f,g,E,x,N){if(g+E>h.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function F(h,f,g,E,x){return f=+f,g=g>>>0,x||we(h,f,g,4),a.write(h,f,g,E,23,4),g+4}e.prototype.writeFloatLE=function(h,f,g){return F(this,h,f,!0,g)},e.prototype.writeFloatBE=function(h,f,g){return F(this,h,f,!1,g)};function Ce(h,f,g,E,x){return f=+f,g=g>>>0,x||we(h,f,g,8),a.write(h,f,g,E,52,8),g+8}e.prototype.writeDoubleLE=function(h,f,g){return Ce(this,h,f,!0,g)},e.prototype.writeDoubleBE=function(h,f,g){return Ce(this,h,f,!1,g)},e.prototype.copy=function(h,f,g,E){if(!e.isBuffer(h))throw new TypeError("argument should be a Buffer");if(g||(g=0),!E&&E!==0&&(E=this.length),f>=h.length&&(f=h.length),f||(f=0),E>0&&E<g&&(E=g),E===g||h.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),h.length-f<E-g&&(E=h.length-f+g);let x=E-g;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,g,E):Uint8Array.prototype.set.call(h,this.subarray(g,E),f),x},e.prototype.fill=function(h,f,g,E){if(typeof h=="string"){if(typeof f=="string"?(E=f,f=0,g=this.length):typeof g=="string"&&(E=g,g=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!e.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(h.length===1){let N=h.charCodeAt(0);(E==="utf8"&&N<128||E==="latin1")&&(h=N)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(f<0||this.length<f||this.length<g)throw new RangeError("Out of range index");if(g<=f)return this;f=f>>>0,g=g===void 0?this.length:g>>>0,h||(h=0);let x;if(typeof h=="number")for(x=f;x<g;++x)this[x]=h;else{let N=e.isBuffer(h)?h:e.from(h,E),Y=N.length;if(Y===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(x=0;x<g-f;++x)this[x+f]=N[x%Y]}return this};let G={};function M(h,f,g){G[h]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}M("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),M("ERR_INVALID_ARG_TYPE",function(h,f){return`The "${h}" argument must be of type number. Received type ${typeof f}`},TypeError),M("ERR_OUT_OF_RANGE",function(h,f,g){let E=`The value of "${h}" is out of range.`,x=g;return Number.isInteger(g)&&Math.abs(g)>2**32?x=ee(String(g)):typeof g=="bigint"&&(x=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(x=ee(x)),x+="n"),E+=` It must be ${f}. Received ${x}`,E},RangeError);function ee(h){let f="",g=h.length,E=h[0]==="-"?1:0;for(;g>=E+4;g-=3)f=`_${h.slice(g-3,g)}${f}`;return`${h.slice(0,g)}${f}`}function V(h,f,g){z(f,"offset"),(h[f]===void 0||h[f+g]===void 0)&&he(f,h.length-(g+1))}function H(h,f,g,E,x,N){if(h>g||h<f){let Y=typeof f=="bigint"?"n":"",Ee;throw f===0||f===BigInt(0)?Ee=`>= 0${Y} and < 2${Y} ** ${(N+1)*8}${Y}`:Ee=`>= -(2${Y} ** ${(N+1)*8-1}${Y}) and < 2 ** ${(N+1)*8-1}${Y}`,new G.ERR_OUT_OF_RANGE("value",Ee,h)}V(E,x,N)}function z(h,f){if(typeof h!="number")throw new G.ERR_INVALID_ARG_TYPE(f,"number",h)}function he(h,f,g){throw Math.floor(h)!==h?(z(h,g),new G.ERR_OUT_OF_RANGE("offset","an integer",h)):f<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,h)}let ie=/[^+/0-9A-Za-z-_]/g;function B(h){if(h=h.split("=")[0],h=h.trim().replace(ie,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function U(h,f){f=f||1/0;let g,E=h.length,x=null,N=[];for(let Y=0;Y<E;++Y){if(g=h.charCodeAt(Y),g>55295&&g<57344){if(!x){if(g>56319){(f-=3)>-1&&N.push(239,191,189);continue}else if(Y+1===E){(f-=3)>-1&&N.push(239,191,189);continue}x=g;continue}if(g<56320){(f-=3)>-1&&N.push(239,191,189),x=g;continue}g=(x-55296<<10|g-56320)+65536}else x&&(f-=3)>-1&&N.push(239,191,189);if(x=null,g<128){if((f-=1)<0)break;N.push(g)}else if(g<2048){if((f-=2)<0)break;N.push(g>>6|192,g&63|128)}else if(g<65536){if((f-=3)<0)break;N.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((f-=4)<0)break;N.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return N}function Z(h){let f=[];for(let g=0;g<h.length;++g)f.push(h.charCodeAt(g)&255);return f}function oe(h,f){let g,E,x,N=[];for(let Y=0;Y<h.length&&!((f-=2)<0);++Y)g=h.charCodeAt(Y),E=g>>8,x=g%256,N.push(x),N.push(E);return N}function ne(h){return r.toByteArray(B(h))}function fe(h,f,g,E){let x;for(x=0;x<E&&!(x+g>=f.length||x>=h.length);++x)f[x+g]=h[x];return x}function D(h,f){return h instanceof f||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===f.name}function ue(h){return h!==h}let _e=function(){let h="0123456789abcdef",f=new Array(256);for(let g=0;g<16;++g){let E=g*16;for(let x=0;x<16;++x)f[E+x]=h[g]+h[x]}return f}();function te(h){return typeof BigInt>"u"?Oe:h}function Oe(){throw new Error("BigInt not supported")}return Nt}var ar,Ei,gr,Si,Nt,ki,At,Dr,ns,is,et=at(()=>{pe(),me(),ge(),ar={},Ei=!1,gr={},Si=!1,Nt={},ki=!1,At=cu(),At.Buffer,At.SlowBuffer,At.INSPECT_MAX_BYTES,At.kMaxLength,Dr=At.Buffer,ns=At.INSPECT_MAX_BYTES,is=At.kMaxLength}),me=at(()=>{et()}),fu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=class{constructor(o){this.aliasToTopic={},this.max=o}put(o,l){return l===0||l>this.max?!1:(this.aliasToTopic[l]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};r.default=a}),Ge=ye((r,a)=>{pe(),me(),ge();var o=class extends Error{constructor(l){if(!Array.isArray(l))throw new TypeError(`Expected input to be an Array, got ${typeof l}`);let c="";for(let i=0;i<l.length;i++)c+=`    ${l[i].stack}
`;super(c),this.name="AggregateError",this.errors=l}};a.exports={AggregateError:o,ArrayIsArray(l){return Array.isArray(l)},ArrayPrototypeIncludes(l,c){return l.includes(c)},ArrayPrototypeIndexOf(l,c){return l.indexOf(c)},ArrayPrototypeJoin(l,c){return l.join(c)},ArrayPrototypeMap(l,c){return l.map(c)},ArrayPrototypePop(l,c){return l.pop(c)},ArrayPrototypePush(l,c){return l.push(c)},ArrayPrototypeSlice(l,c,i){return l.slice(c,i)},Error,FunctionPrototypeCall(l,c,...i){return l.call(c,...i)},FunctionPrototypeSymbolHasInstance(l,c){return Function.prototype[Symbol.hasInstance].call(l,c)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(l,c){return Object.defineProperties(l,c)},ObjectDefineProperty(l,c,i){return Object.defineProperty(l,c,i)},ObjectGetOwnPropertyDescriptor(l,c){return Object.getOwnPropertyDescriptor(l,c)},ObjectKeys(l){return Object.keys(l)},ObjectSetPrototypeOf(l,c){return Object.setPrototypeOf(l,c)},Promise,PromisePrototypeCatch(l,c){return l.catch(c)},PromisePrototypeThen(l,c,i){return l.then(c,i)},PromiseReject(l){return Promise.reject(l)},PromiseResolve(l){return Promise.resolve(l)},ReflectApply:Reflect.apply,RegExpPrototypeTest(l,c){return l.test(c)},SafeSet:Set,String,StringPrototypeSlice(l,c,i){return l.slice(c,i)},StringPrototypeToLowerCase(l){return l.toLowerCase()},StringPrototypeToUpperCase(l){return l.toUpperCase()},StringPrototypeTrim(l){return l.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(l,c,i){return l.set(c,i)},Boolean,Uint8Array}}),os=ye((r,a)=>{pe(),me(),ge(),a.exports={format(o,...l){return o.replace(/%([sdifj])/g,function(...[c,i]){let e=l.shift();return i==="f"?e.toFixed(6):i==="j"?JSON.stringify(e):i==="s"&&typeof e=="object"?`${e.constructor!==Object?e.constructor.name:""} {}`.trim():e.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),lt=ye((r,a)=>{pe(),me(),ge();var{format:o,inspect:l}=os(),{AggregateError:c}=Ge(),i=globalThis.AggregateError||c,e=Symbol("kIsNodeError"),n=["string","function","number","object","Function","Object","boolean","bigint","symbol"],t=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function d(y,v){if(!y)throw new u.ERR_INTERNAL_ASSERTION(v)}function p(y){let v="",L=y.length,O=y[0]==="-"?1:0;for(;L>=O+4;L-=3)v=`_${y.slice(L-3,L)}${v}`;return`${y.slice(0,L)}${v}`}function m(y,v,L){if(typeof v=="function")return d(v.length<=L.length,`Code: ${y}; The provided arguments length (${L.length}) does not match the required ones (${v.length}).`),v(...L);let O=(v.match(/%[dfijoOs]/g)||[]).length;return d(O===L.length,`Code: ${y}; The provided arguments length (${L.length}) does not match the required ones (${O}).`),L.length===0?v:o(v,...L)}function b(y,v,L){L||(L=Error);class O extends L{constructor(...C){super(m(y,v,C))}toString(){return`${this.name} [${y}]: ${this.message}`}}Object.defineProperties(O.prototype,{name:{value:L.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${y}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),O.prototype.code=y,O.prototype[e]=!0,u[y]=O}function w(y){let v=s+y.name;return Object.defineProperty(y,"name",{value:v}),y}function _(y,v){if(y&&v&&y!==v){if(Array.isArray(v.errors))return v.errors.push(y),v;let L=new i([v,y],v.message);return L.code=v.code,L}return y||v}var A=class extends Error{constructor(y="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",v);super(y,v),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(y,v,L)=>{d(typeof y=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let O="The ";y.endsWith(" argument")?O+=`${y} `:O+=`"${y}" ${y.includes(".")?"property":"argument"} `,O+="must be ";let S=[],C=[],j=[];for(let X of v)d(typeof X=="string","All expected entries have to be of type string"),n.includes(X)?S.push(X.toLowerCase()):t.test(X)?C.push(X):(d(X!=="object",'The value "object" should be written as "Object"'),j.push(X));if(C.length>0){let X=S.indexOf("object");X!==-1&&(S.splice(S,X,1),C.push("Object"))}if(S.length>0){switch(S.length){case 1:O+=`of type ${S[0]}`;break;case 2:O+=`one of type ${S[0]} or ${S[1]}`;break;default:{let X=S.pop();O+=`one of type ${S.join(", ")}, or ${X}`}}(C.length>0||j.length>0)&&(O+=" or ")}if(C.length>0){switch(C.length){case 1:O+=`an instance of ${C[0]}`;break;case 2:O+=`an instance of ${C[0]} or ${C[1]}`;break;default:{let X=C.pop();O+=`an instance of ${C.join(", ")}, or ${X}`}}j.length>0&&(O+=" or ")}switch(j.length){case 0:break;case 1:j[0].toLowerCase()!==j[0]&&(O+="an "),O+=`${j[0]}`;break;case 2:O+=`one of ${j[0]} or ${j[1]}`;break;default:{let X=j.pop();O+=`one of ${j.join(", ")}, or ${X}`}}if(L==null)O+=`. Received ${L}`;else if(typeof L=="function"&&L.name)O+=`. Received function ${L.name}`;else if(typeof L=="object"){var Q;if((Q=L.constructor)!==null&&Q!==void 0&&Q.name)O+=`. Received an instance of ${L.constructor.name}`;else{let X=l(L,{depth:-1});O+=`. Received ${X}`}}else{let X=l(L,{colors:!1});X.length>25&&(X=`${X.slice(0,25)}...`),O+=`. Received type ${typeof L} (${X})`}return O},TypeError),b("ERR_INVALID_ARG_VALUE",(y,v,L="is invalid")=>{let O=l(v);return O.length>128&&(O=O.slice(0,128)+"..."),`The ${y.includes(".")?"property":"argument"} '${y}' ${L}. Received ${O}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(y,v,L)=>{var O;let S=L!=null&&(O=L.constructor)!==null&&O!==void 0&&O.name?`instance of ${L.constructor.name}`:`type ${typeof L}`;return`Expected ${y} to be returned from the "${v}" function but got ${S}.`},TypeError),b("ERR_MISSING_ARGS",(...y)=>{d(y.length>0,"At least one arg needs to be specified");let v,L=y.length;switch(y=(Array.isArray(y)?y:[y]).map(O=>`"${O}"`).join(" or "),L){case 1:v+=`The ${y[0]} argument`;break;case 2:v+=`The ${y[0]} and ${y[1]} arguments`;break;default:{let O=y.pop();v+=`The ${y.join(", ")}, and ${O} arguments`}break}return`${v} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(y,v,L)=>{d(v,'Missing "range" argument');let O;if(Number.isInteger(L)&&Math.abs(L)>2**32)O=p(String(L));else if(typeof L=="bigint"){O=String(L);let S=BigInt(2)**BigInt(32);(L>S||L<-S)&&(O=p(O)),O+="n"}else O=l(L);return`The value of "${y}" is out of range. It must be ${v}. Received ${O}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),a.exports={AbortError:A,aggregateTwoErrors:w(_),hideStackFrames:w,codes:u}}),_r=ye((r,a)=>{pe(),me(),ge();var{AbortController:o,AbortSignal:l}=typeof self<"u"?self:typeof window<"u"?window:void 0;a.exports=o,a.exports.AbortSignal=l,a.exports.default=o});function Ue(){Ue.init.call(this)}function Pr(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function ss(r){return r._maxListeners===void 0?Ue.defaultMaxListeners:r._maxListeners}function lo(r,a,o,l){var c,i,e,n;if(Pr(o),(i=r._events)===void 0?(i=r._events=Object.create(null),r._eventsCount=0):(i.newListener!==void 0&&(r.emit("newListener",a,o.listener?o.listener:o),i=r._events),e=i[a]),e===void 0)e=i[a]=o,++r._eventsCount;else if(typeof e=="function"?e=i[a]=l?[o,e]:[e,o]:l?e.unshift(o):e.push(o),(c=ss(r))>0&&e.length>c&&!e.warned){e.warned=!0;var t=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(a)+" listeners added. Use emitter.setMaxListeners() to increase limit");t.name="MaxListenersExceededWarning",t.emitter=r,t.type=a,t.count=e.length,n=t,console&&console.warn&&console.warn(n)}return r}function du(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uo(r,a,o){var l={fired:!1,wrapFn:void 0,target:r,type:a,listener:o},c=du.bind(l);return c.listener=o,l.wrapFn=c,c}function ho(r,a,o){var l=r._events;if(l===void 0)return[];var c=l[a];return c===void 0?[]:typeof c=="function"?o?[c.listener||c]:[c]:o?function(i){for(var e=new Array(i.length),n=0;n<e.length;++n)e[n]=i[n].listener||i[n];return e}(c):as(c,c.length)}function co(r){var a=this._events;if(a!==void 0){var o=a[r];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}function as(r,a){for(var o=new Array(a),l=0;l<a;++l)o[l]=r[l];return o}var fo,po,Gt,un,hn,cn,ft,go=at(()=>{pe(),me(),ge(),Gt=typeof Reflect=="object"?Reflect:null,un=Gt&&typeof Gt.apply=="function"?Gt.apply:function(r,a,o){return Function.prototype.apply.call(r,a,o)},po=Gt&&typeof Gt.ownKeys=="function"?Gt.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)},hn=Number.isNaN||function(r){return r!=r},fo=Ue,Ue.EventEmitter=Ue,Ue.prototype._events=void 0,Ue.prototype._eventsCount=0,Ue.prototype._maxListeners=void 0,cn=10,Object.defineProperty(Ue,"defaultMaxListeners",{enumerable:!0,get:function(){return cn},set:function(r){if(typeof r!="number"||r<0||hn(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");cn=r}}),Ue.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ue.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||hn(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},Ue.prototype.getMaxListeners=function(){return ss(this)},Ue.prototype.emit=function(r){for(var a=[],o=1;o<arguments.length;o++)a.push(arguments[o]);var l=r==="error",c=this._events;if(c!==void 0)l=l&&c.error===void 0;else if(!l)return!1;if(l){var i;if(a.length>0&&(i=a[0]),i instanceof Error)throw i;var e=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw e.context=i,e}var n=c[r];if(n===void 0)return!1;if(typeof n=="function")un(n,this,a);else{var t=n.length,s=as(n,t);for(o=0;o<t;++o)un(s[o],this,a)}return!0},Ue.prototype.addListener=function(r,a){return lo(this,r,a,!1)},Ue.prototype.on=Ue.prototype.addListener,Ue.prototype.prependListener=function(r,a){return lo(this,r,a,!0)},Ue.prototype.once=function(r,a){return Pr(a),this.on(r,uo(this,r,a)),this},Ue.prototype.prependOnceListener=function(r,a){return Pr(a),this.prependListener(r,uo(this,r,a)),this},Ue.prototype.removeListener=function(r,a){var o,l,c,i,e;if(Pr(a),(l=this._events)===void 0)return this;if((o=l[r])===void 0)return this;if(o===a||o.listener===a)--this._eventsCount==0?this._events=Object.create(null):(delete l[r],l.removeListener&&this.emit("removeListener",r,o.listener||a));else if(typeof o!="function"){for(c=-1,i=o.length-1;i>=0;i--)if(o[i]===a||o[i].listener===a){e=o[i].listener,c=i;break}if(c<0)return this;c===0?o.shift():function(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}(o,c),o.length===1&&(l[r]=o[0]),l.removeListener!==void 0&&this.emit("removeListener",r,e||a)}return this},Ue.prototype.off=Ue.prototype.removeListener,Ue.prototype.removeAllListeners=function(r){var a,o,l;if((o=this._events)===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[r]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete o[r]),this;if(arguments.length===0){var c,i=Object.keys(o);for(l=0;l<i.length;++l)(c=i[l])!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(a=o[r])=="function")this.removeListener(r,a);else if(a!==void 0)for(l=a.length-1;l>=0;l--)this.removeListener(r,a[l]);return this},Ue.prototype.listeners=function(r){return ho(this,r,!0)},Ue.prototype.rawListeners=function(r){return ho(this,r,!1)},Ue.listenerCount=function(r,a){return typeof r.listenerCount=="function"?r.listenerCount(a):co.call(r,a)},Ue.prototype.listenerCount=co,Ue.prototype.eventNames=function(){return this._eventsCount>0?po(this._events):[]},ft=fo,ft.EventEmitter,ft.defaultMaxListeners,ft.init,ft.listenerCount,ft.EventEmitter,ft.defaultMaxListeners,ft.init,ft.listenerCount}),Vt={};ur(Vt,{EventEmitter:()=>ls,default:()=>ft,defaultMaxListeners:()=>us,init:()=>hs,listenerCount:()=>cs,on:()=>fs,once:()=>ds});var ls,us,hs,cs,fs,ds,nr=at(()=>{pe(),me(),ge(),go(),go(),ft.once=function(r,a){return new Promise((o,l)=>{function c(...e){i!==void 0&&r.removeListener("error",i),o(e)}let i;a!=="error"&&(i=e=>{r.removeListener(name,c),l(e)},r.once("error",i)),r.once(a,c)})},ft.on=function(r,a){let o=[],l=[],c=null,i=!1,e={async next(){let s=o.shift();if(s)return createIterResult(s,!1);if(c){let u=Promise.reject(c);return c=null,u}return i?createIterResult(void 0,!0):new Promise((u,d)=>l.push({resolve:u,reject:d}))},async return(){r.removeListener(a,n),r.removeListener("error",t),i=!0;for(let s of l)s.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(s){c=s,r.removeListener(a,n),r.removeListener("error",t)},[Symbol.asyncIterator](){return this}};return r.on(a,n),r.on("error",t),e;function n(...s){let u=l.shift();u?u.resolve(createIterResult(s,!1)):o.push(s)}function t(s){i=!0;let u=l.shift();u?u.reject(s):c=s,e.return()}},{EventEmitter:ls,defaultMaxListeners:us,init:hs,listenerCount:cs,on:fs,once:ds}=ft}),ht=ye((r,a)=>{pe(),me(),ge();var o=(et(),De(Xe)),{format:l,inspect:c}=os(),{codes:{ERR_INVALID_ARG_TYPE:i}}=lt(),{kResistStopPropagation:e,AggregateError:n,SymbolDispose:t}=Ge(),s=globalThis.AbortSignal||_r().AbortSignal,u=globalThis.AbortController||_r().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||o.Blob,m=typeof p<"u"?function(_){return _ instanceof p}:function(_){return!1},b=(_,A)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new i(A,"AbortSignal",_)},w=(_,A)=>{if(typeof _!="function")throw new i(A,"Function",_)};a.exports={AggregateError:n,kEmptyObject:Object.freeze({}),once(_){let A=!1;return function(...y){A||(A=!0,_.apply(this,y))}},createDeferredPromise:function(){let _,A;return{promise:new Promise((y,v)=>{_=y,A=v}),resolve:_,reject:A}},promisify(_){return new Promise((A,y)=>{_((v,...L)=>v?y(v):A(...L))})},debuglog(){return function(){}},format:l,inspect:c,types:{isAsyncFunction(_){return _ instanceof d},isArrayBufferView(_){return ArrayBuffer.isView(_)}},isBlob:m,deprecate(_,A){return _},addAbortListener:(nr(),De(Vt)).addAbortListener||function(_,A){if(_===void 0)throw new i("signal","AbortSignal",_);b(_,"signal"),w(A,"listener");let y;return _.aborted?queueMicrotask(()=>A()):(_.addEventListener("abort",A,{__proto__:null,once:!0,[e]:!0}),y=()=>{_.removeEventListener("abort",A)}),{__proto__:null,[t](){var v;(v=y)===null||v===void 0||v()}}},AbortSignalAny:s.any||function(_){if(_.length===1)return _[0];let A=new u,y=()=>A.abort();return _.forEach(v=>{b(v,"signals"),v.addEventListener("abort",y,{once:!0})}),A.signal.addEventListener("abort",()=>{_.forEach(v=>v.removeEventListener("abort",y))},{once:!0}),A.signal}},a.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Er=ye((r,a)=>{pe(),me(),ge();var{ArrayIsArray:o,ArrayPrototypeIncludes:l,ArrayPrototypeJoin:c,ArrayPrototypeMap:i,NumberIsInteger:e,NumberIsNaN:n,NumberMAX_SAFE_INTEGER:t,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:p,String:m,StringPrototypeToUpperCase:b,StringPrototypeTrim:w}=Ge(),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:A,ERR_INVALID_ARG_TYPE:y,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:L,ERR_UNKNOWN_SIGNAL:O}}=lt(),{normalizeEncoding:S}=ht(),{isAsyncFunction:C,isArrayBufferView:j}=ht().types,Q={};function X(D){return D===(D|0)}function ae(D){return D===D>>>0}var R=/^[0-7]+$/,K="must be a 32-bit unsigned integer or an octal string";function J(D,ue,_e){if(typeof D>"u"&&(D=_e),typeof D=="string"){if(p(R,D)===null)throw new v(ue,D,K);D=u(D,8)}return ce(D,ue),D}var W=_((D,ue,_e=s,te=t)=>{if(typeof D!="number")throw new y(ue,"number",D);if(!e(D))throw new L(ue,"an integer",D);if(D<_e||D>te)throw new L(ue,`>= ${_e} && <= ${te}`,D)}),be=_((D,ue,_e=-2147483648,te=2147483647)=>{if(typeof D!="number")throw new y(ue,"number",D);if(!e(D))throw new L(ue,"an integer",D);if(D<_e||D>te)throw new L(ue,`>= ${_e} && <= ${te}`,D)}),ce=_((D,ue,_e=!1)=>{if(typeof D!="number")throw new y(ue,"number",D);if(!e(D))throw new L(ue,"an integer",D);let te=_e?1:0,Oe=4294967295;if(D<te||D>Oe)throw new L(ue,`>= ${te} && <= ${Oe}`,D)});function le(D,ue){if(typeof D!="string")throw new y(ue,"string",D)}function de(D,ue,_e=void 0,te){if(typeof D!="number")throw new y(ue,"number",D);if(_e!=null&&D<_e||te!=null&&D>te||(_e!=null||te!=null)&&n(D))throw new L(ue,`${_e!=null?`>= ${_e}`:""}${_e!=null&&te!=null?" && ":""}${te!=null?`<= ${te}`:""}`,D)}var $=_((D,ue,_e)=>{if(!l(_e,D)){let te="must be one of: "+c(i(_e,Oe=>typeof Oe=="string"?`'${Oe}'`:m(Oe)),", ");throw new v(ue,D,te)}});function se(D,ue){if(typeof D!="boolean")throw new y(ue,"boolean",D)}function I(D,ue,_e){return D==null||!d(D,ue)?_e:D[ue]}var re=_((D,ue,_e=null)=>{let te=I(_e,"allowArray",!1),Oe=I(_e,"allowFunction",!1);if(!I(_e,"nullable",!1)&&D===null||!te&&o(D)||typeof D!="object"&&(!Oe||typeof D!="function"))throw new y(ue,"Object",D)}),we=_((D,ue)=>{if(D!=null&&typeof D!="object"&&typeof D!="function")throw new y(ue,"a dictionary",D)}),F=_((D,ue,_e=0)=>{if(!o(D))throw new y(ue,"Array",D);if(D.length<_e){let te=`must be longer than ${_e}`;throw new v(ue,D,te)}});function Ce(D,ue){F(D,ue);for(let _e=0;_e<D.length;_e++)le(D[_e],`${ue}[${_e}]`)}function G(D,ue){F(D,ue);for(let _e=0;_e<D.length;_e++)se(D[_e],`${ue}[${_e}]`)}function M(D,ue){F(D,ue);for(let _e=0;_e<D.length;_e++){let te=D[_e],Oe=`${ue}[${_e}]`;if(te==null)throw new y(Oe,"AbortSignal",te);he(te,Oe)}}function ee(D,ue="signal"){if(le(D,ue),Q[D]===void 0)throw Q[b(D)]!==void 0?new O(D+" (signals must use all capital letters)"):new O(D)}var V=_((D,ue="buffer")=>{if(!j(D))throw new y(ue,["Buffer","TypedArray","DataView"],D)});function H(D,ue){let _e=S(ue),te=D.length;if(_e==="hex"&&te%2!==0)throw new v("encoding",ue,`is invalid for data of length ${te}`)}function z(D,ue="Port",_e=!0){if(typeof D!="number"&&typeof D!="string"||typeof D=="string"&&w(D).length===0||+D!==+D>>>0||D>65535||D===0&&!_e)throw new A(ue,D,_e);return D|0}var he=_((D,ue)=>{if(D!==void 0&&(D===null||typeof D!="object"||!("aborted"in D)))throw new y(ue,"AbortSignal",D)}),ie=_((D,ue)=>{if(typeof D!="function")throw new y(ue,"Function",D)}),B=_((D,ue)=>{if(typeof D!="function"||C(D))throw new y(ue,"Function",D)}),U=_((D,ue)=>{if(D!==void 0)throw new y(ue,"undefined",D)});function Z(D,ue,_e){if(!l(_e,D))throw new y(ue,`('${c(_e,"|")}')`,D)}var oe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ne(D,ue){if(typeof D>"u"||!p(oe,D))throw new v(ue,D,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function fe(D){if(typeof D=="string")return ne(D,"hints"),D;if(o(D)){let ue=D.length,_e="";if(ue===0)return _e;for(let te=0;te<ue;te++){let Oe=D[te];ne(Oe,"hints"),_e+=Oe,te!==ue-1&&(_e+=", ")}return _e}throw new v("hints",D,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}a.exports={isInt32:X,isUint32:ae,parseFileMode:J,validateArray:F,validateStringArray:Ce,validateBooleanArray:G,validateAbortSignalArray:M,validateBoolean:se,validateBuffer:V,validateDictionary:we,validateEncoding:H,validateFunction:ie,validateInt32:be,validateInteger:W,validateNumber:de,validateObject:re,validateOneOf:$,validatePlainFunction:B,validatePort:z,validateSignalName:ee,validateString:le,validateUint32:ce,validateUndefined:U,validateUnion:Z,validateAbortSignal:he,validateLinkHeaderValue:fe}}),ir=ye((r,a)=>{pe(),me(),ge();var o=a.exports={},l,c;function i(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=i}catch{l=i}try{typeof clearTimeout=="function"?c=clearTimeout:c=e}catch{c=e}})();function n(A){if(l===setTimeout)return setTimeout(A,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(A,0);try{return l(A,0)}catch{try{return l.call(null,A,0)}catch{return l.call(this,A,0)}}}function t(A){if(c===clearTimeout)return clearTimeout(A);if((c===e||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(A);try{return c(A)}catch{try{return c.call(null,A)}catch{return c.call(this,A)}}}var s=[],u=!1,d,p=-1;function m(){!u||!d||(u=!1,d.length?s=d.concat(s):p=-1,s.length&&b())}function b(){if(!u){var A=n(m);u=!0;for(var y=s.length;y;){for(d=s,s=[];++p<y;)d&&d[p].run();p=-1,y=s.length}d=null,u=!1,t(A)}}o.nextTick=function(A){var y=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)y[v-1]=arguments[v];s.push(new w(A,y)),s.length===1&&!u&&n(b)};function w(A,y){this.fun=A,this.array=y}w.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function _(){}o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(A){return[]},o.binding=function(A){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(A){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),Pt=ye((r,a)=>{pe(),me(),ge();var{SymbolAsyncIterator:o,SymbolIterator:l,SymbolFor:c}=Ge(),i=c("nodejs.stream.destroyed"),e=c("nodejs.stream.errored"),n=c("nodejs.stream.readable"),t=c("nodejs.stream.writable"),s=c("nodejs.stream.disturbed"),u=c("nodejs.webstream.isClosedPromise"),d=c("nodejs.webstream.controllerErrorFunction");function p(I,re=!1){var we;return!!(I&&typeof I.pipe=="function"&&typeof I.on=="function"&&(!re||typeof I.pause=="function"&&typeof I.resume=="function")&&(!I._writableState||((we=I._readableState)===null||we===void 0?void 0:we.readable)!==!1)&&(!I._writableState||I._readableState))}function m(I){var re;return!!(I&&typeof I.write=="function"&&typeof I.on=="function"&&(!I._readableState||((re=I._writableState)===null||re===void 0?void 0:re.writable)!==!1))}function b(I){return!!(I&&typeof I.pipe=="function"&&I._readableState&&typeof I.on=="function"&&typeof I.write=="function")}function w(I){return I&&(I._readableState||I._writableState||typeof I.write=="function"&&typeof I.on=="function"||typeof I.pipe=="function"&&typeof I.on=="function")}function _(I){return!!(I&&!w(I)&&typeof I.pipeThrough=="function"&&typeof I.getReader=="function"&&typeof I.cancel=="function")}function A(I){return!!(I&&!w(I)&&typeof I.getWriter=="function"&&typeof I.abort=="function")}function y(I){return!!(I&&!w(I)&&typeof I.readable=="object"&&typeof I.writable=="object")}function v(I){return _(I)||A(I)||y(I)}function L(I,re){return I==null?!1:re===!0?typeof I[o]=="function":re===!1?typeof I[l]=="function":typeof I[o]=="function"||typeof I[l]=="function"}function O(I){if(!w(I))return null;let re=I._writableState,we=I._readableState,F=re||we;return!!(I.destroyed||I[i]||F!=null&&F.destroyed)}function S(I){if(!m(I))return null;if(I.writableEnded===!0)return!0;let re=I._writableState;return re!=null&&re.errored?!1:typeof(re==null?void 0:re.ended)!="boolean"?null:re.ended}function C(I,re){if(!m(I))return null;if(I.writableFinished===!0)return!0;let we=I._writableState;return we!=null&&we.errored?!1:typeof(we==null?void 0:we.finished)!="boolean"?null:!!(we.finished||re===!1&&we.ended===!0&&we.length===0)}function j(I){if(!p(I))return null;if(I.readableEnded===!0)return!0;let re=I._readableState;return!re||re.errored?!1:typeof(re==null?void 0:re.ended)!="boolean"?null:re.ended}function Q(I,re){if(!p(I))return null;let we=I._readableState;return we!=null&&we.errored?!1:typeof(we==null?void 0:we.endEmitted)!="boolean"?null:!!(we.endEmitted||re===!1&&we.ended===!0&&we.length===0)}function X(I){return I&&I[n]!=null?I[n]:typeof(I==null?void 0:I.readable)!="boolean"?null:O(I)?!1:p(I)&&I.readable&&!Q(I)}function ae(I){return I&&I[t]!=null?I[t]:typeof(I==null?void 0:I.writable)!="boolean"?null:O(I)?!1:m(I)&&I.writable&&!S(I)}function R(I,re){return w(I)?O(I)?!0:!((re==null?void 0:re.readable)!==!1&&X(I)||(re==null?void 0:re.writable)!==!1&&ae(I)):null}function K(I){var re,we;return w(I)?I.writableErrored?I.writableErrored:(re=(we=I._writableState)===null||we===void 0?void 0:we.errored)!==null&&re!==void 0?re:null:null}function J(I){var re,we;return w(I)?I.readableErrored?I.readableErrored:(re=(we=I._readableState)===null||we===void 0?void 0:we.errored)!==null&&re!==void 0?re:null:null}function W(I){if(!w(I))return null;if(typeof I.closed=="boolean")return I.closed;let re=I._writableState,we=I._readableState;return typeof(re==null?void 0:re.closed)=="boolean"||typeof(we==null?void 0:we.closed)=="boolean"?(re==null?void 0:re.closed)||(we==null?void 0:we.closed):typeof I._closed=="boolean"&&be(I)?I._closed:null}function be(I){return typeof I._closed=="boolean"&&typeof I._defaultKeepAlive=="boolean"&&typeof I._removedConnection=="boolean"&&typeof I._removedContLen=="boolean"}function ce(I){return typeof I._sent100=="boolean"&&be(I)}function le(I){var re;return typeof I._consuming=="boolean"&&typeof I._dumped=="boolean"&&((re=I.req)===null||re===void 0?void 0:re.upgradeOrConnect)===void 0}function de(I){if(!w(I))return null;let re=I._writableState,we=I._readableState,F=re||we;return!F&&ce(I)||!!(F&&F.autoDestroy&&F.emitClose&&F.closed===!1)}function $(I){var re;return!!(I&&((re=I[s])!==null&&re!==void 0?re:I.readableDidRead||I.readableAborted))}function se(I){var re,we,F,Ce,G,M,ee,V,H,z;return!!(I&&((re=(we=(F=(Ce=(G=(M=I[e])!==null&&M!==void 0?M:I.readableErrored)!==null&&G!==void 0?G:I.writableErrored)!==null&&Ce!==void 0?Ce:(ee=I._readableState)===null||ee===void 0?void 0:ee.errorEmitted)!==null&&F!==void 0?F:(V=I._writableState)===null||V===void 0?void 0:V.errorEmitted)!==null&&we!==void 0?we:(H=I._readableState)===null||H===void 0?void 0:H.errored)!==null&&re!==void 0?re:!((z=I._writableState)===null||z===void 0)&&z.errored))}a.exports={isDestroyed:O,kIsDestroyed:i,isDisturbed:$,kIsDisturbed:s,isErrored:se,kIsErrored:e,isReadable:X,kIsReadable:n,kIsClosedPromise:u,kControllerErrorFunction:d,kIsWritable:t,isClosed:W,isDuplexNodeStream:b,isFinished:R,isIterable:L,isReadableNodeStream:p,isReadableStream:_,isReadableEnded:j,isReadableFinished:Q,isReadableErrored:J,isNodeStream:w,isWebStream:v,isWritable:ae,isWritableNodeStream:m,isWritableStream:A,isWritableEnded:S,isWritableFinished:C,isWritableErrored:K,isServerRequest:le,isServerResponse:ce,willEmitClose:de,isTransformStream:y}}),Ht=ye((r,a)=>{pe(),me(),ge();var o=ir(),{AbortError:l,codes:c}=lt(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:e}=c,{kEmptyObject:n,once:t}=ht(),{validateAbortSignal:s,validateFunction:u,validateObject:d,validateBoolean:p}=Er(),{Promise:m,PromisePrototypeThen:b,SymbolDispose:w}=Ge(),{isClosed:_,isReadable:A,isReadableNodeStream:y,isReadableStream:v,isReadableFinished:L,isReadableErrored:O,isWritable:S,isWritableNodeStream:C,isWritableStream:j,isWritableFinished:Q,isWritableErrored:X,isNodeStream:ae,willEmitClose:R,kIsClosedPromise:K}=Pt(),J;function W($){return $.setHeader&&typeof $.abort=="function"}var be=()=>{};function ce($,se,I){var re,we;if(arguments.length===2?(I=se,se=n):se==null?se=n:d(se,"options"),u(I,"callback"),s(se.signal,"options.signal"),I=t(I),v($)||j($))return le($,se,I);if(!ae($))throw new i("stream",["ReadableStream","WritableStream","Stream"],$);let F=(re=se.readable)!==null&&re!==void 0?re:y($),Ce=(we=se.writable)!==null&&we!==void 0?we:C($),G=$._writableState,M=$._readableState,ee=()=>{$.writable||z()},V=R($)&&y($)===F&&C($)===Ce,H=Q($,!1),z=()=>{H=!0,$.destroyed&&(V=!1),!(V&&(!$.readable||F))&&(!F||he)&&I.call($)},he=L($,!1),ie=()=>{he=!0,$.destroyed&&(V=!1),!(V&&(!$.writable||Ce))&&(!Ce||H)&&I.call($)},B=D=>{I.call($,D)},U=_($),Z=()=>{U=!0;let D=X($)||O($);if(D&&typeof D!="boolean")return I.call($,D);if(F&&!he&&y($,!0)&&!L($,!1))return I.call($,new e);if(Ce&&!H&&!Q($,!1))return I.call($,new e);I.call($)},oe=()=>{U=!0;let D=X($)||O($);if(D&&typeof D!="boolean")return I.call($,D);I.call($)},ne=()=>{$.req.on("finish",z)};W($)?($.on("complete",z),V||$.on("abort",Z),$.req?ne():$.on("request",ne)):Ce&&!G&&($.on("end",ee),$.on("close",ee)),!V&&typeof $.aborted=="boolean"&&$.on("aborted",Z),$.on("end",ie),$.on("finish",z),se.error!==!1&&$.on("error",B),$.on("close",Z),U?o.nextTick(Z):G!=null&&G.errorEmitted||M!=null&&M.errorEmitted?V||o.nextTick(oe):(!F&&(!V||A($))&&(H||S($)===!1)||!Ce&&(!V||S($))&&(he||A($)===!1)||M&&$.req&&$.aborted)&&o.nextTick(oe);let fe=()=>{I=be,$.removeListener("aborted",Z),$.removeListener("complete",z),$.removeListener("abort",Z),$.removeListener("request",ne),$.req&&$.req.removeListener("finish",z),$.removeListener("end",ee),$.removeListener("close",ee),$.removeListener("finish",z),$.removeListener("end",ie),$.removeListener("error",B),$.removeListener("close",Z)};if(se.signal&&!U){let D=()=>{let ue=I;fe(),ue.call($,new l(void 0,{cause:se.signal.reason}))};if(se.signal.aborted)o.nextTick(D);else{J=J||ht().addAbortListener;let ue=J(se.signal,D),_e=I;I=t((...te)=>{ue[w](),_e.apply($,te)})}}return fe}function le($,se,I){let re=!1,we=be;if(se.signal)if(we=()=>{re=!0,I.call($,new l(void 0,{cause:se.signal.reason}))},se.signal.aborted)o.nextTick(we);else{J=J||ht().addAbortListener;let Ce=J(se.signal,we),G=I;I=t((...M)=>{Ce[w](),G.apply($,M)})}let F=(...Ce)=>{re||o.nextTick(()=>I.apply($,Ce))};return b($[K].promise,F,F),be}function de($,se){var I;let re=!1;return se===null&&(se=n),(I=se)!==null&&I!==void 0&&I.cleanup&&(p(se.cleanup,"cleanup"),re=se.cleanup),new m((we,F)=>{let Ce=ce($,se,G=>{re&&Ce(),G?F(G):we()})})}a.exports=ce,a.exports.finished=de}),hr=ye((r,a)=>{pe(),me(),ge();var o=ir(),{aggregateTwoErrors:l,codes:{ERR_MULTIPLE_CALLBACK:c},AbortError:i}=lt(),{Symbol:e}=Ge(),{kIsDestroyed:n,isDestroyed:t,isFinished:s,isServerRequest:u}=Pt(),d=e("kDestroy"),p=e("kConstruct");function m(R,K,J){R&&(R.stack,K&&!K.errored&&(K.errored=R),J&&!J.errored&&(J.errored=R))}function b(R,K){let J=this._readableState,W=this._writableState,be=W||J;return W!=null&&W.destroyed||J!=null&&J.destroyed?(typeof K=="function"&&K(),this):(m(R,W,J),W&&(W.destroyed=!0),J&&(J.destroyed=!0),be.constructed?w(this,R,K):this.once(d,function(ce){w(this,l(ce,R),K)}),this)}function w(R,K,J){let W=!1;function be(ce){if(W)return;W=!0;let le=R._readableState,de=R._writableState;m(ce,de,le),de&&(de.closed=!0),le&&(le.closed=!0),typeof J=="function"&&J(ce),ce?o.nextTick(_,R,ce):o.nextTick(A,R)}try{R._destroy(K||null,be)}catch(ce){be(ce)}}function _(R,K){y(R,K),A(R)}function A(R){let K=R._readableState,J=R._writableState;J&&(J.closeEmitted=!0),K&&(K.closeEmitted=!0),(J!=null&&J.emitClose||K!=null&&K.emitClose)&&R.emit("close")}function y(R,K){let J=R._readableState,W=R._writableState;W!=null&&W.errorEmitted||J!=null&&J.errorEmitted||(W&&(W.errorEmitted=!0),J&&(J.errorEmitted=!0),R.emit("error",K))}function v(){let R=this._readableState,K=this._writableState;R&&(R.constructed=!0,R.closed=!1,R.closeEmitted=!1,R.destroyed=!1,R.errored=null,R.errorEmitted=!1,R.reading=!1,R.ended=R.readable===!1,R.endEmitted=R.readable===!1),K&&(K.constructed=!0,K.destroyed=!1,K.closed=!1,K.closeEmitted=!1,K.errored=null,K.errorEmitted=!1,K.finalCalled=!1,K.prefinished=!1,K.ended=K.writable===!1,K.ending=K.writable===!1,K.finished=K.writable===!1)}function L(R,K,J){let W=R._readableState,be=R._writableState;if(be!=null&&be.destroyed||W!=null&&W.destroyed)return this;W!=null&&W.autoDestroy||be!=null&&be.autoDestroy?R.destroy(K):K&&(K.stack,be&&!be.errored&&(be.errored=K),W&&!W.errored&&(W.errored=K),J?o.nextTick(y,R,K):y(R,K))}function O(R,K){if(typeof R._construct!="function")return;let J=R._readableState,W=R._writableState;J&&(J.constructed=!1),W&&(W.constructed=!1),R.once(p,K),!(R.listenerCount(p)>1)&&o.nextTick(S,R)}function S(R){let K=!1;function J(W){if(K){L(R,W??new c);return}K=!0;let be=R._readableState,ce=R._writableState,le=ce||be;be&&(be.constructed=!0),ce&&(ce.constructed=!0),le.destroyed?R.emit(d,W):W?L(R,W,!0):o.nextTick(C,R)}try{R._construct(W=>{o.nextTick(J,W)})}catch(W){o.nextTick(J,W)}}function C(R){R.emit(p)}function j(R){return(R==null?void 0:R.setHeader)&&typeof R.abort=="function"}function Q(R){R.emit("close")}function X(R,K){R.emit("error",K),o.nextTick(Q,R)}function ae(R,K){!R||t(R)||(!K&&!s(R)&&(K=new i),u(R)?(R.socket=null,R.destroy(K)):j(R)?R.abort():j(R.req)?R.req.abort():typeof R.destroy=="function"?R.destroy(K):typeof R.close=="function"?R.close():K?o.nextTick(X,R,K):o.nextTick(Q,R),R.destroyed||(R[n]=!0))}a.exports={construct:O,destroyer:ae,destroy:b,undestroy:v,errorOrDestroy:L}}),qi=ye((r,a)=>{pe(),me(),ge();var{ArrayIsArray:o,ObjectSetPrototypeOf:l}=Ge(),{EventEmitter:c}=(nr(),De(Vt));function i(n){c.call(this,n)}l(i.prototype,c.prototype),l(i,c),i.prototype.pipe=function(n,t){let s=this;function u(A){n.writable&&n.write(A)===!1&&s.pause&&s.pause()}s.on("data",u);function d(){s.readable&&s.resume&&s.resume()}n.on("drain",d),!n._isStdio&&(!t||t.end!==!1)&&(s.on("end",m),s.on("close",b));let p=!1;function m(){p||(p=!0,n.end())}function b(){p||(p=!0,typeof n.destroy=="function"&&n.destroy())}function w(A){_(),c.listenerCount(this,"error")===0&&this.emit("error",A)}e(s,"error",w),e(n,"error",w);function _(){s.removeListener("data",u),n.removeListener("drain",d),s.removeListener("end",m),s.removeListener("close",b),s.removeListener("error",w),n.removeListener("error",w),s.removeListener("end",_),s.removeListener("close",_),n.removeListener("close",_)}return s.on("end",_),s.on("close",_),n.on("close",_),n.emit("pipe",s),n};function e(n,t,s){if(typeof n.prependListener=="function")return n.prependListener(t,s);!n._events||!n._events[t]?n.on(t,s):o(n._events[t])?n._events[t].unshift(s):n._events[t]=[s,n._events[t]]}a.exports={Stream:i,prependListener:e}}),zr=ye((r,a)=>{pe(),me(),ge();var{SymbolDispose:o}=Ge(),{AbortError:l,codes:c}=lt(),{isNodeStream:i,isWebStream:e,kControllerErrorFunction:n}=Pt(),t=Ht(),{ERR_INVALID_ARG_TYPE:s}=c,u,d=(p,m)=>{if(typeof p!="object"||!("aborted"in p))throw new s(m,"AbortSignal",p)};a.exports.addAbortSignal=function(p,m){if(d(p,"signal"),!i(m)&&!e(m))throw new s("stream",["ReadableStream","WritableStream","Stream"],m);return a.exports.addAbortSignalNoValidate(p,m)},a.exports.addAbortSignalNoValidate=function(p,m){if(typeof p!="object"||!("aborted"in p))return m;let b=i(m)?()=>{m.destroy(new l(void 0,{cause:p.reason}))}:()=>{m[n](new l(void 0,{cause:p.reason}))};if(p.aborted)b();else{u=u||ht().addAbortListener;let w=u(p,b);t(m,w[o])}return m}}),pu=ye((r,a)=>{pe(),me(),ge();var{StringPrototypeSlice:o,SymbolIterator:l,TypedArrayPrototypeSet:c,Uint8Array:i}=Ge(),{Buffer:e}=(et(),De(Xe)),{inspect:n}=ht();a.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let s={data:t,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}unshift(t){let s={data:t,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let s=this.head,u=""+s.data;for(;(s=s.next)!==null;)u+=t+s.data;return u}concat(t){if(this.length===0)return e.alloc(0);let s=e.allocUnsafe(t>>>0),u=this.head,d=0;for(;u;)c(s,u.data,d),d+=u.data.length,u=u.next;return s}consume(t,s){let u=this.head.data;if(t<u.length){let d=u.slice(0,t);return this.head.data=u.slice(t),d}return t===u.length?this.shift():s?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[l](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let s="",u=this.head,d=0;do{let p=u.data;if(t>p.length)s+=p,t-=p.length;else{t===p.length?(s+=p,++d,u.next?this.head=u.next:this.head=this.tail=null):(s+=o(p,0,t),this.head=u,u.data=o(p,t));break}++d}while((u=u.next)!==null);return this.length-=d,s}_getBuffer(t){let s=e.allocUnsafe(t),u=t,d=this.head,p=0;do{let m=d.data;if(t>m.length)c(s,m,u-t),t-=m.length;else{t===m.length?(c(s,m,u-t),++p,d.next?this.head=d.next:this.head=this.tail=null):(c(s,new i(m.buffer,m.byteOffset,t),u-t),this.head=d,d.data=m.slice(t));break}++p}while((d=d.next)!==null);return this.length-=p,s}[Symbol.for("nodejs.util.inspect.custom")](t,s){return n(this,{...s,depth:0,customInspect:!1})}}}),Gr=ye((r,a)=>{pe(),me(),ge();var{MathFloor:o,NumberIsInteger:l}=Ge(),{validateInteger:c}=Er(),{ERR_INVALID_ARG_VALUE:i}=lt().codes,e=16*1024,n=16;function t(p,m,b){return p.highWaterMark!=null?p.highWaterMark:m?p[b]:null}function s(p){return p?n:e}function u(p,m){c(m,"value",0),p?n=m:e=m}function d(p,m,b,w){let _=t(m,w,b);if(_!=null){if(!l(_)||_<0){let A=w?`options.${b}`:"options.highWaterMark";throw new i(A,_)}return o(_)}return s(p.objectMode)}a.exports={getHighWaterMark:d,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u}}),gu=ye((r,a)=>{pe(),me(),ge();var o=(et(),De(Xe)),l=o.Buffer;function c(e,n){for(var t in e)n[t]=e[t]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?a.exports=o:(c(o,r),r.Buffer=i);function i(e,n,t){return l(e,n,t)}i.prototype=Object.create(l.prototype),c(l,i),i.from=function(e,n,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return l(e,n,t)},i.alloc=function(e,n,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var s=l(e);return n!==void 0?typeof t=="string"?s.fill(n,t):s.fill(n):s.fill(0),s},i.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return l(e)},i.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}}),mu=ye(r=>{pe(),me(),ge();var a=gu().Buffer,o=a.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function c(y){var v=l(y);if(typeof v!="string"&&(a.isEncoding===o||!o(y)))throw new Error("Unknown encoding: "+y);return v||y}r.StringDecoder=i;function i(y){this.encoding=c(y);var v;switch(this.encoding){case"utf16le":this.text=p,this.end=m,v=4;break;case"utf8":this.fillLast=s,v=4;break;case"base64":this.text=b,this.end=w,v=3;break;default:this.write=_,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(v)}i.prototype.write=function(y){if(y.length===0)return"";var v,L;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<y.length?v?v+this.text(y,L):this.text(y,L):v||""},i.prototype.end=d,i.prototype.text=u,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function e(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function n(y,v,L){var O=v.length-1;if(O<L)return 0;var S=e(v[O]);return S>=0?(S>0&&(y.lastNeed=S-1),S):--O<L||S===-2?0:(S=e(v[O]),S>=0?(S>0&&(y.lastNeed=S-2),S):--O<L||S===-2?0:(S=e(v[O]),S>=0?(S>0&&(S===2?S=0:y.lastNeed=S-3),S):0))}function t(y,v,L){if((v[0]&192)!==128)return y.lastNeed=0,"�";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"�";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,"�"}}function s(y){var v=this.lastTotal-this.lastNeed,L=t(this,y);if(L!==void 0)return L;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function u(y,v){var L=n(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=L;var O=y.length-(L-this.lastNeed);return y.copy(this.lastChar,0,O),y.toString("utf8",v,O)}function d(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"�":v}function p(y,v){if((y.length-v)%2===0){var L=y.toString("utf16le",v);if(L){var O=L.charCodeAt(L.length-1);if(O>=55296&&O<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function m(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var L=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,L)}return v}function b(y,v){var L=(y.length-v)%3;return L===0?y.toString("base64",v):(this.lastNeed=3-L,this.lastTotal=3,L===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-L))}function w(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function _(y){return y.toString(this.encoding)}function A(y){return y&&y.length?this.write(y):""}}),ps=ye((r,a)=>{pe(),me(),ge();var o=ir(),{PromisePrototypeThen:l,SymbolAsyncIterator:c,SymbolIterator:i}=Ge(),{Buffer:e}=(et(),De(Xe)),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_NULL_VALUES:t}=lt().codes;function s(u,d,p){let m;if(typeof d=="string"||d instanceof e)return new u({objectMode:!0,...p,read(){this.push(d),this.push(null)}});let b;if(d&&d[c])b=!0,m=d[c]();else if(d&&d[i])b=!1,m=d[i]();else throw new n("iterable",["Iterable"],d);let w=new u({objectMode:!0,highWaterMark:1,...p}),_=!1;w._read=function(){_||(_=!0,y())},w._destroy=function(v,L){l(A(v),()=>o.nextTick(L,v),O=>o.nextTick(L,O||v))};async function A(v){let L=v!=null,O=typeof m.throw=="function";if(L&&O){let{value:S,done:C}=await m.throw(v);if(await S,C)return}if(typeof m.return=="function"){let{value:S}=await m.return();await S}}async function y(){for(;;){try{let{value:v,done:L}=b?await m.next():m.next();if(L)w.push(null);else{let O=v&&typeof v.then=="function"?await v:v;if(O===null)throw _=!1,new t;if(w.push(O))continue;_=!1}}catch(v){w.destroy(v)}break}}return w}a.exports=s}),Yr=ye((r,a)=>{pe(),me(),ge();var o=ir(),{ArrayPrototypeIndexOf:l,NumberIsInteger:c,NumberIsNaN:i,NumberParseInt:e,ObjectDefineProperties:n,ObjectKeys:t,ObjectSetPrototypeOf:s,Promise:u,SafeSet:d,SymbolAsyncDispose:p,SymbolAsyncIterator:m,Symbol:b}=Ge();a.exports=te,te.ReadableState=_e;var{EventEmitter:w}=(nr(),De(Vt)),{Stream:_,prependListener:A}=qi(),{Buffer:y}=(et(),De(Xe)),{addAbortSignal:v}=zr(),L=Ht(),O=ht().debuglog("stream",k=>{O=k}),S=pu(),C=hr(),{getHighWaterMark:j,getDefaultHighWaterMark:Q}=Gr(),{aggregateTwoErrors:X,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_METHOD_NOT_IMPLEMENTED:R,ERR_OUT_OF_RANGE:K,ERR_STREAM_PUSH_AFTER_EOF:J,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:W},AbortError:be}=lt(),{validateObject:ce}=Er(),le=b("kPaused"),{StringDecoder:de}=mu(),$=ps();s(te.prototype,_.prototype),s(te,_);var se=()=>{},{errorOrDestroy:I}=C,re=1,we=2,F=4,Ce=8,G=16,M=32,ee=64,V=128,H=256,z=512,he=1024,ie=2048,B=4096,U=8192,Z=16384,oe=32768,ne=65536,fe=1<<17,D=1<<18;function ue(k){return{enumerable:!1,get(){return(this.state&k)!==0},set(P){P?this.state|=k:this.state&=~k}}}n(_e.prototype,{objectMode:ue(re),ended:ue(we),endEmitted:ue(F),reading:ue(Ce),constructed:ue(G),sync:ue(M),needReadable:ue(ee),emittedReadable:ue(V),readableListening:ue(H),resumeScheduled:ue(z),errorEmitted:ue(he),emitClose:ue(ie),autoDestroy:ue(B),destroyed:ue(U),closed:ue(Z),closeEmitted:ue(oe),multiAwaitDrain:ue(ne),readingMore:ue(fe),dataEmitted:ue(D)});function _e(k,P,ve){typeof ve!="boolean"&&(ve=P instanceof Tt()),this.state=ie|B|G|M,k&&k.objectMode&&(this.state|=re),ve&&k&&k.readableObjectMode&&(this.state|=re),this.highWaterMark=k?j(this,k,"readableHighWaterMark",ve):Q(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[le]=null,k&&k.emitClose===!1&&(this.state&=-2049),k&&k.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=k&&k.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,k&&k.encoding&&(this.decoder=new de(k.encoding),this.encoding=k.encoding)}function te(k){if(!(this instanceof te))return new te(k);let P=this instanceof Tt();this._readableState=new _e(k,this,P),k&&(typeof k.read=="function"&&(this._read=k.read),typeof k.destroy=="function"&&(this._destroy=k.destroy),typeof k.construct=="function"&&(this._construct=k.construct),k.signal&&!P&&v(k.signal,this)),_.call(this,k),C.construct(this,()=>{this._readableState.needReadable&&Ee(this,this._readableState)})}te.prototype.destroy=C.destroy,te.prototype._undestroy=C.undestroy,te.prototype._destroy=function(k,P){P(k)},te.prototype[w.captureRejectionSymbol]=function(k){this.destroy(k)},te.prototype[p]=function(){let k;return this.destroyed||(k=this.readableEnded?null:new be,this.destroy(k)),new u((P,ve)=>L(this,ke=>ke&&ke!==k?ve(ke):P(null)))},te.prototype.push=function(k,P){return Oe(this,k,P,!1)},te.prototype.unshift=function(k,P){return Oe(this,k,P,!0)};function Oe(k,P,ve,ke){O("readableAddChunk",P);let xe=k._readableState,rt;if(!(xe.state&re)&&(typeof P=="string"?(ve=ve||xe.defaultEncoding,xe.encoding!==ve&&(ke&&xe.encoding?P=y.from(P,ve).toString(xe.encoding):(P=y.from(P,ve),ve=""))):P instanceof y?ve="":_._isUint8Array(P)?(P=_._uint8ArrayToBuffer(P),ve=""):P!=null&&(rt=new ae("chunk",["string","Buffer","Uint8Array"],P))),rt)I(k,rt);else if(P===null)xe.state&=-9,x(k,xe);else if(xe.state&re||P&&P.length>0)if(ke)if(xe.state&F)I(k,new W);else{if(xe.destroyed||xe.errored)return!1;h(k,xe,P,!0)}else if(xe.ended)I(k,new J);else{if(xe.destroyed||xe.errored)return!1;xe.state&=-9,xe.decoder&&!ve?(P=xe.decoder.write(P),xe.objectMode||P.length!==0?h(k,xe,P,!1):Ee(k,xe)):h(k,xe,P,!1)}else ke||(xe.state&=-9,Ee(k,xe));return!xe.ended&&(xe.length<xe.highWaterMark||xe.length===0)}function h(k,P,ve,ke){P.flowing&&P.length===0&&!P.sync&&k.listenerCount("data")>0?(P.state&ne?P.awaitDrainWriters.clear():P.awaitDrainWriters=null,P.dataEmitted=!0,k.emit("data",ve)):(P.length+=P.objectMode?1:ve.length,ke?P.buffer.unshift(ve):P.buffer.push(ve),P.state&ee&&N(k)),Ee(k,P)}te.prototype.isPaused=function(){let k=this._readableState;return k[le]===!0||k.flowing===!1},te.prototype.setEncoding=function(k){let P=new de(k);this._readableState.decoder=P,this._readableState.encoding=this._readableState.decoder.encoding;let ve=this._readableState.buffer,ke="";for(let xe of ve)ke+=P.write(xe);return ve.clear(),ke!==""&&ve.push(ke),this._readableState.length=ke.length,this};var f=1073741824;function g(k){if(k>f)throw new K("size","<= 1GiB",k);return k--,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,k|=k>>>16,k++,k}function E(k,P){return k<=0||P.length===0&&P.ended?0:P.state&re?1:i(k)?P.flowing&&P.length?P.buffer.first().length:P.length:k<=P.length?k:P.ended?P.length:0}te.prototype.read=function(k){O("read",k),k===void 0?k=NaN:c(k)||(k=e(k,10));let P=this._readableState,ve=k;if(k>P.highWaterMark&&(P.highWaterMark=g(k)),k!==0&&(P.state&=-129),k===0&&P.needReadable&&((P.highWaterMark!==0?P.length>=P.highWaterMark:P.length>0)||P.ended))return O("read: emitReadable",P.length,P.ended),P.length===0&&P.ended?Fe(this):N(this),null;if(k=E(k,P),k===0&&P.ended)return P.length===0&&Fe(this),null;let ke=(P.state&ee)!==0;if(O("need readable",ke),(P.length===0||P.length-k<P.highWaterMark)&&(ke=!0,O("length less than watermark",ke)),P.ended||P.reading||P.destroyed||P.errored||!P.constructed)ke=!1,O("reading, ended or constructing",ke);else if(ke){O("do read"),P.state|=Ce|M,P.length===0&&(P.state|=ee);try{this._read(P.highWaterMark)}catch(rt){I(this,rt)}P.state&=-33,P.reading||(k=E(ve,P))}let xe;return k>0?xe=Pe(k,P):xe=null,xe===null?(P.needReadable=P.length<=P.highWaterMark,k=0):(P.length-=k,P.multiAwaitDrain?P.awaitDrainWriters.clear():P.awaitDrainWriters=null),P.length===0&&(P.ended||(P.needReadable=!0),ve!==k&&P.ended&&Fe(this)),xe!==null&&!P.errorEmitted&&!P.closeEmitted&&(P.dataEmitted=!0,this.emit("data",xe)),xe};function x(k,P){if(O("onEofChunk"),!P.ended){if(P.decoder){let ve=P.decoder.end();ve&&ve.length&&(P.buffer.push(ve),P.length+=P.objectMode?1:ve.length)}P.ended=!0,P.sync?N(k):(P.needReadable=!1,P.emittedReadable=!0,Y(k))}}function N(k){let P=k._readableState;O("emitReadable",P.needReadable,P.emittedReadable),P.needReadable=!1,P.emittedReadable||(O("emitReadable",P.flowing),P.emittedReadable=!0,o.nextTick(Y,k))}function Y(k){let P=k._readableState;O("emitReadable_",P.destroyed,P.length,P.ended),!P.destroyed&&!P.errored&&(P.length||P.ended)&&(k.emit("readable"),P.emittedReadable=!1),P.needReadable=!P.flowing&&!P.ended&&P.length<=P.highWaterMark,ct(k)}function Ee(k,P){!P.readingMore&&P.constructed&&(P.readingMore=!0,o.nextTick(Se,k,P))}function Se(k,P){for(;!P.reading&&!P.ended&&(P.length<P.highWaterMark||P.flowing&&P.length===0);){let ve=P.length;if(O("maybeReadMore read 0"),k.read(0),ve===P.length)break}P.readingMore=!1}te.prototype._read=function(k){throw new R("_read()")},te.prototype.pipe=function(k,P){let ve=this,ke=this._readableState;ke.pipes.length===1&&(ke.multiAwaitDrain||(ke.multiAwaitDrain=!0,ke.awaitDrainWriters=new d(ke.awaitDrainWriters?[ke.awaitDrainWriters]:[]))),ke.pipes.push(k),O("pipe count=%d opts=%j",ke.pipes.length,P);let xe=(!P||P.end!==!1)&&k!==o.stdout&&k!==o.stderr?pt:fr;ke.endEmitted?o.nextTick(xe):ve.once("end",xe),k.on("unpipe",rt);function rt(zt,Et){O("onunpipe"),zt===ve&&Et&&Et.hasUnpiped===!1&&(Et.hasUnpiped=!0,Aa())}function pt(){O("onend"),k.end()}let qt,Zi=!1;function Aa(){O("cleanup"),k.removeListener("close",Jr),k.removeListener("finish",Xr),qt&&k.removeListener("drain",qt),k.removeListener("error",Zr),k.removeListener("unpipe",rt),ve.removeListener("end",pt),ve.removeListener("end",fr),ve.removeListener("data",Xi),Zi=!0,qt&&ke.awaitDrainWriters&&(!k._writableState||k._writableState.needDrain)&&qt()}function Ji(){Zi||(ke.pipes.length===1&&ke.pipes[0]===k?(O("false write response, pause",0),ke.awaitDrainWriters=k,ke.multiAwaitDrain=!1):ke.pipes.length>1&&ke.pipes.includes(k)&&(O("false write response, pause",ke.awaitDrainWriters.size),ke.awaitDrainWriters.add(k)),ve.pause()),qt||(qt=Ie(ve,k),k.on("drain",qt))}ve.on("data",Xi);function Xi(zt){O("ondata");let Et=k.write(zt);O("dest.write",Et),Et===!1&&Ji()}function Zr(zt){if(O("onerror",zt),fr(),k.removeListener("error",Zr),k.listenerCount("error")===0){let Et=k._writableState||k._readableState;Et&&!Et.errorEmitted?I(k,zt):k.emit("error",zt)}}A(k,"error",Zr);function Jr(){k.removeListener("finish",Xr),fr()}k.once("close",Jr);function Xr(){O("onfinish"),k.removeListener("close",Jr),fr()}k.once("finish",Xr);function fr(){O("unpipe"),ve.unpipe(k)}return k.emit("pipe",ve),k.writableNeedDrain===!0?Ji():ke.flowing||(O("pipe resume"),ve.resume()),k};function Ie(k,P){return function(){let ve=k._readableState;ve.awaitDrainWriters===P?(O("pipeOnDrain",1),ve.awaitDrainWriters=null):ve.multiAwaitDrain&&(O("pipeOnDrain",ve.awaitDrainWriters.size),ve.awaitDrainWriters.delete(P)),(!ve.awaitDrainWriters||ve.awaitDrainWriters.size===0)&&k.listenerCount("data")&&k.resume()}}te.prototype.unpipe=function(k){let P=this._readableState,ve={hasUnpiped:!1};if(P.pipes.length===0)return this;if(!k){let xe=P.pipes;P.pipes=[],this.pause();for(let rt=0;rt<xe.length;rt++)xe[rt].emit("unpipe",this,{hasUnpiped:!1});return this}let ke=l(P.pipes,k);return ke===-1?this:(P.pipes.splice(ke,1),P.pipes.length===0&&this.pause(),k.emit("unpipe",this,ve),this)},te.prototype.on=function(k,P){let ve=_.prototype.on.call(this,k,P),ke=this._readableState;return k==="data"?(ke.readableListening=this.listenerCount("readable")>0,ke.flowing!==!1&&this.resume()):k==="readable"&&!ke.endEmitted&&!ke.readableListening&&(ke.readableListening=ke.needReadable=!0,ke.flowing=!1,ke.emittedReadable=!1,O("on readable",ke.length,ke.reading),ke.length?N(this):ke.reading||o.nextTick(Re,this)),ve},te.prototype.addListener=te.prototype.on,te.prototype.removeListener=function(k,P){let ve=_.prototype.removeListener.call(this,k,P);return k==="readable"&&o.nextTick(je,this),ve},te.prototype.off=te.prototype.removeListener,te.prototype.removeAllListeners=function(k){let P=_.prototype.removeAllListeners.apply(this,arguments);return(k==="readable"||k===void 0)&&o.nextTick(je,this),P};function je(k){let P=k._readableState;P.readableListening=k.listenerCount("readable")>0,P.resumeScheduled&&P[le]===!1?P.flowing=!0:k.listenerCount("data")>0?k.resume():P.readableListening||(P.flowing=null)}function Re(k){O("readable nexttick read 0"),k.read(0)}te.prototype.resume=function(){let k=this._readableState;return k.flowing||(O("resume"),k.flowing=!k.readableListening,yt(this,k)),k[le]=!1,this};function yt(k,P){P.resumeScheduled||(P.resumeScheduled=!0,o.nextTick(ut,k,P))}function ut(k,P){O("resume",P.reading),P.reading||k.read(0),P.resumeScheduled=!1,k.emit("resume"),ct(k),P.flowing&&!P.reading&&k.read(0)}te.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[le]=!0,this};function ct(k){let P=k._readableState;for(O("flow",P.flowing);P.flowing&&k.read()!==null;);}te.prototype.wrap=function(k){let P=!1;k.on("data",ke=>{!this.push(ke)&&k.pause&&(P=!0,k.pause())}),k.on("end",()=>{this.push(null)}),k.on("error",ke=>{I(this,ke)}),k.on("close",()=>{this.destroy()}),k.on("destroy",()=>{this.destroy()}),this._read=()=>{P&&k.resume&&(P=!1,k.resume())};let ve=t(k);for(let ke=1;ke<ve.length;ke++){let xe=ve[ke];this[xe]===void 0&&typeof k[xe]=="function"&&(this[xe]=k[xe].bind(k))}return this},te.prototype[m]=function(){return $e(this)},te.prototype.iterator=function(k){return k!==void 0&&ce(k,"options"),$e(this,k)};function $e(k,P){typeof k.read!="function"&&(k=te.wrap(k,{objectMode:!0}));let ve=Ze(k,P);return ve.stream=k,ve}async function*Ze(k,P){let ve=se;function ke(pt){this===k?(ve(),ve=se):ve=pt}k.on("readable",ke);let xe,rt=L(k,{writable:!1},pt=>{xe=pt?X(xe,pt):null,ve(),ve=se});try{for(;;){let pt=k.destroyed?null:k.read();if(pt!==null)yield pt;else{if(xe)throw xe;if(xe===null)return;await new u(ke)}}}catch(pt){throw xe=X(xe,pt),xe}finally{(xe||(P==null?void 0:P.destroyOnReturn)!==!1)&&(xe===void 0||k._readableState.autoDestroy)?C.destroyer(k,null):(k.off("readable",ke),rt())}}n(te.prototype,{readable:{__proto__:null,get(){let k=this._readableState;return!!k&&k.readable!==!1&&!k.destroyed&&!k.errorEmitted&&!k.endEmitted},set(k){this._readableState&&(this._readableState.readable=!!k)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(k){this._readableState&&(this._readableState.flowing=k)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(k){this._readableState&&(this._readableState.destroyed=k)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),n(_e.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[le]!==!1},set(k){this[le]=!!k}}}),te._fromList=Pe;function Pe(k,P){if(P.length===0)return null;let ve;return P.objectMode?ve=P.buffer.shift():!k||k>=P.length?(P.decoder?ve=P.buffer.join(""):P.buffer.length===1?ve=P.buffer.first():ve=P.buffer.concat(P.length),P.buffer.clear()):ve=P.buffer.consume(k,P.decoder),ve}function Fe(k){let P=k._readableState;O("endReadable",P.endEmitted),P.endEmitted||(P.ended=!0,o.nextTick(tt,P,k))}function tt(k,P){if(O("endReadableNT",k.endEmitted,k.length),!k.errored&&!k.closeEmitted&&!k.endEmitted&&k.length===0){if(k.endEmitted=!0,P.emit("end"),P.writable&&P.allowHalfOpen===!1)o.nextTick(Qe,P);else if(k.autoDestroy){let ve=P._writableState;(!ve||ve.autoDestroy&&(ve.finished||ve.writable===!1))&&P.destroy()}}}function Qe(k){k.writable&&!k.writableEnded&&!k.destroyed&&k.end()}te.from=function(k,P){return $(te,k,P)};var ot;function Mt(){return ot===void 0&&(ot={}),ot}te.fromWeb=function(k,P){return Mt().newStreamReadableFromReadableStream(k,P)},te.toWeb=function(k,P){return Mt().newReadableStreamFromStreamReadable(k,P)},te.wrap=function(k,P){var ve,ke;return new te({objectMode:(ve=(ke=k.readableObjectMode)!==null&&ke!==void 0?ke:k.objectMode)!==null&&ve!==void 0?ve:!0,...P,destroy(xe,rt){C.destroyer(k,xe),rt(xe)}}).wrap(k)}}),zi=ye((r,a)=>{pe(),me(),ge();var o=ir(),{ArrayPrototypeSlice:l,Error:c,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:e,ObjectDefineProperties:n,ObjectSetPrototypeOf:t,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:d}=Ge();a.exports=ce,ce.WritableState=W;var{EventEmitter:p}=(nr(),De(Vt)),m=qi().Stream,{Buffer:b}=(et(),De(Xe)),w=hr(),{addAbortSignal:_}=zr(),{getHighWaterMark:A,getDefaultHighWaterMark:y}=Gr(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:L,ERR_MULTIPLE_CALLBACK:O,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:j,ERR_STREAM_NULL_VALUES:Q,ERR_STREAM_WRITE_AFTER_END:X,ERR_UNKNOWN_ENCODING:ae}=lt().codes,{errorOrDestroy:R}=w;t(ce.prototype,m.prototype),t(ce,m);function K(){}var J=u("kOnFinished");function W(B,U,Z){typeof Z!="boolean"&&(Z=U instanceof Tt()),this.objectMode=!!(B&&B.objectMode),Z&&(this.objectMode=this.objectMode||!!(B&&B.writableObjectMode)),this.highWaterMark=B?A(this,B,"writableHighWaterMark",Z):y(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let oe=!!(B&&B.decodeStrings===!1);this.decodeStrings=!oe,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=I.bind(void 0,U),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,be(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!B||B.emitClose!==!1,this.autoDestroy=!B||B.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J]=[]}function be(B){B.buffered=[],B.bufferedIndex=0,B.allBuffers=!0,B.allNoop=!0}W.prototype.getBuffer=function(){return l(this.buffered,this.bufferedIndex)},e(W.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ce(B){let U=this instanceof Tt();if(!U&&!i(ce,this))return new ce(B);this._writableState=new W(B,this,U),B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&_(B.signal,this)),m.call(this,B),w.construct(this,()=>{let Z=this._writableState;Z.writing||Ce(this,Z),V(this,Z)})}e(ce,d,{__proto__:null,value:function(B){return i(this,B)?!0:this!==ce?!1:B&&B._writableState instanceof W}}),ce.prototype.pipe=function(){R(this,new S)};function le(B,U,Z,oe){let ne=B._writableState;if(typeof Z=="function")oe=Z,Z=ne.defaultEncoding;else{if(!Z)Z=ne.defaultEncoding;else if(Z!=="buffer"&&!b.isEncoding(Z))throw new ae(Z);typeof oe!="function"&&(oe=K)}if(U===null)throw new Q;if(!ne.objectMode)if(typeof U=="string")ne.decodeStrings!==!1&&(U=b.from(U,Z),Z="buffer");else if(U instanceof b)Z="buffer";else if(m._isUint8Array(U))U=m._uint8ArrayToBuffer(U),Z="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],U);let fe;return ne.ending?fe=new X:ne.destroyed&&(fe=new C("write")),fe?(o.nextTick(oe,fe),R(B,fe,!0),fe):(ne.pendingcb++,de(B,ne,U,Z,oe))}ce.prototype.write=function(B,U,Z){return le(this,B,U,Z)===!0},ce.prototype.cork=function(){this._writableState.corked++},ce.prototype.uncork=function(){let B=this._writableState;B.corked&&(B.corked--,B.writing||Ce(this,B))},ce.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=s(B)),!b.isEncoding(B))throw new ae(B);return this._writableState.defaultEncoding=B,this};function de(B,U,Z,oe,ne){let fe=U.objectMode?1:Z.length;U.length+=fe;let D=U.length<U.highWaterMark;return D||(U.needDrain=!0),U.writing||U.corked||U.errored||!U.constructed?(U.buffered.push({chunk:Z,encoding:oe,callback:ne}),U.allBuffers&&oe!=="buffer"&&(U.allBuffers=!1),U.allNoop&&ne!==K&&(U.allNoop=!1)):(U.writelen=fe,U.writecb=ne,U.writing=!0,U.sync=!0,B._write(Z,oe,U.onwrite),U.sync=!1),D&&!U.errored&&!U.destroyed}function $(B,U,Z,oe,ne,fe,D){U.writelen=oe,U.writecb=D,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new C("write")):Z?B._writev(ne,U.onwrite):B._write(ne,fe,U.onwrite),U.sync=!1}function se(B,U,Z,oe){--U.pendingcb,oe(Z),F(U),R(B,Z)}function I(B,U){let Z=B._writableState,oe=Z.sync,ne=Z.writecb;if(typeof ne!="function"){R(B,new O);return}Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0,U?(U.stack,Z.errored||(Z.errored=U),B._readableState&&!B._readableState.errored&&(B._readableState.errored=U),oe?o.nextTick(se,B,Z,U,ne):se(B,Z,U,ne)):(Z.buffered.length>Z.bufferedIndex&&Ce(B,Z),oe?Z.afterWriteTickInfo!==null&&Z.afterWriteTickInfo.cb===ne?Z.afterWriteTickInfo.count++:(Z.afterWriteTickInfo={count:1,cb:ne,stream:B,state:Z},o.nextTick(re,Z.afterWriteTickInfo)):we(B,Z,1,ne))}function re({stream:B,state:U,count:Z,cb:oe}){return U.afterWriteTickInfo=null,we(B,U,Z,oe)}function we(B,U,Z,oe){for(!U.ending&&!B.destroyed&&U.length===0&&U.needDrain&&(U.needDrain=!1,B.emit("drain"));Z-- >0;)U.pendingcb--,oe();U.destroyed&&F(U),V(B,U)}function F(B){if(B.writing)return;for(let ne=B.bufferedIndex;ne<B.buffered.length;++ne){var U;let{chunk:fe,callback:D}=B.buffered[ne],ue=B.objectMode?1:fe.length;B.length-=ue,D((U=B.errored)!==null&&U!==void 0?U:new C("write"))}let Z=B[J].splice(0);for(let ne=0;ne<Z.length;ne++){var oe;Z[ne]((oe=B.errored)!==null&&oe!==void 0?oe:new C("end"))}be(B)}function Ce(B,U){if(U.corked||U.bufferProcessing||U.destroyed||!U.constructed)return;let{buffered:Z,bufferedIndex:oe,objectMode:ne}=U,fe=Z.length-oe;if(!fe)return;let D=oe;if(U.bufferProcessing=!0,fe>1&&B._writev){U.pendingcb-=fe-1;let ue=U.allNoop?K:te=>{for(let Oe=D;Oe<Z.length;++Oe)Z[Oe].callback(te)},_e=U.allNoop&&D===0?Z:l(Z,D);_e.allBuffers=U.allBuffers,$(B,U,!0,U.length,_e,"",ue),be(U)}else{do{let{chunk:ue,encoding:_e,callback:te}=Z[D];Z[D++]=null;let Oe=ne?1:ue.length;$(B,U,!1,Oe,ue,_e,te)}while(D<Z.length&&!U.writing);D===Z.length?be(U):D>256?(Z.splice(0,D),U.bufferedIndex=0):U.bufferedIndex=D}U.bufferProcessing=!1}ce.prototype._write=function(B,U,Z){if(this._writev)this._writev([{chunk:B,encoding:U}],Z);else throw new L("_write()")},ce.prototype._writev=null,ce.prototype.end=function(B,U,Z){let oe=this._writableState;typeof B=="function"?(Z=B,B=null,U=null):typeof U=="function"&&(Z=U,U=null);let ne;if(B!=null){let fe=le(this,B,U);fe instanceof c&&(ne=fe)}return oe.corked&&(oe.corked=1,this.uncork()),ne||(!oe.errored&&!oe.ending?(oe.ending=!0,V(this,oe,!0),oe.ended=!0):oe.finished?ne=new j("end"):oe.destroyed&&(ne=new C("end"))),typeof Z=="function"&&(ne||oe.finished?o.nextTick(Z,ne):oe[J].push(Z)),this};function G(B){return B.ending&&!B.destroyed&&B.constructed&&B.length===0&&!B.errored&&B.buffered.length===0&&!B.finished&&!B.writing&&!B.errorEmitted&&!B.closeEmitted}function M(B,U){let Z=!1;function oe(ne){if(Z){R(B,ne??O());return}if(Z=!0,U.pendingcb--,ne){let fe=U[J].splice(0);for(let D=0;D<fe.length;D++)fe[D](ne);R(B,ne,U.sync)}else G(U)&&(U.prefinished=!0,B.emit("prefinish"),U.pendingcb++,o.nextTick(H,B,U))}U.sync=!0,U.pendingcb++;try{B._final(oe)}catch(ne){oe(ne)}U.sync=!1}function ee(B,U){!U.prefinished&&!U.finalCalled&&(typeof B._final=="function"&&!U.destroyed?(U.finalCalled=!0,M(B,U)):(U.prefinished=!0,B.emit("prefinish")))}function V(B,U,Z){G(U)&&(ee(B,U),U.pendingcb===0&&(Z?(U.pendingcb++,o.nextTick((oe,ne)=>{G(ne)?H(oe,ne):ne.pendingcb--},B,U)):G(U)&&(U.pendingcb++,H(B,U))))}function H(B,U){U.pendingcb--,U.finished=!0;let Z=U[J].splice(0);for(let oe=0;oe<Z.length;oe++)Z[oe]();if(B.emit("finish"),U.autoDestroy){let oe=B._readableState;(!oe||oe.autoDestroy&&(oe.endEmitted||oe.readable===!1))&&B.destroy()}}n(ce.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(B){this._writableState&&(this._writableState.destroyed=B)}},writable:{__proto__:null,get(){let B=this._writableState;return!!B&&B.writable!==!1&&!B.destroyed&&!B.errored&&!B.ending&&!B.ended},set(B){this._writableState&&(this._writableState.writable=!!B)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let B=this._writableState;return B?!B.destroyed&&!B.ending&&B.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var z=w.destroy;ce.prototype.destroy=function(B,U){let Z=this._writableState;return!Z.destroyed&&(Z.bufferedIndex<Z.buffered.length||Z[J].length)&&o.nextTick(F,Z),z.call(this,B,U),this},ce.prototype._undestroy=w.undestroy,ce.prototype._destroy=function(B,U){U(B)},ce.prototype[p.captureRejectionSymbol]=function(B){this.destroy(B)};var he;function ie(){return he===void 0&&(he={}),he}ce.fromWeb=function(B,U){return ie().newStreamWritableFromWritableStream(B,U)},ce.toWeb=function(B){return ie().newWritableStreamFromStreamWritable(B)}}),bu=ye((r,a)=>{pe(),me(),ge();var o=ir(),l=(et(),De(Xe)),{isReadable:c,isWritable:i,isIterable:e,isNodeStream:n,isReadableNodeStream:t,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:d,isWritableStream:p}=Pt(),m=Ht(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:w,ERR_INVALID_RETURN_VALUE:_}}=lt(),{destroyer:A}=hr(),y=Tt(),v=Yr(),L=zi(),{createDeferredPromise:O}=ht(),S=ps(),C=globalThis.Blob||l.Blob,j=typeof C<"u"?function(J){return J instanceof C}:function(J){return!1},Q=globalThis.AbortController||_r().AbortController,{FunctionPrototypeCall:X}=Ge(),ae=class extends y{constructor(J){super(J),(J==null?void 0:J.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(J==null?void 0:J.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};a.exports=function J(W,be){if(u(W))return W;if(t(W))return K({readable:W});if(s(W))return K({writable:W});if(n(W))return K({writable:!1,readable:!1});if(d(W))return K({readable:v.fromWeb(W)});if(p(W))return K({writable:L.fromWeb(W)});if(typeof W=="function"){let{value:le,write:de,final:$,destroy:se}=R(W);if(e(le))return S(ae,le,{objectMode:!0,write:de,final:$,destroy:se});let I=le==null?void 0:le.then;if(typeof I=="function"){let re,we=X(I,le,F=>{if(F!=null)throw new _("nully","body",F)},F=>{A(re,F)});return re=new ae({objectMode:!0,readable:!1,write:de,final(F){$(async()=>{try{await we,o.nextTick(F,null)}catch(Ce){o.nextTick(F,Ce)}})},destroy:se})}throw new _("Iterable, AsyncIterable or AsyncFunction",be,le)}if(j(W))return J(W.arrayBuffer());if(e(W))return S(ae,W,{objectMode:!0,writable:!1});if(d(W==null?void 0:W.readable)&&p(W==null?void 0:W.writable))return ae.fromWeb(W);if(typeof(W==null?void 0:W.writable)=="object"||typeof(W==null?void 0:W.readable)=="object"){let le=W!=null&&W.readable?t(W==null?void 0:W.readable)?W==null?void 0:W.readable:J(W.readable):void 0,de=W!=null&&W.writable?s(W==null?void 0:W.writable)?W==null?void 0:W.writable:J(W.writable):void 0;return K({readable:le,writable:de})}let ce=W==null?void 0:W.then;if(typeof ce=="function"){let le;return X(ce,W,de=>{de!=null&&le.push(de),le.push(null)},de=>{A(le,de)}),le=new ae({objectMode:!0,writable:!1,read(){}})}throw new w(be,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],W)};function R(J){let{promise:W,resolve:be}=O(),ce=new Q,le=ce.signal;return{value:J(async function*(){for(;;){let de=W;W=null;let{chunk:$,done:se,cb:I}=await de;if(o.nextTick(I),se)return;if(le.aborted)throw new b(void 0,{cause:le.reason});({promise:W,resolve:be}=O()),yield $}}(),{signal:le}),write(de,$,se){let I=be;be=null,I({chunk:de,done:!1,cb:se})},final(de){let $=be;be=null,$({done:!0,cb:de})},destroy(de,$){ce.abort(),$(de)}}}function K(J){let W=J.readable&&typeof J.readable.read!="function"?v.wrap(J.readable):J.readable,be=J.writable,ce=!!c(W),le=!!i(be),de,$,se,I,re;function we(F){let Ce=I;I=null,Ce?Ce(F):F&&re.destroy(F)}return re=new ae({readableObjectMode:!!(W!=null&&W.readableObjectMode),writableObjectMode:!!(be!=null&&be.writableObjectMode),readable:ce,writable:le}),le&&(m(be,F=>{le=!1,F&&A(W,F),we(F)}),re._write=function(F,Ce,G){be.write(F,Ce)?G():de=G},re._final=function(F){be.end(),$=F},be.on("drain",function(){if(de){let F=de;de=null,F()}}),be.on("finish",function(){if($){let F=$;$=null,F()}})),ce&&(m(W,F=>{ce=!1,F&&A(W,F),we(F)}),W.on("readable",function(){if(se){let F=se;se=null,F()}}),W.on("end",function(){re.push(null)}),re._read=function(){for(;;){let F=W.read();if(F===null){se=re._read;return}if(!re.push(F))return}}),re._destroy=function(F,Ce){!F&&I!==null&&(F=new b),se=null,de=null,$=null,I===null?Ce(F):(I=Ce,A(be,F),A(W,F))},re}}),Tt=ye((r,a)=>{pe(),me(),ge();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:l,ObjectKeys:c,ObjectSetPrototypeOf:i}=Ge();a.exports=t;var e=Yr(),n=zi();i(t.prototype,e.prototype),i(t,e);{let p=c(n.prototype);for(let m=0;m<p.length;m++){let b=p[m];t.prototype[b]||(t.prototype[b]=n.prototype[b])}}function t(p){if(!(this instanceof t))return new t(p);e.call(this,p),n.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(t.prototype,{writable:{__proto__:null,...l(n.prototype,"writable")},writableHighWaterMark:{__proto__:null,...l(n.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...l(n.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...l(n.prototype,"writableBuffer")},writableLength:{__proto__:null,...l(n.prototype,"writableLength")},writableFinished:{__proto__:null,...l(n.prototype,"writableFinished")},writableCorked:{__proto__:null,...l(n.prototype,"writableCorked")},writableEnded:{__proto__:null,...l(n.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...l(n.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var s;function u(){return s===void 0&&(s={}),s}t.fromWeb=function(p,m){return u().newStreamDuplexFromReadableWritablePair(p,m)},t.toWeb=function(p){return u().newReadableWritablePairFromDuplex(p)};var d;t.from=function(p){return d||(d=bu()),d(p,"body")}}),gs=ye((r,a)=>{pe(),me(),ge();var{ObjectSetPrototypeOf:o,Symbol:l}=Ge();a.exports=t;var{ERR_METHOD_NOT_IMPLEMENTED:c}=lt().codes,i=Tt(),{getHighWaterMark:e}=Gr();o(t.prototype,i.prototype),o(t,i);var n=l("kCallback");function t(d){if(!(this instanceof t))return new t(d);let p=d?e(this,d,"readableHighWaterMark",!0):null;p===0&&(d={...d,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:d.writableHighWaterMark||0}),i.call(this,d),this._readableState.sync=!1,this[n]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",u)}function s(d){typeof this._flush=="function"&&!this.destroyed?this._flush((p,m)=>{if(p){d?d(p):this.destroy(p);return}m!=null&&this.push(m),this.push(null),d&&d()}):(this.push(null),d&&d())}function u(){this._final!==s&&s.call(this)}t.prototype._final=s,t.prototype._transform=function(d,p,m){throw new c("_transform()")},t.prototype._write=function(d,p,m){let b=this._readableState,w=this._writableState,_=b.length;this._transform(d,p,(A,y)=>{if(A){m(A);return}y!=null&&this.push(y),w.ended||_===b.length||b.length<b.highWaterMark?m():this[n]=m})},t.prototype._read=function(){if(this[n]){let d=this[n];this[n]=null,d()}}}),ms=ye((r,a)=>{pe(),me(),ge();var{ObjectSetPrototypeOf:o}=Ge();a.exports=c;var l=gs();o(c.prototype,l.prototype),o(c,l);function c(i){if(!(this instanceof c))return new c(i);l.call(this,i)}c.prototype._transform=function(i,e,n){n(null,i)}}),Gi=ye((r,a)=>{pe(),me(),ge();var o=ir(),{ArrayIsArray:l,Promise:c,SymbolAsyncIterator:i,SymbolDispose:e}=Ge(),n=Ht(),{once:t}=ht(),s=hr(),u=Tt(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:w,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:A}=lt(),{validateFunction:y,validateAbortSignal:v}=Er(),{isIterable:L,isReadable:O,isReadableNodeStream:S,isNodeStream:C,isTransformStream:j,isWebStream:Q,isReadableStream:X,isReadableFinished:ae}=Pt(),R=globalThis.AbortController||_r().AbortController,K,J,W;function be(F,Ce,G){let M=!1;F.on("close",()=>{M=!0});let ee=n(F,{readable:Ce,writable:G},V=>{M=!V});return{destroy:V=>{M||(M=!0,s.destroyer(F,V||new w("pipe")))},cleanup:ee}}function ce(F){return y(F[F.length-1],"streams[stream.length - 1]"),F.pop()}function le(F){if(L(F))return F;if(S(F))return de(F);throw new p("val",["Readable","Iterable","AsyncIterable"],F)}async function*de(F){J||(J=Yr()),yield*J.prototype[i].call(F)}async function $(F,Ce,G,{end:M}){let ee,V=null,H=ie=>{if(ie&&(ee=ie),V){let B=V;V=null,B()}},z=()=>new c((ie,B)=>{ee?B(ee):V=()=>{ee?B(ee):ie()}});Ce.on("drain",H);let he=n(Ce,{readable:!1},H);try{Ce.writableNeedDrain&&await z();for await(let ie of F)Ce.write(ie)||await z();M&&(Ce.end(),await z()),G()}catch(ie){G(ee!==ie?d(ee,ie):ie)}finally{he(),Ce.off("drain",H)}}async function se(F,Ce,G,{end:M}){j(Ce)&&(Ce=Ce.writable);let ee=Ce.getWriter();try{for await(let V of F)await ee.ready,ee.write(V).catch(()=>{});await ee.ready,M&&await ee.close(),G()}catch(V){try{await ee.abort(V),G(V)}catch(H){G(H)}}}function I(...F){return re(F,t(ce(F)))}function re(F,Ce,G){if(F.length===1&&l(F[0])&&(F=F[0]),F.length<2)throw new b("streams");let M=new R,ee=M.signal,V=G==null?void 0:G.signal,H=[];v(V,"options.signal");function z(){ne(new A)}W=W||ht().addAbortListener;let he;V&&(he=W(V,z));let ie,B,U=[],Z=0;function oe(_e){ne(_e,--Z===0)}function ne(_e,te){var Oe;if(_e&&(!ie||ie.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ie=_e),!(!ie&&!te)){for(;U.length;)U.shift()(ie);(Oe=he)===null||Oe===void 0||Oe[e](),M.abort(),te&&(ie||H.forEach(h=>h()),o.nextTick(Ce,ie,B))}}let fe;for(let _e=0;_e<F.length;_e++){let te=F[_e],Oe=_e<F.length-1,h=_e>0,f=Oe||(G==null?void 0:G.end)!==!1,g=_e===F.length-1;if(C(te)){let E=function(x){x&&x.name!=="AbortError"&&x.code!=="ERR_STREAM_PREMATURE_CLOSE"&&oe(x)};if(f){let{destroy:x,cleanup:N}=be(te,Oe,h);U.push(x),O(te)&&g&&H.push(N)}te.on("error",E),O(te)&&g&&H.push(()=>{te.removeListener("error",E)})}if(_e===0)if(typeof te=="function"){if(fe=te({signal:ee}),!L(fe))throw new m("Iterable, AsyncIterable or Stream","source",fe)}else L(te)||S(te)||j(te)?fe=te:fe=u.from(te);else if(typeof te=="function"){if(j(fe)){var D;fe=le((D=fe)===null||D===void 0?void 0:D.readable)}else fe=le(fe);if(fe=te(fe,{signal:ee}),Oe){if(!L(fe,!0))throw new m("AsyncIterable",`transform[${_e-1}]`,fe)}else{var ue;K||(K=ms());let E=new K({objectMode:!0}),x=(ue=fe)===null||ue===void 0?void 0:ue.then;if(typeof x=="function")Z++,x.call(fe,Ee=>{B=Ee,Ee!=null&&E.write(Ee),f&&E.end(),o.nextTick(oe)},Ee=>{E.destroy(Ee),o.nextTick(oe,Ee)});else if(L(fe,!0))Z++,$(fe,E,oe,{end:f});else if(X(fe)||j(fe)){let Ee=fe.readable||fe;Z++,$(Ee,E,oe,{end:f})}else throw new m("AsyncIterable or Promise","destination",fe);fe=E;let{destroy:N,cleanup:Y}=be(fe,!1,!0);U.push(N),g&&H.push(Y)}}else if(C(te)){if(S(fe)){Z+=2;let E=we(fe,te,oe,{end:f});O(te)&&g&&H.push(E)}else if(j(fe)||X(fe)){let E=fe.readable||fe;Z++,$(E,te,oe,{end:f})}else if(L(fe))Z++,$(fe,te,oe,{end:f});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],fe);fe=te}else if(Q(te)){if(S(fe))Z++,se(le(fe),te,oe,{end:f});else if(X(fe)||L(fe))Z++,se(fe,te,oe,{end:f});else if(j(fe))Z++,se(fe.readable,te,oe,{end:f});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],fe);fe=te}else fe=u.from(te)}return(ee!=null&&ee.aborted||V!=null&&V.aborted)&&o.nextTick(z),fe}function we(F,Ce,G,{end:M}){let ee=!1;if(Ce.on("close",()=>{ee||G(new _)}),F.pipe(Ce,{end:!1}),M){let V=function(){ee=!0,Ce.end()};ae(F)?o.nextTick(V):F.once("end",V)}else G();return n(F,{readable:!0,writable:!1},V=>{let H=F._readableState;V&&V.code==="ERR_STREAM_PREMATURE_CLOSE"&&H&&H.ended&&!H.errored&&!H.errorEmitted?F.once("end",G).once("error",G):G(V)}),n(Ce,{readable:!1,writable:!0},G)}a.exports={pipelineImpl:re,pipeline:I}}),bs=ye((r,a)=>{pe(),me(),ge();var{pipeline:o}=Gi(),l=Tt(),{destroyer:c}=hr(),{isNodeStream:i,isReadable:e,isWritable:n,isWebStream:t,isTransformStream:s,isWritableStream:u,isReadableStream:d}=Pt(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:b}}=lt(),w=Ht();a.exports=function(..._){if(_.length===0)throw new b("streams");if(_.length===1)return l.from(_[0]);let A=[..._];if(typeof _[0]=="function"&&(_[0]=l.from(_[0])),typeof _[_.length-1]=="function"){let R=_.length-1;_[R]=l.from(_[R])}for(let R=0;R<_.length;++R)if(!(!i(_[R])&&!t(_[R]))){if(R<_.length-1&&!(e(_[R])||d(_[R])||s(_[R])))throw new m(`streams[${R}]`,A[R],"must be readable");if(R>0&&!(n(_[R])||u(_[R])||s(_[R])))throw new m(`streams[${R}]`,A[R],"must be writable")}let y,v,L,O,S;function C(R){let K=O;O=null,K?K(R):R?S.destroy(R):!ae&&!X&&S.destroy()}let j=_[0],Q=o(_,C),X=!!(n(j)||u(j)||s(j)),ae=!!(e(Q)||d(Q)||s(Q));if(S=new l({writableObjectMode:!!(j!=null&&j.writableObjectMode),readableObjectMode:!!(Q!=null&&Q.readableObjectMode),writable:X,readable:ae}),X){if(i(j))S._write=function(K,J,W){j.write(K,J)?W():y=W},S._final=function(K){j.end(),v=K},j.on("drain",function(){if(y){let K=y;y=null,K()}});else if(t(j)){let K=(s(j)?j.writable:j).getWriter();S._write=async function(J,W,be){try{await K.ready,K.write(J).catch(()=>{}),be()}catch(ce){be(ce)}},S._final=async function(J){try{await K.ready,K.close().catch(()=>{}),v=J}catch(W){J(W)}}}let R=s(Q)?Q.readable:Q;w(R,()=>{if(v){let K=v;v=null,K()}})}if(ae){if(i(Q))Q.on("readable",function(){if(L){let R=L;L=null,R()}}),Q.on("end",function(){S.push(null)}),S._read=function(){for(;;){let R=Q.read();if(R===null){L=S._read;return}if(!S.push(R))return}};else if(t(Q)){let R=(s(Q)?Q.readable:Q).getReader();S._read=async function(){for(;;)try{let{value:K,done:J}=await R.read();if(!S.push(K))return;if(J){S.push(null);return}}catch{return}}}}return S._destroy=function(R,K){!R&&O!==null&&(R=new p),L=null,y=null,v=null,O===null?K(R):(O=K,i(Q)&&c(Q,R))},S}}),yu=ye((r,a)=>{pe(),me(),ge();var o=globalThis.AbortController||_r().AbortController,{codes:{ERR_INVALID_ARG_VALUE:l,ERR_INVALID_ARG_TYPE:c,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:e},AbortError:n}=lt(),{validateAbortSignal:t,validateInteger:s,validateObject:u}=Er(),d=Ge().Symbol("kWeak"),p=Ge().Symbol("kResistStopPropagation"),{finished:m}=Ht(),b=bs(),{addAbortSignalNoValidate:w}=zr(),{isWritable:_,isNodeStream:A}=Pt(),{deprecate:y}=ht(),{ArrayPrototypePush:v,Boolean:L,MathFloor:O,Number:S,NumberIsNaN:C,Promise:j,PromiseReject:Q,PromiseResolve:X,PromisePrototypeThen:ae,Symbol:R}=Ge(),K=R("kEmpty"),J=R("kEof");function W(V,H){if(H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal"),A(V)&&!_(V))throw new l("stream",V,"must be writable");let z=b(this,V);return H!=null&&H.signal&&w(H.signal,z),z}function be(V,H){if(typeof V!="function")throw new c("fn",["Function","AsyncFunction"],V);H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal");let z=1;(H==null?void 0:H.concurrency)!=null&&(z=O(H.concurrency));let he=z-1;return(H==null?void 0:H.highWaterMark)!=null&&(he=O(H.highWaterMark)),s(z,"options.concurrency",1),s(he,"options.highWaterMark",0),he+=z,(async function*(){let ie=ht().AbortSignalAny([H==null?void 0:H.signal].filter(L)),B=this,U=[],Z={signal:ie},oe,ne,fe=!1,D=0;function ue(){fe=!0,_e()}function _e(){D-=1,te()}function te(){ne&&!fe&&D<z&&U.length<he&&(ne(),ne=null)}async function Oe(){try{for await(let h of B){if(fe)return;if(ie.aborted)throw new n;try{if(h=V(h,Z),h===K)continue;h=X(h)}catch(f){h=Q(f)}D+=1,ae(h,_e,ue),U.push(h),oe&&(oe(),oe=null),!fe&&(U.length>=he||D>=z)&&await new j(f=>{ne=f})}U.push(J)}catch(h){let f=Q(h);ae(f,_e,ue),U.push(f)}finally{fe=!0,oe&&(oe(),oe=null)}}Oe();try{for(;;){for(;U.length>0;){let h=await U[0];if(h===J)return;if(ie.aborted)throw new n;h!==K&&(yield h),U.shift(),te()}await new j(h=>{oe=h})}}finally{fe=!0,ne&&(ne(),ne=null)}}).call(this)}function ce(V=void 0){return V!=null&&u(V,"options"),(V==null?void 0:V.signal)!=null&&t(V.signal,"options.signal"),(async function*(){let H=0;for await(let he of this){var z;if(V!=null&&(z=V.signal)!==null&&z!==void 0&&z.aborted)throw new n({cause:V.signal.reason});yield[H++,he]}}).call(this)}async function le(V,H=void 0){for await(let z of I.call(this,V,H))return!0;return!1}async function de(V,H=void 0){if(typeof V!="function")throw new c("fn",["Function","AsyncFunction"],V);return!await le.call(this,async(...z)=>!await V(...z),H)}async function $(V,H){for await(let z of I.call(this,V,H))return z}async function se(V,H){if(typeof V!="function")throw new c("fn",["Function","AsyncFunction"],V);async function z(he,ie){return await V(he,ie),K}for await(let he of be.call(this,z,H));}function I(V,H){if(typeof V!="function")throw new c("fn",["Function","AsyncFunction"],V);async function z(he,ie){return await V(he,ie)?he:K}return be.call(this,z,H)}var re=class extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function we(V,H,z){var he;if(typeof V!="function")throw new c("reducer",["Function","AsyncFunction"],V);z!=null&&u(z,"options"),(z==null?void 0:z.signal)!=null&&t(z.signal,"options.signal");let ie=arguments.length>1;if(z!=null&&(he=z.signal)!==null&&he!==void 0&&he.aborted){let ne=new n(void 0,{cause:z.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(ne)),ne}let B=new o,U=B.signal;if(z!=null&&z.signal){let ne={once:!0,[d]:this,[p]:!0};z.signal.addEventListener("abort",()=>B.abort(),ne)}let Z=!1;try{for await(let ne of this){var oe;if(Z=!0,z!=null&&(oe=z.signal)!==null&&oe!==void 0&&oe.aborted)throw new n;ie?H=await V(H,ne,{signal:U}):(H=ne,ie=!0)}if(!Z&&!ie)throw new re}finally{B.abort()}return H}async function F(V){V!=null&&u(V,"options"),(V==null?void 0:V.signal)!=null&&t(V.signal,"options.signal");let H=[];for await(let he of this){var z;if(V!=null&&(z=V.signal)!==null&&z!==void 0&&z.aborted)throw new n(void 0,{cause:V.signal.reason});v(H,he)}return H}function Ce(V,H){let z=be.call(this,V,H);return(async function*(){for await(let he of z)yield*he}).call(this)}function G(V){if(V=S(V),C(V))return 0;if(V<0)throw new e("number",">= 0",V);return V}function M(V,H=void 0){return H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal"),V=G(V),(async function*(){var z;if(H!=null&&(z=H.signal)!==null&&z!==void 0&&z.aborted)throw new n;for await(let ie of this){var he;if(H!=null&&(he=H.signal)!==null&&he!==void 0&&he.aborted)throw new n;V--<=0&&(yield ie)}}).call(this)}function ee(V,H=void 0){return H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal"),V=G(V),(async function*(){var z;if(H!=null&&(z=H.signal)!==null&&z!==void 0&&z.aborted)throw new n;for await(let ie of this){var he;if(H!=null&&(he=H.signal)!==null&&he!==void 0&&he.aborted)throw new n;if(V-- >0&&(yield ie),V<=0)return}}).call(this)}a.exports.streamReturningOperators={asIndexedPairs:y(ce,"readable.asIndexedPairs will be removed in a future version."),drop:M,filter:I,flatMap:Ce,map:be,take:ee,compose:W},a.exports.promiseReturningOperators={every:de,forEach:se,reduce:we,toArray:F,some:le,find:$}}),ys=ye((r,a)=>{pe(),me(),ge();var{ArrayPrototypePop:o,Promise:l}=Ge(),{isIterable:c,isNodeStream:i,isWebStream:e}=Pt(),{pipelineImpl:n}=Gi(),{finished:t}=Ht();ws();function s(...u){return new l((d,p)=>{let m,b,w=u[u.length-1];if(w&&typeof w=="object"&&!i(w)&&!c(w)&&!e(w)){let _=o(u);m=_.signal,b=_.end}n(u,(_,A)=>{_?p(_):d(A)},{signal:m,end:b})})}a.exports={finished:t,pipeline:s}}),ws=ye((r,a)=>{pe(),me(),ge();var{Buffer:o}=(et(),De(Xe)),{ObjectDefineProperty:l,ObjectKeys:c,ReflectApply:i}=Ge(),{promisify:{custom:e}}=ht(),{streamReturningOperators:n,promiseReturningOperators:t}=yu(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=lt(),u=bs(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:p}=Gr(),{pipeline:m}=Gi(),{destroyer:b}=hr(),w=Ht(),_=ys(),A=Pt(),y=a.exports=qi().Stream;y.isDestroyed=A.isDestroyed,y.isDisturbed=A.isDisturbed,y.isErrored=A.isErrored,y.isReadable=A.isReadable,y.isWritable=A.isWritable,y.Readable=Yr();for(let L of c(n)){let O=function(...C){if(new.target)throw s();return y.Readable.from(i(S,this,C))},S=n[L];l(O,"name",{__proto__:null,value:S.name}),l(O,"length",{__proto__:null,value:S.length}),l(y.Readable.prototype,L,{__proto__:null,value:O,enumerable:!1,configurable:!0,writable:!0})}for(let L of c(t)){let O=function(...C){if(new.target)throw s();return i(S,this,C)},S=t[L];l(O,"name",{__proto__:null,value:S.name}),l(O,"length",{__proto__:null,value:S.length}),l(y.Readable.prototype,L,{__proto__:null,value:O,enumerable:!1,configurable:!0,writable:!0})}y.Writable=zi(),y.Duplex=Tt(),y.Transform=gs(),y.PassThrough=ms(),y.pipeline=m;var{addAbortSignal:v}=zr();y.addAbortSignal=v,y.finished=w,y.destroy=b,y.compose=u,y.setDefaultHighWaterMark=d,y.getDefaultHighWaterMark=p,l(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return _}}),l(m,e,{__proto__:null,enumerable:!0,get(){return _.pipeline}}),l(w,e,{__proto__:null,enumerable:!0,get(){return _.finished}}),y.Stream=y,y._isUint8Array=function(L){return L instanceof Uint8Array},y._uint8ArrayToBuffer=function(L){return o.from(L.buffer,L.byteOffset,L.byteLength)}}),or=ye((r,a)=>{pe(),me(),ge();var o=ws(),l=ys(),c=o.Readable.destroy;a.exports=o.Readable,a.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,a.exports._isUint8Array=o._isUint8Array,a.exports.isDisturbed=o.isDisturbed,a.exports.isErrored=o.isErrored,a.exports.isReadable=o.isReadable,a.exports.Readable=o.Readable,a.exports.Writable=o.Writable,a.exports.Duplex=o.Duplex,a.exports.Transform=o.Transform,a.exports.PassThrough=o.PassThrough,a.exports.addAbortSignal=o.addAbortSignal,a.exports.finished=o.finished,a.exports.destroy=o.destroy,a.exports.destroy=c,a.exports.pipeline=o.pipeline,a.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return l}}),a.exports.Stream=o.Stream,a.exports.default=a.exports}),wu=ye((r,a)=>{pe(),me(),ge(),typeof Object.create=="function"?a.exports=function(o,l){l&&(o.super_=l,o.prototype=Object.create(l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:a.exports=function(o,l){if(l){o.super_=l;var c=function(){};c.prototype=l.prototype,o.prototype=new c,o.prototype.constructor=o}}}),_u=ye((r,a)=>{pe(),me(),ge();var{Buffer:o}=(et(),De(Xe)),l=Symbol.for("BufferList");function c(i){if(!(this instanceof c))return new c(i);c._init.call(this,i)}c._init=function(i){Object.defineProperty(this,l,{value:!0}),this._bufs=[],this.length=0,i&&this.append(i)},c.prototype._new=function(i){return new c(i)},c.prototype._offset=function(i){if(i===0)return[0,0];let e=0;for(let n=0;n<this._bufs.length;n++){let t=e+this._bufs[n].length;if(i<t||n===this._bufs.length-1)return[n,i-e];e=t}},c.prototype._reverseOffset=function(i){let e=i[0],n=i[1];for(let t=0;t<e;t++)n+=this._bufs[t].length;return n},c.prototype.get=function(i){if(i>this.length||i<0)return;let e=this._offset(i);return this._bufs[e[0]][e[1]]},c.prototype.slice=function(i,e){return typeof i=="number"&&i<0&&(i+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,i,e)},c.prototype.copy=function(i,e,n,t){if((typeof n!="number"||n<0)&&(n=0),(typeof t!="number"||t>this.length)&&(t=this.length),n>=this.length||t<=0)return i||o.alloc(0);let s=!!i,u=this._offset(n),d=t-n,p=d,m=s&&e||0,b=u[1];if(n===0&&t===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let w=0;w<this._bufs.length;w++)this._bufs[w].copy(i,m),m+=this._bufs[w].length;return i}if(p<=this._bufs[u[0]].length-b)return s?this._bufs[u[0]].copy(i,e,b,b+p):this._bufs[u[0]].slice(b,b+p);s||(i=o.allocUnsafe(d));for(let w=u[0];w<this._bufs.length;w++){let _=this._bufs[w].length-b;if(p>_)this._bufs[w].copy(i,m,b),m+=_;else{this._bufs[w].copy(i,m,b,b+p),m+=_;break}p-=_,b&&(b=0)}return i.length>m?i.slice(0,m):i},c.prototype.shallowSlice=function(i,e){if(i=i||0,e=typeof e!="number"?this.length:e,i<0&&(i+=this.length),e<0&&(e+=this.length),i===e)return this._new();let n=this._offset(i),t=this._offset(e),s=this._bufs.slice(n[0],t[0]+1);return t[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,t[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)},c.prototype.toString=function(i,e,n){return this.slice(e,n).toString(i)},c.prototype.consume=function(i){if(i=Math.trunc(i),Number.isNaN(i)||i<=0)return this;for(;this._bufs.length;)if(i>=this._bufs[0].length)i-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(i),this.length-=i;break}return this},c.prototype.duplicate=function(){let i=this._new();for(let e=0;e<this._bufs.length;e++)i.append(this._bufs[e]);return i},c.prototype.append=function(i){if(i==null)return this;if(i.buffer)this._appendBuffer(o.from(i.buffer,i.byteOffset,i.byteLength));else if(Array.isArray(i))for(let e=0;e<i.length;e++)this.append(i[e]);else if(this._isBufferList(i))for(let e=0;e<i._bufs.length;e++)this.append(i._bufs[e]);else typeof i=="number"&&(i=i.toString()),this._appendBuffer(o.from(i));return this},c.prototype._appendBuffer=function(i){this._bufs.push(i),this.length+=i.length},c.prototype.indexOf=function(i,e,n){if(n===void 0&&typeof e=="string"&&(n=e,e=void 0),typeof i=="function"||Array.isArray(i))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof i=="number"?i=o.from([i]):typeof i=="string"?i=o.from(i,n):this._isBufferList(i)?i=i.slice():Array.isArray(i.buffer)?i=o.from(i.buffer,i.byteOffset,i.byteLength):o.isBuffer(i)||(i=o.from(i)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),i.length===0)return e>this.length?this.length:e;let t=this._offset(e),s=t[0],u=t[1];for(;s<this._bufs.length;s++){let d=this._bufs[s];for(;u<d.length;)if(d.length-u>=i.length){let p=d.indexOf(i,u);if(p!==-1)return this._reverseOffset([s,p]);u=d.length-i.length+1}else{let p=this._reverseOffset([s,u]);if(this._match(p,i))return p;u++}u=0}return-1},c.prototype._match=function(i,e){if(this.length-i<e.length)return!1;for(let n=0;n<e.length;n++)if(this.get(i+n)!==e[n])return!1;return!0},function(){let i={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in i)(function(n){i[n]===null?c.prototype[n]=function(t,s){return this.slice(t,t+s)[n](0,s)}:c.prototype[n]=function(t=0){return this.slice(t,t+i[n])[n](0)}})(e)}(),c.prototype._isBufferList=function(i){return i instanceof c||c.isBufferList(i)},c.isBufferList=function(i){return i!=null&&i[l]},a.exports=c}),vu=ye((r,a)=>{pe(),me(),ge();var o=or().Duplex,l=wu(),c=_u();function i(e){if(!(this instanceof i))return new i(e);if(typeof e=="function"){this._callback=e;let n=(function(t){this._callback&&(this._callback(t),this._callback=null)}).bind(this);this.on("pipe",function(t){t.on("error",n)}),this.on("unpipe",function(t){t.removeListener("error",n)}),e=null}c._init.call(this,e),o.call(this)}l(i,o),Object.assign(i.prototype,c.prototype),i.prototype._new=function(e){return new i(e)},i.prototype._write=function(e,n,t){this._appendBuffer(e),typeof t=="function"&&t()},i.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},i.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype._destroy=function(e,n){this._bufs.length=0,this.length=0,n(e)},i.prototype._isBufferList=function(e){return e instanceof i||e instanceof c||i.isBufferList(e)},i.isBufferList=c.isBufferList,a.exports=i,a.exports.BufferListStream=i,a.exports.BufferList=c}),Eu=ye((r,a)=>{pe(),me(),ge();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};a.exports=o}),_s=ye((r,a)=>{pe(),me(),ge();var o=a.exports,{Buffer:l}=(et(),De(Xe));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let i in o.requiredHeaderFlags){let e=o.requiredHeaderFlags[i];o.requiredHeaderFlagsErrors[i]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+o.types[i]+" packet"}o.codes={};for(let i in o.types){let e=o.types[i];o.codes[e]=i}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=l.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=l.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=l.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let i in o.properties){let e=o.properties[i];o.propertiesCodes[e]=i}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function c(i){return[0,1,2].map(e=>[0,1].map(n=>[0,1].map(t=>{let s=l.alloc(1);return s.writeUInt8(o.codes[i]<<o.CMD_SHIFT|(n?o.DUP_MASK:0)|e<<o.QOS_SHIFT|t,0,!0),s})))}o.PUBLISH_HEADER=c("publish"),o.SUBSCRIBE_HEADER=c("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=c("unsubscribe"),o.ACKS={unsuback:c("unsuback"),puback:c("puback"),pubcomp:c("pubcomp"),pubrel:c("pubrel"),pubrec:c("pubrec")},o.SUBACK_HEADER=l.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=l.from([3]),o.VERSION4=l.from([4]),o.VERSION5=l.from([5]),o.VERSION131=l.from([131]),o.VERSION132=l.from([132]),o.QOS=[0,1,2].map(i=>l.from([i])),o.EMPTY={pingreq:l.from([o.codes.pingreq<<4,0]),pingresp:l.from([o.codes.pingresp<<4,0]),disconnect:l.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Su=ye((r,a)=>{pe(),me(),ge();var o=1e3,l=o*60,c=l*60,i=c*24,e=i*7,n=i*365.25;a.exports=function(p,m){m=m||{};var b=typeof p;if(b==="string"&&p.length>0)return t(p);if(b==="number"&&isFinite(p))return m.long?u(p):s(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function t(p){if(p=String(p),!(p.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(m){var b=parseFloat(m[1]),w=(m[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return b*n;case"weeks":case"week":case"w":return b*e;case"days":case"day":case"d":return b*i;case"hours":case"hour":case"hrs":case"hr":case"h":return b*c;case"minutes":case"minute":case"mins":case"min":case"m":return b*l;case"seconds":case"second":case"secs":case"sec":case"s":return b*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function s(p){var m=Math.abs(p);return m>=i?Math.round(p/i)+"d":m>=c?Math.round(p/c)+"h":m>=l?Math.round(p/l)+"m":m>=o?Math.round(p/o)+"s":p+"ms"}function u(p){var m=Math.abs(p);return m>=i?d(p,m,i,"day"):m>=c?d(p,m,c,"hour"):m>=l?d(p,m,l,"minute"):m>=o?d(p,m,o,"second"):p+" ms"}function d(p,m,b,w){var _=m>=b*1.5;return Math.round(p/b)+" "+w+(_?"s":"")}}),ku=ye((r,a)=>{pe(),me(),ge();function o(l){i.debug=i,i.default=i,i.coerce=d,i.disable=s,i.enable=n,i.enabled=u,i.humanize=Su(),i.destroy=p,Object.keys(l).forEach(m=>{i[m]=l[m]}),i.names=[],i.skips=[],i.formatters={};function c(m){let b=0;for(let w=0;w<m.length;w++)b=(b<<5)-b+m.charCodeAt(w),b|=0;return i.colors[Math.abs(b)%i.colors.length]}i.selectColor=c;function i(m){let b,w=null,_,A;function y(...v){if(!y.enabled)return;let L=y,O=Number(new Date),S=O-(b||O);L.diff=S,L.prev=b,L.curr=O,b=O,v[0]=i.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let C=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(j,Q)=>{if(j==="%%")return"%";C++;let X=i.formatters[Q];if(typeof X=="function"){let ae=v[C];j=X.call(L,ae),v.splice(C,1),C--}return j}),i.formatArgs.call(L,v),(L.log||i.log).apply(L,v)}return y.namespace=m,y.useColors=i.useColors(),y.color=i.selectColor(m),y.extend=e,y.destroy=i.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(_!==i.namespaces&&(_=i.namespaces,A=i.enabled(m)),A),set:v=>{w=v}}),typeof i.init=="function"&&i.init(y),y}function e(m,b){let w=i(this.namespace+(typeof b>"u"?":":b)+m);return w.log=this.log,w}function n(m){i.save(m),i.namespaces=m,i.names=[],i.skips=[];let b=(typeof m=="string"?m:"").trim().replace(" ",",").split(",").filter(Boolean);for(let w of b)w[0]==="-"?i.skips.push(w.slice(1)):i.names.push(w)}function t(m,b){let w=0,_=0,A=-1,y=0;for(;w<m.length;)if(_<b.length&&(b[_]===m[w]||b[_]==="*"))b[_]==="*"?(A=_,y=w,_++):(w++,_++);else if(A!==-1)_=A+1,y++,w=y;else return!1;for(;_<b.length&&b[_]==="*";)_++;return _===b.length}function s(){let m=[...i.names,...i.skips.map(b=>"-"+b)].join(",");return i.enable(""),m}function u(m){for(let b of i.skips)if(t(m,b))return!1;for(let b of i.names)if(t(m,b))return!0;return!1}function d(m){return m instanceof Error?m.stack||m.message:m}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}a.exports=o}),Ot=ye((r,a)=>{pe(),me(),ge(),r.formatArgs=l,r.save=c,r.load=i,r.useColors=o,r.storage=e(),r.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;t.splice(1,0,s,"color: inherit");let u=0,d=0;t[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(u++,p==="%c"&&(d=u))}),t.splice(d,0,s)}r.log=console.debug||console.log||(()=>{});function c(t){try{t?r.storage.setItem("debug",t):r.storage.removeItem("debug")}catch{}}function i(){let t;try{t=r.storage.getItem("debug")}catch{}return!t&&typeof Le<"u"&&"env"in Le&&(t=Le.env.DEBUG),t}function e(){try{return localStorage}catch{}}a.exports=ku()(r);var{formatters:n}=a.exports;n.j=function(t){try{return JSON.stringify(t)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}),Au=ye((r,a)=>{pe(),me(),ge();var o=vu(),{EventEmitter:l}=(nr(),De(Vt)),c=Eu(),i=_s(),e=Ot()("mqtt-packet:parser"),n=class Ai extends l{constructor(){super(),this.parser=this.constructor.parser}static parser(s){return this instanceof Ai?(this.settings=s||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Ai().parser(s)}_resetState(){e("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new c,this.error=null,this._list=o(),this._stateCounter=0}parse(s){for(this.error&&this._resetState(),this._list.append(s),e("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,e("parse: state complete. _stateCounter is now: %d",this._stateCounter),e("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return e("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let s=this._list.readUInt8(0),u=s>>i.CMD_SHIFT;this.packet.cmd=i.types[u];let d=s&15,p=i.requiredHeaderFlags[u];return p!=null&&d!==p?this._emitError(new Error(i.requiredHeaderFlagsErrors[u])):(this.packet.retain=(s&i.RETAIN_MASK)!==0,this.packet.qos=s>>i.QOS_SHIFT&i.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(s&i.DUP_MASK)!==0,e("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let s=this._parseVarByteNum(!0);return s&&(this.packet.length=s.value,this._list.consume(s.bytes)),e("_parseLength %d",s.value),!!s}_parsePayload(){e("_parsePayload: payload %O",this._list);let s=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}s=!0}return e("_parsePayload complete result: %s",s),s}_parseConnect(){e("_parseConnect");let s,u,d,p,m={},b=this.packet,w=this._parseString();if(w===null)return this._emitError(new Error("Cannot parse protocolId"));if(w!=="MQTT"&&w!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=w,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&i.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&i.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&i.WILL_FLAG_MASK;let _=!!(this._list.readUInt8(this._pos)&i.WILL_RETAIN_MASK),A=(this._list.readUInt8(this._pos)&i.WILL_QOS_MASK)>>i.WILL_QOS_SHIFT;if(m.will)b.will={},b.will.retain=_,b.will.qos=A;else{if(_)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(A)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&i.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(b.properties=v)}let y=this._parseString();if(y===null)return this._emitError(new Error("Packet too short"));if(b.clientId=y,e("_parseConnect: packet.clientId: %s",b.clientId),m.will){if(b.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(b.will.properties=v)}if(s=this._parseString(),s===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=s,e("_parseConnect: packet.will.topic: %s",b.will.topic),u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=u,e("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(m.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));b.username=p,e("_parseConnect: packet.username: %s",b.username)}if(m.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));b.password=d}return this.settings=b,e("_parseConnect: complete"),b}_parseConnack(){e("_parseConnack");let s=this.packet;if(this._list.length<1)return null;let u=this._list.readUInt8(this._pos++);if(u>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(s.sessionPresent=!!(u&i.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?s.reasonCode=this._list.readUInt8(this._pos++):s.reasonCode=0;else{if(this._list.length<2)return null;s.returnCode=this._list.readUInt8(this._pos++)}if(s.returnCode===-1||s.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(s.properties=d)}e("_parseConnack: complete")}_parsePublish(){e("_parsePublish");let s=this.packet;if(s.topic=this._parseString(),s.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(s.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}s.payload=this._list.slice(this._pos,s.length),e("_parsePublish: payload from buffer list: %o",s.payload)}}_parseSubscribe(){e("_parseSubscribe");let s=this.packet,u,d,p,m,b,w,_;if(s.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(s.properties=A)}if(s.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<s.length;){if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=s.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=d&i.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(w=(d>>i.SUBSCRIBE_OPTIONS_NL_SHIFT&i.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(d>>i.SUBSCRIBE_OPTIONS_RAP_SHIFT&i.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,m=d>>i.SUBSCRIBE_OPTIONS_RH_SHIFT&i.SUBSCRIBE_OPTIONS_RH_MASK,m>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));_={topic:u,qos:p},this.settings.protocolVersion===5?(_.nl=w,_.rap=b,_.rh=m):this.settings.bridgeMode&&(_.rh=0,_.rap=!0,_.nl=!0),e("_parseSubscribe: push subscription `%s` to subscription",_),s.subscriptions.push(_)}}}_parseSuback(){e("_parseSuback");let s=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}if(s.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!i.MQTT5_SUBACK_CODES[u])return this._emitError(new Error("Invalid suback code"))}else if(u>2&&u!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(u)}}}_parseUnsubscribe(){e("_parseUnsubscribe");let s=this.packet;if(s.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}if(s.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<s.length;){let u=this._parseString();if(u===null)return this._emitError(new Error("Cannot parse topic"));e("_parseUnsubscribe: push topic `%s` to unsubscriptions",u),s.unsubscriptions.push(u)}}}_parseUnsuback(){e("_parseUnsuback");let s=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&s.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(s.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let u=this._parseProperties();for(Object.getOwnPropertyNames(u).length&&(s.properties=u),s.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!i.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){e("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let s=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(s.length>2){switch(s.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!i.MQTT5_PUBACK_PUBREC_CODES[s.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!i.MQTT5_PUBREL_PUBCOMP_CODES[s.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}e("_parseConfirmation: packet.reasonCode `%d`",s.reasonCode)}else s.reasonCode=0;if(s.length>3){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}}return!0}_parseDisconnect(){let s=this.packet;if(e("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(s.reasonCode=this._parseByte(),i.MQTT5_DISCONNECT_CODES[s.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):s.reasonCode=0;let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}return e("_parseDisconnect result: true"),!0}_parseAuth(){e("_parseAuth");let s=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(s.reasonCode=this._parseByte(),!i.MQTT5_AUTH_CODES[s.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let u=this._parseProperties();return Object.getOwnPropertyNames(u).length&&(s.properties=u),e("_parseAuth: result: true"),!0}_parseMessageId(){let s=this.packet;return s.messageId=this._parseNum(),s.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(e("_parseMessageId: packet.messageId %d",s.messageId),!0)}_parseString(s){let u=this._parseNum(),d=u+this._pos;if(u===-1||d>this._list.length||d>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,d);return this._pos+=u,e("_parseString: result: %s",p),p}_parseStringPair(){return e("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let s=this._parseNum(),u=s+this._pos;if(s===-1||u>this._list.length||u>this.packet.length)return null;let d=this._list.slice(this._pos,u);return this._pos+=s,e("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let s=this._list.readUInt16BE(this._pos);return this._pos+=2,e("_parseNum: result: %s",s),s}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let s=this._list.readUInt32BE(this._pos);return this._pos+=4,e("_parse4ByteNum: result: %s",s),s}_parseVarByteNum(s){e("_parseVarByteNum");let u=4,d=0,p=1,m=0,b=!1,w,_=this._pos?this._pos:0;for(;d<u&&_+d<this._list.length;){if(w=this._list.readUInt8(_+d++),m+=p*(w&i.VARBYTEINT_MASK),p*=128,(w&i.VARBYTEINT_FIN_MASK)===0){b=!0;break}if(this._list.length<=d)break}return!b&&d===u&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),_&&(this._pos+=d),b?s?b={bytes:d,value:m}:b=m:b=!1,e("_parseVarByteNum: result: %o",b),b}_parseByte(){let s;return this._pos<this._list.length&&(s=this._list.readUInt8(this._pos),this._pos++),e("_parseByte: result: %o",s),s}_parseByType(s){switch(e("_parseByType: type: %s",s),s){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){e("_parseProperties");let s=this._parseVarByteNum(),u=this._pos+s,d={};for(;this._pos<u;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let m=i.propertiesCodes[p];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m==="userProperties"){d[m]||(d[m]=Object.create(null));let b=this._parseByType(i.propertiesTypes[m]);if(d[m][b.name])if(Array.isArray(d[m][b.name]))d[m][b.name].push(b.value);else{let w=d[m][b.name];d[m][b.name]=[w],d[m][b.name].push(b.value)}else d[m][b.name]=b.value;continue}d[m]?Array.isArray(d[m])?d[m].push(this._parseByType(i.propertiesTypes[m])):(d[m]=[d[m]],d[m].push(this._parseByType(i.propertiesTypes[m]))):d[m]=this._parseByType(i.propertiesTypes[m])}return d}_newPacket(){return e("_newPacket"),this.packet&&(this._list.consume(this.packet.length),e("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),e("_newPacket: new packet"),this.packet=new c,this._pos=0,!0}_emitError(s){e("_emitError",s),this.error=s,this.emit("error",s)}};a.exports=n}),Cu=ye((r,a)=>{pe(),me(),ge();var{Buffer:o}=(et(),De(Xe)),l=65536,c={},i=o.isBuffer(o.from([1,2]).subarray(0,1));function e(u){let d=o.allocUnsafe(2);return d.writeUInt8(u>>8,0),d.writeUInt8(u&255,1),d}function n(){for(let u=0;u<l;u++)c[u]=e(u)}function t(u){let d=0,p=0,m=o.allocUnsafe(4);do d=u%128|0,u=u/128|0,u>0&&(d=d|128),m.writeUInt8(d,p++);while(u>0&&p<4);return u>0&&(p=0),i?m.subarray(0,p):m.slice(0,p)}function s(u){let d=o.allocUnsafe(4);return d.writeUInt32BE(u,0),d}a.exports={cache:c,generateCache:n,generateNumber:e,genBufVariableByteInt:t,generate4ByteBuffer:s}}),xu=ye((r,a)=>{pe(),me(),ge(),typeof Le>"u"||!Le.version||Le.version.indexOf("v0.")===0||Le.version.indexOf("v1.")===0&&Le.version.indexOf("v1.8.")!==0?a.exports={nextTick:o}:a.exports=Le;function o(l,c,i,e){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,t,s;switch(n){case 0:case 1:return Le.nextTick(l);case 2:return Le.nextTick(function(){l.call(null,c)});case 3:return Le.nextTick(function(){l.call(null,c,i)});case 4:return Le.nextTick(function(){l.call(null,c,i,e)});default:for(t=new Array(n-1),s=0;s<t.length;)t[s++]=arguments[s];return Le.nextTick(function(){l.apply(null,t)})}}}),vs=ye((r,a)=>{pe(),me(),ge();var o=_s(),{Buffer:l}=(et(),De(Xe)),c=l.allocUnsafe(0),i=l.from([0]),e=Cu(),n=xu().nextTick,t=Ot()("mqtt-packet:writeToStream"),s=e.cache,u=e.generateNumber,d=e.generateCache,p=e.genBufVariableByteInt,m=e.generate4ByteBuffer,b=ce,w=!0;function _(G,M,ee){switch(t("generate called"),M.cork&&(M.cork(),n(A,M)),w&&(w=!1,d()),t("generate: packet.cmd: %s",G.cmd),G.cmd){case"connect":return y(G,M);case"connack":return v(G,M,ee);case"publish":return L(G,M,ee);case"puback":case"pubrec":case"pubrel":case"pubcomp":return O(G,M,ee);case"subscribe":return S(G,M,ee);case"suback":return C(G,M,ee);case"unsubscribe":return j(G,M,ee);case"unsuback":return Q(G,M,ee);case"pingreq":case"pingresp":return X(G,M);case"disconnect":return ae(G,M,ee);case"auth":return R(G,M,ee);default:return M.destroy(new Error("Unknown command")),!1}}Object.defineProperty(_,"cacheNumbers",{get(){return b===ce},set(G){G?((!s||Object.keys(s).length===0)&&(w=!0),b=ce):(w=!1,b=le)}});function A(G){G.uncork()}function y(G,M,ee){let V=G||{},H=V.protocolId||"MQTT",z=V.protocolVersion||4,he=V.will,ie=V.clean,B=V.keepalive||0,U=V.clientId||"",Z=V.username,oe=V.password,ne=V.properties;ie===void 0&&(ie=!0);let fe=0;if(!H||typeof H!="string"&&!l.isBuffer(H))return M.destroy(new Error("Invalid protocolId")),!1;if(fe+=H.length+2,z!==3&&z!==4&&z!==5)return M.destroy(new Error("Invalid protocol version")),!1;if(fe+=1,(typeof U=="string"||l.isBuffer(U))&&(U||z>=4)&&(U||ie))fe+=l.byteLength(U)+2;else{if(z<4)return M.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ie*1===0)return M.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof B!="number"||B<0||B>65535||B%1!==0)return M.destroy(new Error("Invalid keepalive")),!1;fe+=2,fe+=1;let D,ue;if(z===5){if(D=se(M,ne),!D)return!1;fe+=D.length}if(he){if(typeof he!="object")return M.destroy(new Error("Invalid will")),!1;if(!he.topic||typeof he.topic!="string")return M.destroy(new Error("Invalid will topic")),!1;if(fe+=l.byteLength(he.topic)+2,fe+=2,he.payload)if(he.payload.length>=0)typeof he.payload=="string"?fe+=l.byteLength(he.payload):fe+=he.payload.length;else return M.destroy(new Error("Invalid will payload")),!1;if(ue={},z===5){if(ue=se(M,he.properties),!ue)return!1;fe+=ue.length}}let _e=!1;if(Z!=null)if(Ce(Z))_e=!0,fe+=l.byteLength(Z)+2;else return M.destroy(new Error("Invalid username")),!1;if(oe!=null){if(!_e)return M.destroy(new Error("Username is required to use password")),!1;if(Ce(oe))fe+=F(oe)+2;else return M.destroy(new Error("Invalid password")),!1}M.write(o.CONNECT_HEADER),J(M,fe),$(M,H),V.bridgeMode&&(z+=128),M.write(z===131?o.VERSION131:z===132?o.VERSION132:z===4?o.VERSION4:z===5?o.VERSION5:o.VERSION3);let te=0;return te|=Z!=null?o.USERNAME_MASK:0,te|=oe!=null?o.PASSWORD_MASK:0,te|=he&&he.retain?o.WILL_RETAIN_MASK:0,te|=he&&he.qos?he.qos<<o.WILL_QOS_SHIFT:0,te|=he?o.WILL_FLAG_MASK:0,te|=ie?o.CLEAN_SESSION_MASK:0,M.write(l.from([te])),b(M,B),z===5&&D.write(),$(M,U),he&&(z===5&&ue.write(),W(M,he.topic),$(M,he.payload)),Z!=null&&$(M,Z),oe!=null&&$(M,oe),!0}function v(G,M,ee){let V=ee?ee.protocolVersion:4,H=G||{},z=V===5?H.reasonCode:H.returnCode,he=H.properties,ie=2;if(typeof z!="number")return M.destroy(new Error("Invalid return code")),!1;let B=null;if(V===5){if(B=se(M,he),!B)return!1;ie+=B.length}return M.write(o.CONNACK_HEADER),J(M,ie),M.write(H.sessionPresent?o.SESSIONPRESENT_HEADER:i),M.write(l.from([z])),B==null||B.write(),!0}function L(G,M,ee){t("publish: packet: %o",G);let V=ee?ee.protocolVersion:4,H=G||{},z=H.qos||0,he=H.retain?o.RETAIN_MASK:0,ie=H.topic,B=H.payload||c,U=H.messageId,Z=H.properties,oe=0;if(typeof ie=="string")oe+=l.byteLength(ie)+2;else if(l.isBuffer(ie))oe+=ie.length+2;else return M.destroy(new Error("Invalid topic")),!1;if(l.isBuffer(B)?oe+=B.length:oe+=l.byteLength(B),z&&typeof U!="number")return M.destroy(new Error("Invalid messageId")),!1;z&&(oe+=2);let ne=null;if(V===5){if(ne=se(M,Z),!ne)return!1;oe+=ne.length}return M.write(o.PUBLISH_HEADER[z][H.dup?1:0][he?1:0]),J(M,oe),b(M,F(ie)),M.write(ie),z>0&&b(M,U),ne==null||ne.write(),t("publish: payload: %o",B),M.write(B)}function O(G,M,ee){let V=ee?ee.protocolVersion:4,H=G||{},z=H.cmd||"puback",he=H.messageId,ie=H.dup&&z==="pubrel"?o.DUP_MASK:0,B=0,U=H.reasonCode,Z=H.properties,oe=V===5?3:2;if(z==="pubrel"&&(B=1),typeof he!="number")return M.destroy(new Error("Invalid messageId")),!1;let ne=null;if(V===5&&typeof Z=="object"){if(ne=I(M,Z,ee,oe),!ne)return!1;oe+=ne.length}return M.write(o.ACKS[z][B][ie][0]),oe===3&&(oe+=U!==0?1:-1),J(M,oe),b(M,he),V===5&&oe!==2&&M.write(l.from([U])),ne!==null?ne.write():oe===4&&M.write(l.from([0])),!0}function S(G,M,ee){t("subscribe: packet: ");let V=ee?ee.protocolVersion:4,H=G||{},z=H.dup?o.DUP_MASK:0,he=H.messageId,ie=H.subscriptions,B=H.properties,U=0;if(typeof he!="number")return M.destroy(new Error("Invalid messageId")),!1;U+=2;let Z=null;if(V===5){if(Z=se(M,B),!Z)return!1;U+=Z.length}if(typeof ie=="object"&&ie.length)for(let ne=0;ne<ie.length;ne+=1){let fe=ie[ne].topic,D=ie[ne].qos;if(typeof fe!="string")return M.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof D!="number")return M.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(V===5){if(typeof(ie[ne].nl||!1)!="boolean")return M.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ie[ne].rap||!1)!="boolean")return M.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ue=ie[ne].rh||0;if(typeof ue!="number"||ue>2)return M.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}U+=l.byteLength(fe)+2+1}else return M.destroy(new Error("Invalid subscriptions")),!1;t("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),M.write(o.SUBSCRIBE_HEADER[1][z?1:0][0]),J(M,U),b(M,he),Z!==null&&Z.write();let oe=!0;for(let ne of ie){let fe=ne.topic,D=ne.qos,ue=+ne.nl,_e=+ne.rap,te=ne.rh,Oe;W(M,fe),Oe=o.SUBSCRIBE_OPTIONS_QOS[D],V===5&&(Oe|=ue?o.SUBSCRIBE_OPTIONS_NL:0,Oe|=_e?o.SUBSCRIBE_OPTIONS_RAP:0,Oe|=te?o.SUBSCRIBE_OPTIONS_RH[te]:0),oe=M.write(l.from([Oe]))}return oe}function C(G,M,ee){let V=ee?ee.protocolVersion:4,H=G||{},z=H.messageId,he=H.granted,ie=H.properties,B=0;if(typeof z!="number")return M.destroy(new Error("Invalid messageId")),!1;if(B+=2,typeof he=="object"&&he.length)for(let Z=0;Z<he.length;Z+=1){if(typeof he[Z]!="number")return M.destroy(new Error("Invalid qos vector")),!1;B+=1}else return M.destroy(new Error("Invalid qos vector")),!1;let U=null;if(V===5){if(U=I(M,ie,ee,B),!U)return!1;B+=U.length}return M.write(o.SUBACK_HEADER),J(M,B),b(M,z),U!==null&&U.write(),M.write(l.from(he))}function j(G,M,ee){let V=ee?ee.protocolVersion:4,H=G||{},z=H.messageId,he=H.dup?o.DUP_MASK:0,ie=H.unsubscriptions,B=H.properties,U=0;if(typeof z!="number")return M.destroy(new Error("Invalid messageId")),!1;if(U+=2,typeof ie=="object"&&ie.length)for(let ne=0;ne<ie.length;ne+=1){if(typeof ie[ne]!="string")return M.destroy(new Error("Invalid unsubscriptions")),!1;U+=l.byteLength(ie[ne])+2}else return M.destroy(new Error("Invalid unsubscriptions")),!1;let Z=null;if(V===5){if(Z=se(M,B),!Z)return!1;U+=Z.length}M.write(o.UNSUBSCRIBE_HEADER[1][he?1:0][0]),J(M,U),b(M,z),Z!==null&&Z.write();let oe=!0;for(let ne=0;ne<ie.length;ne++)oe=W(M,ie[ne]);return oe}function Q(G,M,ee){let V=ee?ee.protocolVersion:4,H=G||{},z=H.messageId,he=H.dup?o.DUP_MASK:0,ie=H.granted,B=H.properties,U=H.cmd,Z=0,oe=2;if(typeof z!="number")return M.destroy(new Error("Invalid messageId")),!1;if(V===5)if(typeof ie=="object"&&ie.length)for(let fe=0;fe<ie.length;fe+=1){if(typeof ie[fe]!="number")return M.destroy(new Error("Invalid qos vector")),!1;oe+=1}else return M.destroy(new Error("Invalid qos vector")),!1;let ne=null;if(V===5){if(ne=I(M,B,ee,oe),!ne)return!1;oe+=ne.length}return M.write(o.ACKS[U][Z][he][0]),J(M,oe),b(M,z),ne!==null&&ne.write(),V===5&&M.write(l.from(ie)),!0}function X(G,M,ee){return M.write(o.EMPTY[G.cmd])}function ae(G,M,ee){let V=ee?ee.protocolVersion:4,H=G||{},z=H.reasonCode,he=H.properties,ie=V===5?1:0,B=null;if(V===5){if(B=I(M,he,ee,ie),!B)return!1;ie+=B.length}return M.write(l.from([o.codes.disconnect<<4])),J(M,ie),V===5&&M.write(l.from([z])),B!==null&&B.write(),!0}function R(G,M,ee){let V=ee?ee.protocolVersion:4,H=G||{},z=H.reasonCode,he=H.properties,ie=V===5?1:0;V!==5&&M.destroy(new Error("Invalid mqtt version for auth packet"));let B=I(M,he,ee,ie);return B?(ie+=B.length,M.write(l.from([o.codes.auth<<4])),J(M,ie),M.write(l.from([z])),B!==null&&B.write(),!0):!1}var K={};function J(G,M){if(M>o.VARBYTEINT_MAX)return G.destroy(new Error(`Invalid variable byte integer: ${M}`)),!1;let ee=K[M];return ee||(ee=p(M),M<16384&&(K[M]=ee)),t("writeVarByteInt: writing to stream: %o",ee),G.write(ee)}function W(G,M){let ee=l.byteLength(M);return b(G,ee),t("writeString: %s",M),G.write(M,"utf8")}function be(G,M,ee){W(G,M),W(G,ee)}function ce(G,M){return t("writeNumberCached: number: %d",M),t("writeNumberCached: %o",s[M]),G.write(s[M])}function le(G,M){let ee=u(M);return t("writeNumberGenerated: %o",ee),G.write(ee)}function de(G,M){let ee=m(M);return t("write4ByteNumber: %o",ee),G.write(ee)}function $(G,M){typeof M=="string"?W(G,M):M?(b(G,M.length),G.write(M)):b(G,0)}function se(G,M){if(typeof M!="object"||M.length!=null)return{length:1,write(){we(G,{},0)}};let ee=0;function V(H,z){let he=o.propertiesTypes[H],ie=0;switch(he){case"byte":{if(typeof z!="boolean")return G.destroy(new Error(`Invalid ${H}: ${z}`)),!1;ie+=2;break}case"int8":{if(typeof z!="number"||z<0||z>255)return G.destroy(new Error(`Invalid ${H}: ${z}`)),!1;ie+=2;break}case"binary":{if(z&&z===null)return G.destroy(new Error(`Invalid ${H}: ${z}`)),!1;ie+=1+l.byteLength(z)+2;break}case"int16":{if(typeof z!="number"||z<0||z>65535)return G.destroy(new Error(`Invalid ${H}: ${z}`)),!1;ie+=3;break}case"int32":{if(typeof z!="number"||z<0||z>4294967295)return G.destroy(new Error(`Invalid ${H}: ${z}`)),!1;ie+=5;break}case"var":{if(typeof z!="number"||z<0||z>268435455)return G.destroy(new Error(`Invalid ${H}: ${z}`)),!1;ie+=1+l.byteLength(p(z));break}case"string":{if(typeof z!="string")return G.destroy(new Error(`Invalid ${H}: ${z}`)),!1;ie+=3+l.byteLength(z.toString());break}case"pair":{if(typeof z!="object")return G.destroy(new Error(`Invalid ${H}: ${z}`)),!1;ie+=Object.getOwnPropertyNames(z).reduce((B,U)=>{let Z=z[U];return Array.isArray(Z)?B+=Z.reduce((oe,ne)=>(oe+=3+l.byteLength(U.toString())+2+l.byteLength(ne.toString()),oe),0):B+=3+l.byteLength(U.toString())+2+l.byteLength(z[U].toString()),B},0);break}default:return G.destroy(new Error(`Invalid property ${H}: ${z}`)),!1}return ie}if(M)for(let H in M){let z=0,he=0,ie=M[H];if(ie!==void 0){if(Array.isArray(ie))for(let B=0;B<ie.length;B++){if(he=V(H,ie[B]),!he)return!1;z+=he}else{if(he=V(H,ie),!he)return!1;z=he}if(!z)return!1;ee+=z}}return{length:l.byteLength(p(ee))+ee,write(){we(G,M,ee)}}}function I(G,M,ee,V){let H=["reasonString","userProperties"],z=ee&&ee.properties&&ee.properties.maximumPacketSize?ee.properties.maximumPacketSize:0,he=se(G,M);if(z)for(;V+he.length>z;){let ie=H.shift();if(ie&&M[ie])delete M[ie],he=se(G,M);else return!1}return he}function re(G,M,ee){switch(o.propertiesTypes[M]){case"byte":{G.write(l.from([o.properties[M]])),G.write(l.from([+ee]));break}case"int8":{G.write(l.from([o.properties[M]])),G.write(l.from([ee]));break}case"binary":{G.write(l.from([o.properties[M]])),$(G,ee);break}case"int16":{G.write(l.from([o.properties[M]])),b(G,ee);break}case"int32":{G.write(l.from([o.properties[M]])),de(G,ee);break}case"var":{G.write(l.from([o.properties[M]])),J(G,ee);break}case"string":{G.write(l.from([o.properties[M]])),W(G,ee);break}case"pair":{Object.getOwnPropertyNames(ee).forEach(V=>{let H=ee[V];Array.isArray(H)?H.forEach(z=>{G.write(l.from([o.properties[M]])),be(G,V.toString(),z.toString())}):(G.write(l.from([o.properties[M]])),be(G,V.toString(),H.toString()))});break}default:return G.destroy(new Error(`Invalid property ${M} value: ${ee}`)),!1}}function we(G,M,ee){J(G,ee);for(let V in M)if(Object.prototype.hasOwnProperty.call(M,V)&&M[V]!=null){let H=M[V];if(Array.isArray(H))for(let z=0;z<H.length;z++)re(G,V,H[z]);else re(G,V,H)}}function F(G){return G?G instanceof l?G.length:l.byteLength(G):0}function Ce(G){return typeof G=="string"||G instanceof l}a.exports=_}),Iu=ye((r,a)=>{pe(),me(),ge();var o=vs(),{EventEmitter:l}=(nr(),De(Vt)),{Buffer:c}=(et(),De(Xe));function i(n,t){let s=new e;return o(n,s,t),s.concat()}var e=class extends l{constructor(){super(),this._array=new Array(20),this._i=0}write(n){return this._array[this._i++]=n,!0}concat(){let n=0,t=new Array(this._array.length),s=this._array,u=0,d;for(d=0;d<s.length&&s[d]!==void 0;d++)typeof s[d]!="string"?t[d]=s[d].length:t[d]=c.byteLength(s[d]),n+=t[d];let p=c.allocUnsafe(n);for(d=0;d<s.length&&s[d]!==void 0;d++)typeof s[d]!="string"?(s[d].copy(p,u),u+=t[d]):(p.write(s[d],u),u+=t[d]);return p}destroy(n){n&&this.emit("error",n)}};a.exports=i}),Tu=ye(r=>{pe(),me(),ge(),r.parser=Au().parser,r.generate=Iu(),r.writeToStream=vs()}),Es=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};r.default=a}),Ou=ye((r,a)=>{pe(),me(),ge(),a.exports=l;function o(i){return i instanceof Dr?Dr.from(i):new i.constructor(i.buffer.slice(),i.byteOffset,i.length)}function l(i){if(i=i||{},i.circles)return c(i);let e=new Map;if(e.set(Date,d=>new Date(d)),e.set(Map,(d,p)=>new Map(t(Array.from(d),p))),e.set(Set,(d,p)=>new Set(t(Array.from(d),p))),i.constructorHandlers)for(let d of i.constructorHandlers)e.set(d[0],d[1]);let n=null;return i.proto?u:s;function t(d,p){let m=Object.keys(d),b=new Array(m.length);for(let w=0;w<m.length;w++){let _=m[w],A=d[_];typeof A!="object"||A===null?b[_]=A:A.constructor!==Object&&(n=e.get(A.constructor))?b[_]=n(A,p):ArrayBuffer.isView(A)?b[_]=o(A):b[_]=p(A)}return b}function s(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return t(d,s);if(d.constructor!==Object&&(n=e.get(d.constructor)))return n(d,s);let p={};for(let m in d){if(Object.hasOwnProperty.call(d,m)===!1)continue;let b=d[m];typeof b!="object"||b===null?p[m]=b:b.constructor!==Object&&(n=e.get(b.constructor))?p[m]=n(b,s):ArrayBuffer.isView(b)?p[m]=o(b):p[m]=s(b)}return p}function u(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return t(d,u);if(d.constructor!==Object&&(n=e.get(d.constructor)))return n(d,u);let p={};for(let m in d){let b=d[m];typeof b!="object"||b===null?p[m]=b:b.constructor!==Object&&(n=e.get(b.constructor))?p[m]=n(b,u):ArrayBuffer.isView(b)?p[m]=o(b):p[m]=u(b)}return p}}function c(i){let e=[],n=[],t=new Map;if(t.set(Date,m=>new Date(m)),t.set(Map,(m,b)=>new Map(u(Array.from(m),b))),t.set(Set,(m,b)=>new Set(u(Array.from(m),b))),i.constructorHandlers)for(let m of i.constructorHandlers)t.set(m[0],m[1]);let s=null;return i.proto?p:d;function u(m,b){let w=Object.keys(m),_=new Array(w.length);for(let A=0;A<w.length;A++){let y=w[A],v=m[y];if(typeof v!="object"||v===null)_[y]=v;else if(v.constructor!==Object&&(s=t.get(v.constructor)))_[y]=s(v,b);else if(ArrayBuffer.isView(v))_[y]=o(v);else{let L=e.indexOf(v);L!==-1?_[y]=n[L]:_[y]=b(v)}}return _}function d(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return u(m,d);if(m.constructor!==Object&&(s=t.get(m.constructor)))return s(m,d);let b={};e.push(m),n.push(b);for(let w in m){if(Object.hasOwnProperty.call(m,w)===!1)continue;let _=m[w];if(typeof _!="object"||_===null)b[w]=_;else if(_.constructor!==Object&&(s=t.get(_.constructor)))b[w]=s(_,d);else if(ArrayBuffer.isView(_))b[w]=o(_);else{let A=e.indexOf(_);A!==-1?b[w]=n[A]:b[w]=d(_)}}return e.pop(),n.pop(),b}function p(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return u(m,p);if(m.constructor!==Object&&(s=t.get(m.constructor)))return s(m,p);let b={};e.push(m),n.push(b);for(let w in m){let _=m[w];if(typeof _!="object"||_===null)b[w]=_;else if(_.constructor!==Object&&(s=t.get(_.constructor)))b[w]=s(_,p);else if(ArrayBuffer.isView(_))b[w]=o(_);else{let A=e.indexOf(_);A!==-1?b[w]=n[A]:b[w]=p(_)}}return e.pop(),n.pop(),b}}}),Ru=ye((r,a)=>{pe(),me(),ge(),a.exports=Ou()()}),Pu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.validateTopic=a,r.validateTopics=o;function a(l){let c=l.split("/");for(let i=0;i<c.length;i++)if(c[i]!=="+"){if(c[i]==="#")return i===c.length-1;if(c[i].indexOf("+")!==-1||c[i].indexOf("#")!==-1)return!1}return!0}function o(l){if(l.length===0)return"empty_topic_list";for(let c=0;c<l.length;c++)if(!a(l[c]))return l[c];return null}}),Ss=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=or(),o={objectMode:!0},l={clean:!0},c=class{constructor(i){this.options=i||{},this.options=Object.assign(Object.assign({},l),i),this._inflights=new Map}put(i,e){return this._inflights.set(i.messageId,i),e&&e(),this}createStream(){let i=new a.Readable(o),e=[],n=!1,t=0;return this._inflights.forEach((s,u)=>{e.push(s)}),i._read=()=>{!n&&t<e.length?i.push(e[t++]):i.push(null)},i.destroy=s=>{if(!n)return n=!0,setTimeout(()=>{i.emit("close")},0),i},i}del(i,e){let n=this._inflights.get(i.messageId);return n?(this._inflights.delete(i.messageId),e(null,n)):e&&e(new Error("missing packet")),this}get(i,e){let n=this._inflights.get(i.messageId);return n?e(null,n):e&&e(new Error("missing packet")),this}close(i){this.options.clean&&(this._inflights=null),i&&i()}};r.default=c}),ju=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=[0,16,128,131,135,144,145,151,153],o=(l,c,i)=>{l.log("handlePublish: packet %o",c),i=typeof i<"u"?i:l.noop;let e=c.topic.toString(),n=c.payload,{qos:t}=c,{messageId:s}=c,{options:u}=l;if(l.options.protocolVersion===5){let d;if(c.properties&&(d=c.properties.topicAlias),typeof d<"u")if(e.length===0)if(d>0&&d<=65535){let p=l.topicAliasRecv.getTopicByAlias(d);if(p)e=p,l.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",e,d);else{l.log("handlePublish :: unregistered topic alias. alias: %d",d),l.emit("error",new Error("Received unregistered Topic Alias"));return}}else{l.log("handlePublish :: topic alias out of range. alias: %d",d),l.emit("error",new Error("Received Topic Alias is out of range"));return}else if(l.topicAliasRecv.put(e,d))l.log("handlePublish :: registered topic: %s - alias: %d",e,d);else{l.log("handlePublish :: topic alias out of range. alias: %d",d),l.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(l.log("handlePublish: qos %d",t),t){case 2:{u.customHandleAcks(e,n,c,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return l.emit("error",d);if(a.indexOf(p)===-1)return l.emit("error",new Error("Wrong reason code for pubrec"));p?l._sendPacket({cmd:"pubrec",messageId:s,reasonCode:p},i):l.incomingStore.put(c,()=>{l._sendPacket({cmd:"pubrec",messageId:s},i)})});break}case 1:{u.customHandleAcks(e,n,c,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return l.emit("error",d);if(a.indexOf(p)===-1)return l.emit("error",new Error("Wrong reason code for puback"));p||l.emit("message",e,n,c),l.handleMessage(c,m=>{if(m)return i&&i(m);l._sendPacket({cmd:"puback",messageId:s,reasonCode:p},i)})});break}case 0:l.emit("message",e,n,c),l.handleMessage(c,i);break;default:l.log("handlePublish: unknown QoS. Doing nothing.");break}};r.default=o}),Bu=ye((r,a)=>{a.exports={version:"5.12.0"}}),cr=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.MQTTJS_VERSION=r.nextTick=r.ErrorWithReasonCode=void 0,r.applyMixin=o;var a=class ks extends Error{constructor(c,i){super(c),this.code=i,Object.setPrototypeOf(this,ks.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};r.ErrorWithReasonCode=a;function o(l,c,i=!1){var e;let n=[c];for(;;){let t=n[0],s=Object.getPrototypeOf(t);if(s!=null&&s.prototype)n.unshift(s);else break}for(let t of n)for(let s of Object.getOwnPropertyNames(t.prototype))(i||s!=="constructor")&&Object.defineProperty(l.prototype,s,(e=Object.getOwnPropertyDescriptor(t.prototype,s))!==null&&e!==void 0?e:Object.create(null))}r.nextTick=typeof(Le==null?void 0:Le.nextTick)=="function"?Le.nextTick:l=>{setTimeout(l,0)},r.MQTTJS_VERSION=Bu().version}),Kr=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=void 0;var a=cr();r.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(l,c)=>{let{messageId:i}=c,e=c.cmd,n=null,t=l.outgoing[i]?l.outgoing[i].cb:null,s=null;if(!t){l.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(l.log("_handleAck :: packet type",e),e){case"pubcomp":case"puback":{let u=c.reasonCode;u&&u>0&&u!==16?(s=new a.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[u]}`,u),l._removeOutgoingAndStoreMessage(i,()=>{t(s,c)})):l._removeOutgoingAndStoreMessage(i,t);break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:i};let u=c.reasonCode;u&&u>0&&u!==16?(s=new a.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[u]}`,u),l._removeOutgoingAndStoreMessage(i,()=>{t(s,c)})):l._sendPacket(n);break}case"suback":{delete l.outgoing[i],l.messageIdProvider.deallocate(i);let u=c.granted;for(let d=0;d<u.length;d++){let p=u[d];if(p&128){s=new Error(`Subscribe error: ${r.ReasonCodes[p]}`),s.code=p;let m=l.messageIdToTopic[i];m&&m.forEach(b=>{delete l._resubscribeTopics[b]})}}delete l.messageIdToTopic[i],l._invokeStoreProcessingQueue(),t(s,c);break}case"unsuback":{delete l.outgoing[i],l.messageIdProvider.deallocate(i),l._invokeStoreProcessingQueue(),t(null,c);break}default:l.emit("error",new Error("unrecognized packet type"))}l.disconnecting&&Object.keys(l.outgoing).length===0&&l.emit("outgoingEmpty")};r.default=o}),Mu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=cr(),o=Kr(),l=(c,i)=>{let{options:e}=c,n=e.protocolVersion,t=n===5?i.reasonCode:i.returnCode;if(n!==5){let s=new a.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${n}`,t);c.emit("error",s);return}c.handleAuth(i,(s,u)=>{if(s){c.emit("error",s);return}if(t===24)c.reconnecting=!1,c._sendPacket(u);else{let d=new a.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[t]}`,t);c.emit("error",d)}})};r.default=l}),Lu=ye(r=>{var m,b,w,_,A,y,v,L,O,S,C,j,Q,X,ae,R,K,J,W,be,ce,le,de,$,se,I,re,we,F,Ci,G,M,ee,V,As,z,he,ie,Ut,Dt,xi,jr,Br,We,Ii,mr,Ft,Ti,Oe;pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;var a=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,l=typeof Le=="object"&&Le?Le:{},c=(h,f,g,E)=>{typeof l.emitWarning=="function"?l.emitWarning(h,f,g,E):console.error(`[${g}] ${f}: ${h}`)},i=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof i>"u"){e=class{constructor(){Ve(this,"onabort");Ve(this,"_onabort",[]);Ve(this,"reason");Ve(this,"aborted",!1)}addEventListener(g,E){this._onabort.push(E)}},i=class{constructor(){Ve(this,"signal",new e);f()}abort(g){var E,x;if(!this.signal.aborted){this.signal.reason=g,this.signal.aborted=!0;for(let N of this.signal._onabort)N(g);(x=(E=this.signal).onabort)==null||x.call(E,g)}}};let h=((m=l.env)==null?void 0:m.LRU_CACHE_IGNORE_AC_WARNING)!=="1",f=()=>{h&&(h=!1,c("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",f))}}var n=h=>!o.has(h),t=h=>h&&h===Math.floor(h)&&h>0&&isFinite(h),s=h=>t(h)?h<=Math.pow(2,8)?Uint8Array:h<=Math.pow(2,16)?Uint16Array:h<=Math.pow(2,32)?Uint32Array:h<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(h){super(h),this.fill(0)}},d=(b=class{constructor(f,g){Ve(this,"heap");Ve(this,"length");if(!T(b,w))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new g(f),this.length=0}static create(f){let g=s(f);if(!g)return[];Te(b,w,!0);let E=new b(f,g);return Te(b,w,!1),E}push(f){this.heap[this.length++]=f}pop(){return this.heap[--this.length]}},w=new WeakMap,Me(b,w,!1),b),p=(Oe=class{constructor(f){Me(this,F);Me(this,y);Me(this,v);Me(this,L);Me(this,O);Me(this,S);Me(this,C);Ve(this,"ttl");Ve(this,"ttlResolution");Ve(this,"ttlAutopurge");Ve(this,"updateAgeOnGet");Ve(this,"updateAgeOnHas");Ve(this,"allowStale");Ve(this,"noDisposeOnSet");Ve(this,"noUpdateTTL");Ve(this,"maxEntrySize");Ve(this,"sizeCalculation");Ve(this,"noDeleteOnFetchRejection");Ve(this,"noDeleteOnStaleGet");Ve(this,"allowStaleOnFetchAbort");Ve(this,"allowStaleOnFetchRejection");Ve(this,"ignoreFetchAbort");Me(this,j);Me(this,Q);Me(this,X);Me(this,ae);Me(this,R);Me(this,K);Me(this,J);Me(this,W);Me(this,be);Me(this,ce);Me(this,le);Me(this,de);Me(this,$);Me(this,se);Me(this,I);Me(this,re);Me(this,we);Me(this,G,()=>{});Me(this,M,()=>{});Me(this,ee,()=>{});Me(this,V,()=>!1);Me(this,z,f=>{});Me(this,he,(f,g,E)=>{});Me(this,ie,(f,g,E,x)=>{if(E||x)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Ve(this,_,"LRUCache");let{max:g=0,ttl:E,ttlResolution:x=1,ttlAutopurge:N,updateAgeOnGet:Y,updateAgeOnHas:Ee,allowStale:Se,dispose:Ie,disposeAfter:je,noDisposeOnSet:Re,noUpdateTTL:yt,maxSize:ut=0,maxEntrySize:ct=0,sizeCalculation:$e,fetchMethod:Ze,memoMethod:Pe,noDeleteOnFetchRejection:Fe,noDeleteOnStaleGet:tt,allowStaleOnFetchRejection:Qe,allowStaleOnFetchAbort:ot,ignoreFetchAbort:Mt}=f;if(g!==0&&!t(g))throw new TypeError("max option must be a nonnegative integer");let k=g?s(g):Array;if(!k)throw new Error("invalid max value: "+g);if(Te(this,y,g),Te(this,v,ut),this.maxEntrySize=ct||T(this,v),this.sizeCalculation=$e,this.sizeCalculation){if(!T(this,v)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Pe!==void 0&&typeof Pe!="function")throw new TypeError("memoMethod must be a function if defined");if(Te(this,C,Pe),Ze!==void 0&&typeof Ze!="function")throw new TypeError("fetchMethod must be a function if specified");if(Te(this,S,Ze),Te(this,re,!!Ze),Te(this,X,new Map),Te(this,ae,new Array(g).fill(void 0)),Te(this,R,new Array(g).fill(void 0)),Te(this,K,new k(g)),Te(this,J,new k(g)),Te(this,W,0),Te(this,be,0),Te(this,ce,d.create(g)),Te(this,j,0),Te(this,Q,0),typeof Ie=="function"&&Te(this,L,Ie),typeof je=="function"?(Te(this,O,je),Te(this,le,[])):(Te(this,O,void 0),Te(this,le,void 0)),Te(this,I,!!T(this,L)),Te(this,we,!!T(this,O)),this.noDisposeOnSet=!!Re,this.noUpdateTTL=!!yt,this.noDeleteOnFetchRejection=!!Fe,this.allowStaleOnFetchRejection=!!Qe,this.allowStaleOnFetchAbort=!!ot,this.ignoreFetchAbort=!!Mt,this.maxEntrySize!==0){if(T(this,v)!==0&&!t(T(this,v)))throw new TypeError("maxSize must be a positive integer if specified");if(!t(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ae(this,F,As).call(this)}if(this.allowStale=!!Se,this.noDeleteOnStaleGet=!!tt,this.updateAgeOnGet=!!Y,this.updateAgeOnHas=!!Ee,this.ttlResolution=t(x)||x===0?x:1,this.ttlAutopurge=!!N,this.ttl=E||0,this.ttl){if(!t(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ae(this,F,Ci).call(this)}if(T(this,y)===0&&this.ttl===0&&T(this,v)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!T(this,y)&&!T(this,v)){let P="LRU_CACHE_UNBOUNDED";n(P)&&(o.add(P),c("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",P,Oe))}}static unsafeExposeInternals(f){return{starts:T(f,$),ttls:T(f,se),sizes:T(f,de),keyMap:T(f,X),keyList:T(f,ae),valList:T(f,R),next:T(f,K),prev:T(f,J),get head(){return T(f,W)},get tail(){return T(f,be)},free:T(f,ce),isBackgroundFetch:g=>{var E;return Ae(E=f,F,We).call(E,g)},backgroundFetch:(g,E,x,N)=>{var Y;return Ae(Y=f,F,Br).call(Y,g,E,x,N)},moveToTail:g=>{var E;return Ae(E=f,F,mr).call(E,g)},indexes:g=>{var E;return Ae(E=f,F,Ut).call(E,g)},rindexes:g=>{var E;return Ae(E=f,F,Dt).call(E,g)},isStale:g=>{var E;return T(E=f,V).call(E,g)}}}get max(){return T(this,y)}get maxSize(){return T(this,v)}get calculatedSize(){return T(this,Q)}get size(){return T(this,j)}get fetchMethod(){return T(this,S)}get memoMethod(){return T(this,C)}get dispose(){return T(this,L)}get disposeAfter(){return T(this,O)}getRemainingTTL(f){return T(this,X).has(f)?1/0:0}*entries(){for(let f of Ae(this,F,Ut).call(this))T(this,R)[f]!==void 0&&T(this,ae)[f]!==void 0&&!Ae(this,F,We).call(this,T(this,R)[f])&&(yield[T(this,ae)[f],T(this,R)[f]])}*rentries(){for(let f of Ae(this,F,Dt).call(this))T(this,R)[f]!==void 0&&T(this,ae)[f]!==void 0&&!Ae(this,F,We).call(this,T(this,R)[f])&&(yield[T(this,ae)[f],T(this,R)[f]])}*keys(){for(let f of Ae(this,F,Ut).call(this)){let g=T(this,ae)[f];g!==void 0&&!Ae(this,F,We).call(this,T(this,R)[f])&&(yield g)}}*rkeys(){for(let f of Ae(this,F,Dt).call(this)){let g=T(this,ae)[f];g!==void 0&&!Ae(this,F,We).call(this,T(this,R)[f])&&(yield g)}}*values(){for(let f of Ae(this,F,Ut).call(this))T(this,R)[f]!==void 0&&!Ae(this,F,We).call(this,T(this,R)[f])&&(yield T(this,R)[f])}*rvalues(){for(let f of Ae(this,F,Dt).call(this))T(this,R)[f]!==void 0&&!Ae(this,F,We).call(this,T(this,R)[f])&&(yield T(this,R)[f])}[(A=Symbol.iterator,_=Symbol.toStringTag,A)](){return this.entries()}find(f,g={}){for(let E of Ae(this,F,Ut).call(this)){let x=T(this,R)[E],N=Ae(this,F,We).call(this,x)?x.__staleWhileFetching:x;if(N!==void 0&&f(N,T(this,ae)[E],this))return this.get(T(this,ae)[E],g)}}forEach(f,g=this){for(let E of Ae(this,F,Ut).call(this)){let x=T(this,R)[E],N=Ae(this,F,We).call(this,x)?x.__staleWhileFetching:x;N!==void 0&&f.call(g,N,T(this,ae)[E],this)}}rforEach(f,g=this){for(let E of Ae(this,F,Dt).call(this)){let x=T(this,R)[E],N=Ae(this,F,We).call(this,x)?x.__staleWhileFetching:x;N!==void 0&&f.call(g,N,T(this,ae)[E],this)}}purgeStale(){let f=!1;for(let g of Ae(this,F,Dt).call(this,{allowStale:!0}))T(this,V).call(this,g)&&(Ae(this,F,Ft).call(this,T(this,ae)[g],"expire"),f=!0);return f}info(f){let g=T(this,X).get(f);if(g===void 0)return;let E=T(this,R)[g],x=Ae(this,F,We).call(this,E)?E.__staleWhileFetching:E;if(x===void 0)return;let N={value:x};if(T(this,se)&&T(this,$)){let Y=T(this,se)[g],Ee=T(this,$)[g];if(Y&&Ee){let Se=Y-(a.now()-Ee);N.ttl=Se,N.start=Date.now()}}return T(this,de)&&(N.size=T(this,de)[g]),N}dump(){let f=[];for(let g of Ae(this,F,Ut).call(this,{allowStale:!0})){let E=T(this,ae)[g],x=T(this,R)[g],N=Ae(this,F,We).call(this,x)?x.__staleWhileFetching:x;if(N===void 0||E===void 0)continue;let Y={value:N};if(T(this,se)&&T(this,$)){Y.ttl=T(this,se)[g];let Ee=a.now()-T(this,$)[g];Y.start=Math.floor(Date.now()-Ee)}T(this,de)&&(Y.size=T(this,de)[g]),f.unshift([E,Y])}return f}load(f){this.clear();for(let[g,E]of f){if(E.start){let x=Date.now()-E.start;E.start=a.now()-x}this.set(g,E.value,E)}}set(f,g,E={}){var yt,ut,ct,$e,Ze;if(g===void 0)return this.delete(f),this;let{ttl:x=this.ttl,start:N,noDisposeOnSet:Y=this.noDisposeOnSet,sizeCalculation:Ee=this.sizeCalculation,status:Se}=E,{noUpdateTTL:Ie=this.noUpdateTTL}=E,je=T(this,ie).call(this,f,g,E.size||0,Ee);if(this.maxEntrySize&&je>this.maxEntrySize)return Se&&(Se.set="miss",Se.maxEntrySizeExceeded=!0),Ae(this,F,Ft).call(this,f,"set"),this;let Re=T(this,j)===0?void 0:T(this,X).get(f);if(Re===void 0)Re=T(this,j)===0?T(this,be):T(this,ce).length!==0?T(this,ce).pop():T(this,j)===T(this,y)?Ae(this,F,jr).call(this,!1):T(this,j),T(this,ae)[Re]=f,T(this,R)[Re]=g,T(this,X).set(f,Re),T(this,K)[T(this,be)]=Re,T(this,J)[Re]=T(this,be),Te(this,be,Re),Sr(this,j)._++,T(this,he).call(this,Re,je,Se),Se&&(Se.set="add"),Ie=!1;else{Ae(this,F,mr).call(this,Re);let Pe=T(this,R)[Re];if(g!==Pe){if(T(this,re)&&Ae(this,F,We).call(this,Pe)){Pe.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Fe}=Pe;Fe!==void 0&&!Y&&(T(this,I)&&((yt=T(this,L))==null||yt.call(this,Fe,f,"set")),T(this,we)&&((ut=T(this,le))==null||ut.push([Fe,f,"set"])))}else Y||(T(this,I)&&((ct=T(this,L))==null||ct.call(this,Pe,f,"set")),T(this,we)&&(($e=T(this,le))==null||$e.push([Pe,f,"set"])));if(T(this,z).call(this,Re),T(this,he).call(this,Re,je,Se),T(this,R)[Re]=g,Se){Se.set="replace";let Fe=Pe&&Ae(this,F,We).call(this,Pe)?Pe.__staleWhileFetching:Pe;Fe!==void 0&&(Se.oldValue=Fe)}}else Se&&(Se.set="update")}if(x!==0&&!T(this,se)&&Ae(this,F,Ci).call(this),T(this,se)&&(Ie||T(this,ee).call(this,Re,x,N),Se&&T(this,M).call(this,Se,Re)),!Y&&T(this,we)&&T(this,le)){let Pe=T(this,le),Fe;for(;Fe=Pe==null?void 0:Pe.shift();)(Ze=T(this,O))==null||Ze.call(this,...Fe)}return this}pop(){var f;try{for(;T(this,j);){let g=T(this,R)[T(this,W)];if(Ae(this,F,jr).call(this,!0),Ae(this,F,We).call(this,g)){if(g.__staleWhileFetching)return g.__staleWhileFetching}else if(g!==void 0)return g}}finally{if(T(this,we)&&T(this,le)){let g=T(this,le),E;for(;E=g==null?void 0:g.shift();)(f=T(this,O))==null||f.call(this,...E)}}}has(f,g={}){let{updateAgeOnHas:E=this.updateAgeOnHas,status:x}=g,N=T(this,X).get(f);if(N!==void 0){let Y=T(this,R)[N];if(Ae(this,F,We).call(this,Y)&&Y.__staleWhileFetching===void 0)return!1;if(T(this,V).call(this,N))x&&(x.has="stale",T(this,M).call(this,x,N));else return E&&T(this,G).call(this,N),x&&(x.has="hit",T(this,M).call(this,x,N)),!0}else x&&(x.has="miss");return!1}peek(f,g={}){let{allowStale:E=this.allowStale}=g,x=T(this,X).get(f);if(x===void 0||!E&&T(this,V).call(this,x))return;let N=T(this,R)[x];return Ae(this,F,We).call(this,N)?N.__staleWhileFetching:N}async fetch(f,g={}){let{allowStale:E=this.allowStale,updateAgeOnGet:x=this.updateAgeOnGet,noDeleteOnStaleGet:N=this.noDeleteOnStaleGet,ttl:Y=this.ttl,noDisposeOnSet:Ee=this.noDisposeOnSet,size:Se=0,sizeCalculation:Ie=this.sizeCalculation,noUpdateTTL:je=this.noUpdateTTL,noDeleteOnFetchRejection:Re=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:yt=this.allowStaleOnFetchRejection,ignoreFetchAbort:ut=this.ignoreFetchAbort,allowStaleOnFetchAbort:ct=this.allowStaleOnFetchAbort,context:$e,forceRefresh:Ze=!1,status:Pe,signal:Fe}=g;if(!T(this,re))return Pe&&(Pe.fetch="get"),this.get(f,{allowStale:E,updateAgeOnGet:x,noDeleteOnStaleGet:N,status:Pe});let tt={allowStale:E,updateAgeOnGet:x,noDeleteOnStaleGet:N,ttl:Y,noDisposeOnSet:Ee,size:Se,sizeCalculation:Ie,noUpdateTTL:je,noDeleteOnFetchRejection:Re,allowStaleOnFetchRejection:yt,allowStaleOnFetchAbort:ct,ignoreFetchAbort:ut,status:Pe,signal:Fe},Qe=T(this,X).get(f);if(Qe===void 0){Pe&&(Pe.fetch="miss");let ot=Ae(this,F,Br).call(this,f,Qe,tt,$e);return ot.__returned=ot}else{let ot=T(this,R)[Qe];if(Ae(this,F,We).call(this,ot)){let ve=E&&ot.__staleWhileFetching!==void 0;return Pe&&(Pe.fetch="inflight",ve&&(Pe.returnedStale=!0)),ve?ot.__staleWhileFetching:ot.__returned=ot}let Mt=T(this,V).call(this,Qe);if(!Ze&&!Mt)return Pe&&(Pe.fetch="hit"),Ae(this,F,mr).call(this,Qe),x&&T(this,G).call(this,Qe),Pe&&T(this,M).call(this,Pe,Qe),ot;let k=Ae(this,F,Br).call(this,f,Qe,tt,$e),P=k.__staleWhileFetching!==void 0&&E;return Pe&&(Pe.fetch=Mt?"stale":"refresh",P&&Mt&&(Pe.returnedStale=!0)),P?k.__staleWhileFetching:k.__returned=k}}async forceFetch(f,g={}){let E=await this.fetch(f,g);if(E===void 0)throw new Error("fetch() returned undefined");return E}memo(f,g={}){let E=T(this,C);if(!E)throw new Error("no memoMethod provided to constructor");let{context:x,forceRefresh:N,...Y}=g,Ee=this.get(f,Y);if(!N&&Ee!==void 0)return Ee;let Se=E(f,Ee,{options:Y,context:x});return this.set(f,Se,Y),Se}get(f,g={}){let{allowStale:E=this.allowStale,updateAgeOnGet:x=this.updateAgeOnGet,noDeleteOnStaleGet:N=this.noDeleteOnStaleGet,status:Y}=g,Ee=T(this,X).get(f);if(Ee!==void 0){let Se=T(this,R)[Ee],Ie=Ae(this,F,We).call(this,Se);return Y&&T(this,M).call(this,Y,Ee),T(this,V).call(this,Ee)?(Y&&(Y.get="stale"),Ie?(Y&&E&&Se.__staleWhileFetching!==void 0&&(Y.returnedStale=!0),E?Se.__staleWhileFetching:void 0):(N||Ae(this,F,Ft).call(this,f,"expire"),Y&&E&&(Y.returnedStale=!0),E?Se:void 0)):(Y&&(Y.get="hit"),Ie?Se.__staleWhileFetching:(Ae(this,F,mr).call(this,Ee),x&&T(this,G).call(this,Ee),Se))}else Y&&(Y.get="miss")}delete(f){return Ae(this,F,Ft).call(this,f,"delete")}clear(){return Ae(this,F,Ti).call(this,"delete")}},y=new WeakMap,v=new WeakMap,L=new WeakMap,O=new WeakMap,S=new WeakMap,C=new WeakMap,j=new WeakMap,Q=new WeakMap,X=new WeakMap,ae=new WeakMap,R=new WeakMap,K=new WeakMap,J=new WeakMap,W=new WeakMap,be=new WeakMap,ce=new WeakMap,le=new WeakMap,de=new WeakMap,$=new WeakMap,se=new WeakMap,I=new WeakMap,re=new WeakMap,we=new WeakMap,F=new WeakSet,Ci=function(){let f=new u(T(this,y)),g=new u(T(this,y));Te(this,se,f),Te(this,$,g),Te(this,ee,(N,Y,Ee=a.now())=>{if(g[N]=Y!==0?Ee:0,f[N]=Y,Y!==0&&this.ttlAutopurge){let Se=setTimeout(()=>{T(this,V).call(this,N)&&Ae(this,F,Ft).call(this,T(this,ae)[N],"expire")},Y+1);Se.unref&&Se.unref()}}),Te(this,G,N=>{g[N]=f[N]!==0?a.now():0}),Te(this,M,(N,Y)=>{if(f[Y]){let Ee=f[Y],Se=g[Y];if(!Ee||!Se)return;N.ttl=Ee,N.start=Se,N.now=E||x();let Ie=N.now-Se;N.remainingTTL=Ee-Ie}});let E=0,x=()=>{let N=a.now();if(this.ttlResolution>0){E=N;let Y=setTimeout(()=>E=0,this.ttlResolution);Y.unref&&Y.unref()}return N};this.getRemainingTTL=N=>{let Y=T(this,X).get(N);if(Y===void 0)return 0;let Ee=f[Y],Se=g[Y];if(!Ee||!Se)return 1/0;let Ie=(E||x())-Se;return Ee-Ie},Te(this,V,N=>{let Y=g[N],Ee=f[N];return!!Ee&&!!Y&&(E||x())-Y>Ee})},G=new WeakMap,M=new WeakMap,ee=new WeakMap,V=new WeakMap,As=function(){let f=new u(T(this,y));Te(this,Q,0),Te(this,de,f),Te(this,z,g=>{Te(this,Q,T(this,Q)-f[g]),f[g]=0}),Te(this,ie,(g,E,x,N)=>{if(Ae(this,F,We).call(this,E))return 0;if(!t(x))if(N){if(typeof N!="function")throw new TypeError("sizeCalculation must be a function");if(x=N(E,g),!t(x))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return x}),Te(this,he,(g,E,x)=>{if(f[g]=E,T(this,v)){let N=T(this,v)-f[g];for(;T(this,Q)>N;)Ae(this,F,jr).call(this,!0)}Te(this,Q,T(this,Q)+f[g]),x&&(x.entrySize=E,x.totalCalculatedSize=T(this,Q))})},z=new WeakMap,he=new WeakMap,ie=new WeakMap,Ut=function*({allowStale:f=this.allowStale}={}){if(T(this,j))for(let g=T(this,be);!(!Ae(this,F,xi).call(this,g)||((f||!T(this,V).call(this,g))&&(yield g),g===T(this,W)));)g=T(this,J)[g]},Dt=function*({allowStale:f=this.allowStale}={}){if(T(this,j))for(let g=T(this,W);!(!Ae(this,F,xi).call(this,g)||((f||!T(this,V).call(this,g))&&(yield g),g===T(this,be)));)g=T(this,K)[g]},xi=function(f){return f!==void 0&&T(this,X).get(T(this,ae)[f])===f},jr=function(f){var N,Y;let g=T(this,W),E=T(this,ae)[g],x=T(this,R)[g];return T(this,re)&&Ae(this,F,We).call(this,x)?x.__abortController.abort(new Error("evicted")):(T(this,I)||T(this,we))&&(T(this,I)&&((N=T(this,L))==null||N.call(this,x,E,"evict")),T(this,we)&&((Y=T(this,le))==null||Y.push([x,E,"evict"]))),T(this,z).call(this,g),f&&(T(this,ae)[g]=void 0,T(this,R)[g]=void 0,T(this,ce).push(g)),T(this,j)===1?(Te(this,W,Te(this,be,0)),T(this,ce).length=0):Te(this,W,T(this,K)[g]),T(this,X).delete(E),Sr(this,j)._--,g},Br=function(f,g,E,x){let N=g===void 0?void 0:T(this,R)[g];if(Ae(this,F,We).call(this,N))return N;let Y=new i,{signal:Ee}=E;Ee==null||Ee.addEventListener("abort",()=>Y.abort(Ee.reason),{signal:Y.signal});let Se={signal:Y.signal,options:E,context:x},Ie=($e,Ze=!1)=>{let{aborted:Pe}=Y.signal,Fe=E.ignoreFetchAbort&&$e!==void 0;if(E.status&&(Pe&&!Ze?(E.status.fetchAborted=!0,E.status.fetchError=Y.signal.reason,Fe&&(E.status.fetchAbortIgnored=!0)):E.status.fetchResolved=!0),Pe&&!Fe&&!Ze)return Re(Y.signal.reason);let tt=ut;return T(this,R)[g]===ut&&($e===void 0?tt.__staleWhileFetching?T(this,R)[g]=tt.__staleWhileFetching:Ae(this,F,Ft).call(this,f,"fetch"):(E.status&&(E.status.fetchUpdated=!0),this.set(f,$e,Se.options))),$e},je=$e=>(E.status&&(E.status.fetchRejected=!0,E.status.fetchError=$e),Re($e)),Re=$e=>{let{aborted:Ze}=Y.signal,Pe=Ze&&E.allowStaleOnFetchAbort,Fe=Pe||E.allowStaleOnFetchRejection,tt=Fe||E.noDeleteOnFetchRejection,Qe=ut;if(T(this,R)[g]===ut&&(!tt||Qe.__staleWhileFetching===void 0?Ae(this,F,Ft).call(this,f,"fetch"):Pe||(T(this,R)[g]=Qe.__staleWhileFetching)),Fe)return E.status&&Qe.__staleWhileFetching!==void 0&&(E.status.returnedStale=!0),Qe.__staleWhileFetching;if(Qe.__returned===Qe)throw $e},yt=($e,Ze)=>{var Fe;let Pe=(Fe=T(this,S))==null?void 0:Fe.call(this,f,N,Se);Pe&&Pe instanceof Promise&&Pe.then(tt=>$e(tt===void 0?void 0:tt),Ze),Y.signal.addEventListener("abort",()=>{(!E.ignoreFetchAbort||E.allowStaleOnFetchAbort)&&($e(void 0),E.allowStaleOnFetchAbort&&($e=tt=>Ie(tt,!0)))})};E.status&&(E.status.fetchDispatched=!0);let ut=new Promise(yt).then(Ie,je),ct=Object.assign(ut,{__abortController:Y,__staleWhileFetching:N,__returned:void 0});return g===void 0?(this.set(f,ct,{...Se.options,status:void 0}),g=T(this,X).get(f)):T(this,R)[g]=ct,ct},We=function(f){if(!T(this,re))return!1;let g=f;return!!g&&g instanceof Promise&&g.hasOwnProperty("__staleWhileFetching")&&g.__abortController instanceof i},Ii=function(f,g){T(this,J)[g]=f,T(this,K)[f]=g},mr=function(f){f!==T(this,be)&&(f===T(this,W)?Te(this,W,T(this,K)[f]):Ae(this,F,Ii).call(this,T(this,J)[f],T(this,K)[f]),Ae(this,F,Ii).call(this,T(this,be),f),Te(this,be,f))},Ft=function(f,g){var x,N,Y,Ee;let E=!1;if(T(this,j)!==0){let Se=T(this,X).get(f);if(Se!==void 0)if(E=!0,T(this,j)===1)Ae(this,F,Ti).call(this,g);else{T(this,z).call(this,Se);let Ie=T(this,R)[Se];if(Ae(this,F,We).call(this,Ie)?Ie.__abortController.abort(new Error("deleted")):(T(this,I)||T(this,we))&&(T(this,I)&&((x=T(this,L))==null||x.call(this,Ie,f,g)),T(this,we)&&((N=T(this,le))==null||N.push([Ie,f,g]))),T(this,X).delete(f),T(this,ae)[Se]=void 0,T(this,R)[Se]=void 0,Se===T(this,be))Te(this,be,T(this,J)[Se]);else if(Se===T(this,W))Te(this,W,T(this,K)[Se]);else{let je=T(this,J)[Se];T(this,K)[je]=T(this,K)[Se];let Re=T(this,K)[Se];T(this,J)[Re]=T(this,J)[Se]}Sr(this,j)._--,T(this,ce).push(Se)}}if(T(this,we)&&((Y=T(this,le))!=null&&Y.length)){let Se=T(this,le),Ie;for(;Ie=Se==null?void 0:Se.shift();)(Ee=T(this,O))==null||Ee.call(this,...Ie)}return E},Ti=function(f){var g,E,x;for(let N of Ae(this,F,Dt).call(this,{allowStale:!0})){let Y=T(this,R)[N];if(Ae(this,F,We).call(this,Y))Y.__abortController.abort(new Error("deleted"));else{let Ee=T(this,ae)[N];T(this,I)&&((g=T(this,L))==null||g.call(this,Y,Ee,f)),T(this,we)&&((E=T(this,le))==null||E.push([Y,Ee,f]))}}if(T(this,X).clear(),T(this,R).fill(void 0),T(this,ae).fill(void 0),T(this,se)&&T(this,$)&&(T(this,se).fill(0),T(this,$).fill(0)),T(this,de)&&T(this,de).fill(0),Te(this,W,0),Te(this,be,0),T(this,ce).length=0,Te(this,Q,0),Te(this,j,0),T(this,we)&&T(this,le)){let N=T(this,le),Y;for(;Y=N==null?void 0:N.shift();)(x=T(this,O))==null||x.call(this,...Y)}},Oe);r.LRUCache=p}),jt=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;var a=class{constructor(c=0){this.iteratorType=c}equals(c){return this.o===c.o}};r.ContainerIterator=a;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};r.Base=o;var l=class extends o{};r.Container=l}),Nu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=jt(),o=class extends a.Base{constructor(c=[]){super(),this.S=[];let i=this;c.forEach(function(e){i.push(e)})}clear(){this.i=0,this.S=[]}push(c){return this.S.push(c),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},l=o;r.default=l}),Uu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=jt(),o=class extends a.Base{constructor(c=[]){super(),this.j=0,this.q=[];let i=this;c.forEach(function(e){i.push(e)})}clear(){this.q=[],this.i=this.j=0}push(c){let i=this.q.length;if(this.j/i>.5&&this.j+this.i>=i&&i>4096){let e=this.i;for(let n=0;n<e;++n)this.q[n]=this.q[this.j+n];this.j=0,this.q[this.i]=c}else this.q[this.j+this.i]=c;return++this.i}pop(){if(this.i===0)return;let c=this.q[this.j++];return this.i-=1,c}front(){if(this.i!==0)return this.q[this.j]}},l=o;r.default=l}),Du=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=jt(),o=class extends a.Base{constructor(c=[],i=function(n,t){return n>t?-1:n<t?1:0},e=!0){if(super(),this.v=i,Array.isArray(c))this.C=e?[...c]:c;else{this.C=[];let t=this;c.forEach(function(s){t.C.push(s)})}this.i=this.C.length;let n=this.i>>1;for(let t=this.i-1>>1;t>=0;--t)this.k(t,n)}m(c){let i=this.C[c];for(;c>0;){let e=c-1>>1,n=this.C[e];if(this.v(n,i)<=0)break;this.C[c]=n,c=e}this.C[c]=i}k(c,i){let e=this.C[c];for(;c<i;){let n=c<<1|1,t=n+1,s=this.C[n];if(t<this.i&&this.v(s,this.C[t])>0&&(n=t,s=this.C[t]),this.v(s,e)>=0)break;this.C[c]=s,c=n}this.C[c]=e}clear(){this.i=0,this.C.length=0}push(c){this.C.push(c),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let c=this.C[0],i=this.C.pop();return this.i-=1,this.i&&(this.C[0]=i,this.k(0,this.i>>1)),c}top(){return this.C[0]}find(c){return this.C.indexOf(c)>=0}remove(c){let i=this.C.indexOf(c);return i<0?!1:(i===0?this.pop():i===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(i,1,this.C.pop()),this.i-=1,this.m(i),this.k(i,this.i>>1)),!0)}updateItem(c){let i=this.C.indexOf(c);return i<0?!1:(this.m(i),this.k(i,this.i>>1),!0)}toArray(){return[...this.C]}},l=o;r.default=l}),Yi=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=jt(),o=class extends a.Container{},l=o;r.default=l}),Bt=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=a;function a(){throw new RangeError("Iterator access denied!")}}),Cs=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var a=jt(),o=Bt(),l=class extends a.ContainerIterator{constructor(c,i){super(i),this.o=c,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(c){this.container.setElementByPos(this.o,c)}};r.RandomIterator=l}),Fu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=l(Yi()),o=Cs();function l(n){return n&&n.t?n:{default:n}}var c=class xs extends o.RandomIterator{constructor(t,s,u){super(t,u),this.container=s}copy(){return new xs(this.o,this.container,this.iteratorType)}},i=class extends a.default{constructor(n=[],t=!0){if(super(),Array.isArray(n))this.J=t?[...n]:n,this.i=n.length;else{this.J=[];let s=this;n.forEach(function(u){s.pushBack(u)})}}clear(){this.i=0,this.J.length=0}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J[n]}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J.splice(n,1),this.i-=1,this.i}eraseElementByValue(n){let t=0;for(let s=0;s<this.i;++s)this.J[s]!==n&&(this.J[t++]=this.J[s]);return this.i=this.J.length=t,this.i}eraseElementByIterator(n){let t=n.o;return n=n.next(),this.eraseElementByPos(t),n}pushBack(n){return this.J.push(n),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(n,t){if(n<0||n>this.i-1)throw new RangeError;this.J[n]=t}insert(n,t,s=1){if(n<0||n>this.i)throw new RangeError;return this.J.splice(n,0,...new Array(s).fill(t)),this.i+=s,this.i}find(n){for(let t=0;t<this.i;++t)if(this.J[t]===n)return new c(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let n=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[n++]=this.J[t]);return this.i=this.J.length=n,this.i}sort(n){this.J.sort(n)}forEach(n){for(let t=0;t<this.i;++t)n(this.J[t],t,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},e=i;r.default=e}),Wu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=c(Yi()),o=jt(),l=Bt();function c(t){return t&&t.t?t:{default:t}}var i=class Is extends o.ContainerIterator{constructor(s,u,d,p){super(p),this.o=s,this.h=u,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l}set pointer(s){this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l=s}copy(){return new Is(this.o,this.h,this.container,this.iteratorType)}},e=class extends a.default{constructor(t=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let s=this;t.forEach(function(u){s.pushBack(u)})}V(t){let{L:s,B:u}=t;s.B=u,u.L=s,t===this.p&&(this.p=u),t===this._&&(this._=s),this.i-=1}G(t,s){let u=s.B,d={l:t,L:s,B:u};s.B=d,u.L=d,s===this.h&&(this.p=d),u===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let s=this.p;for(;t--;)s=s.B;return s.l}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let s=this.p;for(;t--;)s=s.B;return this.V(s),this.i}eraseElementByValue(t){let s=this.p;for(;s!==this.h;)s.l===t&&this.V(s),s=s.B;return this.i}eraseElementByIterator(t){let s=t.o;return s===this.h&&(0,l.throwIteratorAccessError)(),t=t.next(),this.V(s),t}pushBack(t){return this.G(t,this._),this.i}popBack(){if(this.i===0)return;let t=this._.l;return this.V(this._),t}pushFront(t){return this.G(t,this.h),this.i}popFront(){if(this.i===0)return;let t=this.p.l;return this.V(this.p),t}setElementByPos(t,s){if(t<0||t>this.i-1)throw new RangeError;let u=this.p;for(;t--;)u=u.B;u.l=s}insert(t,s,u=1){if(t<0||t>this.i)throw new RangeError;if(u<=0)return this.i;if(t===0)for(;u--;)this.pushFront(s);else if(t===this.i)for(;u--;)this.pushBack(s);else{let d=this.p;for(let m=1;m<t;++m)d=d.B;let p=d.B;for(this.i+=u;u--;)d.B={l:s,L:d},d.B.L=d,d=d.B;d.B=p,p.L=d}return this.i}find(t){let s=this.p;for(;s!==this.h;){if(s.l===t)return new i(s,this.h,this);s=s.B}return this.end()}reverse(){if(this.i<=1)return;let t=this.p,s=this._,u=0;for(;u<<1<this.i;){let d=t.l;t.l=s.l,s.l=d,t=t.B,s=s.L,u+=1}}unique(){if(this.i<=1)return this.i;let t=this.p;for(;t!==this.h;){let s=t;for(;s.B!==this.h&&s.l===s.B.l;)s=s.B,this.i-=1;t.B=s.B,t.B.L=t,t=t.B}return this.i}sort(t){if(this.i<=1)return;let s=[];this.forEach(function(d){s.push(d)}),s.sort(t);let u=this.p;s.forEach(function(d){u.l=d,u=u.B})}merge(t){let s=this;if(this.i===0)t.forEach(function(u){s.pushBack(u)});else{let u=this.p;t.forEach(function(d){for(;u!==s.h&&u.l<=d;)u=u.B;s.G(d,u.L)})}return this.i}forEach(t){let s=this.p,u=0;for(;s!==this.h;)t(s.l,u++,this),s=s.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let t=this.p;for(;t!==this.h;)yield t.l,t=t.B}).bind(this)()}},n=e;r.default=n}),$u=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=l(Yi()),o=Cs();function l(n){return n&&n.t?n:{default:n}}var c=class Ts extends o.RandomIterator{constructor(t,s,u){super(t,u),this.container=s}copy(){return new Ts(this.o,this.container,this.iteratorType)}},i=class extends a.default{constructor(n=[],t=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let s=(()=>{if(typeof n.length=="number")return n.length;if(typeof n.size=="number")return n.size;if(typeof n.size=="function")return n.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(s/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let u=Math.ceil(s/this.F);this.j=this.R=(this.P>>1)-(u>>1),this.D=this.N=this.F-s%this.F>>1;let d=this;n.forEach(function(p){d.pushBack(p)})}T(){let n=[],t=Math.max(this.P>>1,1);for(let s=0;s<t;++s)n[s]=new Array(this.F);for(let s=this.j;s<this.P;++s)n[n.length]=this.A[s];for(let s=0;s<this.R;++s)n[n.length]=this.A[s];n[n.length]=[...this.A[this.R]],this.j=t,this.R=n.length-1;for(let s=0;s<t;++s)n[n.length]=new Array(this.F);this.A=n,this.P=n.length}O(n){let t=this.D+n+1,s=t%this.F,u=s-1,d=this.j+(t-s)/this.F;return s===0&&(d-=1),d%=this.P,u<0&&(u+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:u}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(n){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=n,this.i}popBack(){if(this.i===0)return;let n=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,n}pushFront(n){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=n,this.i}popFront(){if(this.i===0)return;let n=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,n}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:t,curNodePointerIndex:s}=this.O(n);return this.A[t][s]}setElementByPos(n,t){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:s,curNodePointerIndex:u}=this.O(n);this.A[s][u]=t}insert(n,t,s=1){if(n<0||n>this.i)throw new RangeError;if(n===0)for(;s--;)this.pushFront(t);else if(n===this.i)for(;s--;)this.pushBack(t);else{let u=[];for(let d=n;d<this.i;++d)u.push(this.getElementByPos(d));this.cut(n-1);for(let d=0;d<s;++d)this.pushBack(t);for(let d=0;d<u.length;++d)this.pushBack(u[d])}return this.i}cut(n){if(n<0)return this.clear(),0;let{curNodeBucketIndex:t,curNodePointerIndex:s}=this.O(n);return this.R=t,this.N=s,this.i=n+1,this.i}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;if(n===0)this.popFront();else if(n===this.i-1)this.popBack();else{let t=[];for(let u=n+1;u<this.i;++u)t.push(this.getElementByPos(u));this.cut(n),this.popBack();let s=this;t.forEach(function(u){s.pushBack(u)})}return this.i}eraseElementByValue(n){if(this.i===0)return 0;let t=[];for(let u=0;u<this.i;++u){let d=this.getElementByPos(u);d!==n&&t.push(d)}let s=t.length;for(let u=0;u<s;++u)this.setElementByPos(u,t[u]);return this.cut(s-1)}eraseElementByIterator(n){let t=n.o;return this.eraseElementByPos(t),n=n.next(),n}find(n){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===n)return new c(t,this);return this.end()}reverse(){let n=0,t=this.i-1;for(;n<t;){let s=this.getElementByPos(n);this.setElementByPos(n,this.getElementByPos(t)),this.setElementByPos(t,s),n+=1,t-=1}}unique(){if(this.i<=1)return this.i;let n=1,t=this.getElementByPos(0);for(let s=1;s<this.i;++s){let u=this.getElementByPos(s);u!==t&&(t=u,this.setElementByPos(n++,u))}for(;this.i>n;)this.popBack();return this.i}sort(n){let t=[];for(let s=0;s<this.i;++s)t.push(this.getElementByPos(s));t.sort(n);for(let s=0;s<this.i;++s)this.setElementByPos(s,t[s])}shrinkToFit(){if(this.i===0)return;let n=[];this.forEach(function(t){n.push(t)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let t=0;t<this.P;++t)this.A.push(new Array(this.F));for(let t=0;t<n.length;++t)this.pushBack(n[t])}forEach(n){for(let t=0;t<this.i;++t)n(this.getElementByPos(t),t,this)}[Symbol.iterator](){return(function*(){for(let n=0;n<this.i;++n)yield this.getElementByPos(n)}).bind(this)()}},e=i;r.default=e}),Vu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;var a=class{constructor(l,c){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=l,this.l=c}L(){let l=this;if(l.ee===1&&l.tt.tt===l)l=l.W;else if(l.U)for(l=l.U;l.W;)l=l.W;else{let c=l.tt;for(;c.U===l;)l=c,c=l.tt;l=c}return l}B(){let l=this;if(l.W){for(l=l.W;l.U;)l=l.U;return l}else{let c=l.tt;for(;c.W===l;)l=c,c=l.tt;return l.W!==c?c:l}}te(){let l=this.tt,c=this.W,i=c.U;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.U=this,this.tt=c,this.W=i,i&&(i.tt=this),c}se(){let l=this.tt,c=this.U,i=c.W;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.W=this,this.tt=c,this.U=i,i&&(i.tt=this),c}};r.TreeNode=a;var o=class extends a{constructor(){super(...arguments),this.rt=1}te(){let l=super.te();return this.ie(),l.ie(),l}se(){let l=super.se();return this.ie(),l.ie(),l}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};r.TreeNodeEnableIndex=o}),Os=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Vu(),o=jt(),l=Bt(),c=class extends o.Container{constructor(e=function(t,s){return t<s?-1:t>s?1:0},n=!1){super(),this.Y=void 0,this.v=e,n?(this.re=a.TreeNodeEnableIndex,this.M=function(t,s,u){let d=this.ne(t,s,u);if(d){let p=d.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let m=this.he(d);if(m){let{parentNode:b,grandParent:w,curNode:_}=m;b.ie(),w.ie(),_.ie()}}return this.i},this.V=function(t){let s=this.fe(t);for(;s!==this.h;)s.rt-=1,s=s.tt}):(this.re=a.TreeNode,this.M=function(t,s,u){let d=this.ne(t,s,u);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(e,n){let t=this.h;for(;e;){let s=this.v(e.u,n);if(s<0)e=e.W;else if(s>0)t=e,e=e.U;else return e}return t}Z(e,n){let t=this.h;for(;e;)this.v(e.u,n)<=0?e=e.W:(t=e,e=e.U);return t}$(e,n){let t=this.h;for(;e;){let s=this.v(e.u,n);if(s<0)t=e,e=e.W;else if(s>0)e=e.U;else return e}return t}rr(e,n){let t=this.h;for(;e;)this.v(e.u,n)<0?(t=e,e=e.W):e=e.U;return t}ue(e){for(;;){let n=e.tt;if(n===this.h)return;if(e.ee===1){e.ee=0;return}if(e===n.U){let t=n.W;if(t.ee===1)t.ee=0,n.ee=1,n===this.Y?this.Y=n.te():n.te();else if(t.W&&t.W.ee===1){t.ee=n.ee,n.ee=0,t.W.ee=0,n===this.Y?this.Y=n.te():n.te();return}else t.U&&t.U.ee===1?(t.ee=1,t.U.ee=0,t.se()):(t.ee=1,e=n)}else{let t=n.U;if(t.ee===1)t.ee=0,n.ee=1,n===this.Y?this.Y=n.se():n.se();else if(t.U&&t.U.ee===1){t.ee=n.ee,n.ee=0,t.U.ee=0,n===this.Y?this.Y=n.se():n.se();return}else t.W&&t.W.ee===1?(t.ee=1,t.W.ee=0,t.te()):(t.ee=1,e=n)}}}fe(e){if(this.i===1)return this.clear(),this.h;let n=e;for(;n.U||n.W;){if(n.W)for(n=n.W;n.U;)n=n.U;else n=n.U;[e.u,n.u]=[n.u,e.u],[e.l,n.l]=[n.l,e.l],e=n}this.h.U===n?this.h.U=n.tt:this.h.W===n&&(this.h.W=n.tt),this.ue(n);let t=n.tt;return n===t.U?t.U=void 0:t.W=void 0,this.i-=1,this.Y.ee=0,t}oe(e,n){return e===void 0?!1:this.oe(e.U,n)||n(e)?!0:this.oe(e.W,n)}he(e){for(;;){let n=e.tt;if(n.ee===0)return;let t=n.tt;if(n===t.U){let s=t.W;if(s&&s.ee===1){if(s.ee=n.ee=0,t===this.Y)return;t.ee=1,e=t;continue}else if(e===n.W){if(e.ee=0,e.U&&(e.U.tt=n),e.W&&(e.W.tt=t),n.W=e.U,t.U=e.W,e.U=n,e.W=t,t===this.Y)this.Y=e,this.h.tt=e;else{let u=t.tt;u.U===t?u.U=e:u.W=e}return e.tt=t.tt,n.tt=e,t.tt=e,t.ee=1,{parentNode:n,grandParent:t,curNode:e}}else n.ee=0,t===this.Y?this.Y=t.se():t.se(),t.ee=1}else{let s=t.U;if(s&&s.ee===1){if(s.ee=n.ee=0,t===this.Y)return;t.ee=1,e=t;continue}else if(e===n.U){if(e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=n),t.W=e.U,n.U=e.W,e.U=t,e.W=n,t===this.Y)this.Y=e,this.h.tt=e;else{let u=t.tt;u.U===t?u.U=e:u.W=e}return e.tt=t.tt,n.tt=e,t.tt=e,t.ee=1,{parentNode:n,grandParent:t,curNode:e}}else n.ee=0,t===this.Y?this.Y=t.te():t.te(),t.ee=1}return}}ne(e,n,t){if(this.Y===void 0){this.i+=1,this.Y=new this.re(e,n),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let s,u=this.h.U,d=this.v(u.u,e);if(d===0){u.l=n;return}else if(d>0)u.U=new this.re(e,n),u.U.tt=u,s=u.U,this.h.U=s;else{let p=this.h.W,m=this.v(p.u,e);if(m===0){p.l=n;return}else if(m<0)p.W=new this.re(e,n),p.W.tt=p,s=p.W,this.h.W=s;else{if(t!==void 0){let b=t.o;if(b!==this.h){let w=this.v(b.u,e);if(w===0){b.l=n;return}else if(w>0){let _=b.L(),A=this.v(_.u,e);if(A===0){_.l=n;return}else A<0&&(s=new this.re(e,n),_.W===void 0?(_.W=s,s.tt=_):(b.U=s,s.tt=b))}}}if(s===void 0)for(s=this.Y;;){let b=this.v(s.u,e);if(b>0){if(s.U===void 0){s.U=new this.re(e,n),s.U.tt=s,s=s.U;break}s=s.U}else if(b<0){if(s.W===void 0){s.W=new this.re(e,n),s.W.tt=s,s=s.W;break}s=s.W}else{s.l=n;return}}}}return this.i+=1,s}I(e,n){for(;e;){let t=this.v(e.u,n);if(t<0)e=e.W;else if(t>0)e=e.U;else return e}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,n){let t=e.o;if(t===this.h&&(0,l.throwIteratorAccessError)(),this.i===1)return t.u=n,!0;if(t===this.h.U)return this.v(t.B().u,n)>0?(t.u=n,!0):!1;if(t===this.h.W)return this.v(t.L().u,n)<0?(t.u=n,!0):!1;let s=t.L().u;if(this.v(s,n)>=0)return!1;let u=t.B().u;return this.v(u,n)<=0?!1:(t.u=n,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let n=0,t=this;return this.oe(this.Y,function(s){return e===n?(t.V(s),!0):(n+=1,!1)}),this.i}eraseElementByKey(e){if(this.i===0)return!1;let n=this.I(this.Y,e);return n===this.h?!1:(this.V(n),!0)}eraseElementByIterator(e){let n=e.o;n===this.h&&(0,l.throwIteratorAccessError)();let t=n.W===void 0;return e.iteratorType===0?t&&e.next():(!t||n.U===void 0)&&e.next(),this.V(n),e}forEach(e){let n=0;for(let t of this)e(t,n++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let n,t=0;for(let s of this){if(t===e){n=s;break}t+=1}return n}getHeight(){if(this.i===0)return 0;let e=function(n){return n?Math.max(e(n.U),e(n.W))+1:0};return e(this.Y)}},i=c;r.default=i}),Rs=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=jt(),o=Bt(),l=class extends a.ContainerIterator{constructor(i,e,n){super(n),this.o=i,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let i=this.o,e=this.h.tt;if(i===this.h)return e?e.rt-1:0;let n=0;for(i.U&&(n+=i.U.rt);i!==e;){let t=i.tt;i===t.W&&(n+=1,t.U&&(n+=t.U.rt)),i=t}return n}},c=l;r.default=c}),Hu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=c(Os()),o=c(Rs()),l=Bt();function c(t){return t&&t.t?t:{default:t}}var i=class Ps extends o.default{constructor(s,u,d,p){super(s,u,p),this.container=d}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.u}copy(){return new Ps(this.o,this.h,this.container,this.iteratorType)}},e=class extends a.default{constructor(t=[],s,u){super(s,u);let d=this;t.forEach(function(p){d.insert(p)})}*K(t){t!==void 0&&(yield*this.K(t.U),yield t.u,yield*this.K(t.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(t,s){return this.M(t,void 0,s)}find(t){let s=this.I(this.Y,t);return new i(s,this.h,this)}lowerBound(t){let s=this.X(this.Y,t);return new i(s,this.h,this)}upperBound(t){let s=this.Z(this.Y,t);return new i(s,this.h,this)}reverseLowerBound(t){let s=this.$(this.Y,t);return new i(s,this.h,this)}reverseUpperBound(t){let s=this.rr(this.Y,t);return new i(s,this.h,this)}union(t){let s=this;return t.forEach(function(u){s.insert(u)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=e;r.default=n}),qu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=c(Os()),o=c(Rs()),l=Bt();function c(t){return t&&t.t?t:{default:t}}var i=class js extends o.default{constructor(s,u,d,p){super(s,u,p),this.container=d}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let s=this;return new Proxy([],{get(u,d){if(d==="0")return s.o.u;if(d==="1")return s.o.l},set(u,d,p){if(d!=="1")throw new TypeError("props must be 1");return s.o.l=p,!0}})}copy(){return new js(this.o,this.h,this.container,this.iteratorType)}},e=class extends a.default{constructor(t=[],s,u){super(s,u);let d=this;t.forEach(function(p){d.setElement(p[0],p[1])})}*K(t){t!==void 0&&(yield*this.K(t.U),yield[t.u,t.l],yield*this.K(t.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(this.i===0)return;let t=this.h.U;return[t.u,t.l]}back(){if(this.i===0)return;let t=this.h.W;return[t.u,t.l]}lowerBound(t){let s=this.X(this.Y,t);return new i(s,this.h,this)}upperBound(t){let s=this.Z(this.Y,t);return new i(s,this.h,this)}reverseLowerBound(t){let s=this.$(this.Y,t);return new i(s,this.h,this)}reverseUpperBound(t){let s=this.rr(this.Y,t);return new i(s,this.h,this)}setElement(t,s,u){return this.M(t,s,u)}find(t){let s=this.I(this.Y,t);return new i(s,this.h,this)}getElementByKey(t){return this.I(this.Y,t).l}union(t){let s=this;return t.forEach(function(u){s.setElement(u[0],u[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=e;r.default=n}),Bs=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=a;function a(o){let l=typeof o;return l==="object"&&o!==null||l==="function"}}),Ms=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var a=jt(),o=c(Bs()),l=Bt();function c(n){return n&&n.t?n:{default:n}}var i=class extends a.ContainerIterator{constructor(n,t,s){super(s),this.o=n,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}};r.HashContainerIterator=i;var e=class extends a.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(n){let{L:t,B:s}=n;t.B=s,s.L=t,n===this.p&&(this.p=s),n===this._&&(this._=t),this.i-=1}M(n,t,s){s===void 0&&(s=(0,o.default)(n));let u;if(s){let d=n[this.HASH_TAG];if(d!==void 0)return this.H[d].l=t,this.i;Object.defineProperty(n,this.HASH_TAG,{value:this.H.length,configurable:!0}),u={u:n,l:t,L:this._,B:this.h},this.H.push(u)}else{let d=this.g[n];if(d)return d.l=t,this.i;u={u:n,l:t,L:this._,B:this.h},this.g[n]=u}return this.i===0?(this.p=u,this.h.B=u):this._.B=u,this._=u,this.h.L=u,++this.i}I(n,t){if(t===void 0&&(t=(0,o.default)(n)),t){let s=n[this.HASH_TAG];return s===void 0?this.h:this.H[s]}else return this.g[n]||this.h}clear(){let n=this.HASH_TAG;this.H.forEach(function(t){delete t.u[n]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(n,t){let s;if(t===void 0&&(t=(0,o.default)(n)),t){let u=n[this.HASH_TAG];if(u===void 0)return!1;delete n[this.HASH_TAG],s=this.H[u],delete this.H[u]}else{if(s=this.g[n],s===void 0)return!1;delete this.g[n]}return this.V(s),!0}eraseElementByIterator(n){let t=n.o;return t===this.h&&(0,l.throwIteratorAccessError)(),this.V(t),n.next()}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let t=this.p;for(;n--;)t=t.B;return this.V(t),this.i}};r.HashContainer=e}),zu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Ms(),o=Bt(),l=class Ls extends a.HashContainerIterator{constructor(n,t,s,u){super(n,t,u),this.container=s}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new Ls(this.o,this.h,this.container,this.iteratorType)}},c=class extends a.HashContainer{constructor(e=[]){super();let n=this;e.forEach(function(t){n.insert(t)})}begin(){return new l(this.p,this.h,this)}end(){return new l(this.h,this.h,this)}rBegin(){return new l(this._,this.h,this,1)}rEnd(){return new l(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,n){return this.M(e,void 0,n)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let n=this.p;for(;e--;)n=n.B;return n.u}find(e,n){let t=this.I(e,n);return new l(t,this.h,this)}forEach(e){let n=0,t=this.p;for(;t!==this.h;)e(t.u,n++,this),t=t.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}).bind(this)()}},i=c;r.default=i}),Gu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Ms(),o=c(Bs()),l=Bt();function c(t){return t&&t.t?t:{default:t}}var i=class Ns extends a.HashContainerIterator{constructor(s,u,d,p){super(s,u,p),this.container=d}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let s=this;return new Proxy([],{get(u,d){if(d==="0")return s.o.u;if(d==="1")return s.o.l},set(u,d,p){if(d!=="1")throw new TypeError("props must be 1");return s.o.l=p,!0}})}copy(){return new Ns(this.o,this.h,this.container,this.iteratorType)}},e=class extends a.HashContainer{constructor(t=[]){super();let s=this;t.forEach(function(u){s.setElement(u[0],u[1])})}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(t,s,u){return this.M(t,s,u)}getElementByKey(t,s){if(s===void 0&&(s=(0,o.default)(t)),s){let d=t[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let u=this.g[t];return u?u.l:void 0}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let s=this.p;for(;t--;)s=s.B;return[s.u,s.l]}find(t,s){let u=this.I(t,s);return new i(u,this.h,this)}forEach(t){let s=0,u=this.p;for(;u!==this.h;)t([u.u,u.l],s++,this),u=u.B}[Symbol.iterator](){return(function*(){let t=this.p;for(;t!==this.h;)yield[t.u,t.l],t=t.B}).bind(this)()}},n=e;r.default=n}),Yu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return c.default}});var a=d(Nu()),o=d(Uu()),l=d(Du()),c=d(Fu()),i=d(Wu()),e=d($u()),n=d(Hu()),t=d(qu()),s=d(zu()),u=d(Gu());function d(p){return p&&p.t?p:{default:p}}}),Ku=ye((r,a)=>{pe(),me(),ge();var o=Yu().OrderedSet,l=Ot()("number-allocator:trace"),c=Ot()("number-allocator:error");function i(n,t){this.low=n,this.high=t}i.prototype.equals=function(n){return this.low===n.low&&this.high===n.high},i.prototype.compare=function(n){return this.low<n.low&&this.high<n.low?-1:n.low<this.low&&n.high<this.low?1:0};function e(n,t){if(!(this instanceof e))return new e(n,t);this.min=n,this.max=t,this.ss=new o([],(s,u)=>s.compare(u)),l("Create"),this.clear()}e.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},e.prototype.alloc=function(){if(this.ss.size()===0)return l("alloc():empty"),null;let n=this.ss.begin(),t=n.pointer.low,s=n.pointer.high,u=t;return u+1<=s?this.ss.updateKeyByIterator(n,new i(t+1,s)):this.ss.eraseElementByPos(0),l("alloc():"+u),u},e.prototype.use=function(n){let t=new i(n,n),s=this.ss.lowerBound(t);if(!s.equals(this.ss.end())){let u=s.pointer.low,d=s.pointer.high;return s.pointer.equals(t)?(this.ss.eraseElementByIterator(s),l("use():"+n),!0):u>n?!1:u===n?(this.ss.updateKeyByIterator(s,new i(u+1,d)),l("use():"+n),!0):d===n?(this.ss.updateKeyByIterator(s,new i(u,d-1)),l("use():"+n),!0):(this.ss.updateKeyByIterator(s,new i(n+1,d)),this.ss.insert(new i(u,n-1)),l("use():"+n),!0)}return l("use():failed"),!1},e.prototype.free=function(n){if(n<this.min||n>this.max){c("free():"+n+" is out of range");return}let t=new i(n,n),s=this.ss.upperBound(t);if(s.equals(this.ss.end())){if(s.equals(this.ss.begin())){this.ss.insert(t);return}s.pre();let u=s.pointer.high;s.pointer.high+1===n?this.ss.updateKeyByIterator(s,new i(u,n)):this.ss.insert(t)}else if(s.equals(this.ss.begin()))if(n+1===s.pointer.low){let u=s.pointer.high;this.ss.updateKeyByIterator(s,new i(n,u))}else this.ss.insert(t);else{let u=s.pointer.low,d=s.pointer.high;s.pre();let p=s.pointer.low;s.pointer.high+1===n?n+1===u?(this.ss.eraseElementByIterator(s),this.ss.updateKeyByIterator(s,new i(p,d))):this.ss.updateKeyByIterator(s,new i(p,n)):n+1===u?(this.ss.eraseElementByIterator(s.next()),this.ss.insert(new i(n,d))):this.ss.insert(t)}l("free():"+n)},e.prototype.clear=function(){l("clear()"),this.ss.clear(),this.ss.insert(new i(this.min,this.max))},e.prototype.intervalCount=function(){return this.ss.size()},e.prototype.dump=function(){console.log("length:"+this.ss.size());for(let n of this.ss)console.log(n)},a.exports=e}),Us=ye((r,a)=>{pe(),me(),ge();var o=Ku();a.exports.NumberAllocator=o}),Qu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=Lu(),o=Us(),l=class{constructor(c){c>0&&(this.aliasToTopic=new a.LRUCache({max:c}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,c),this.max=c,this.length=0)}put(c,i){if(i===0||i>this.max)return!1;let e=this.aliasToTopic.get(i);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(i,c),this.topicToAlias[c]=i,this.numberAllocator.use(i),this.length=this.aliasToTopic.size,!0}getTopicByAlias(c){return this.aliasToTopic.get(c)}getAliasByTopic(c){let i=this.topicToAlias[c];return typeof i<"u"&&this.aliasToTopic.get(i),i}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};r.default=l}),Zu=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var o=Kr(),l=a(Qu()),c=cr(),i=(e,n)=>{e.log("_handleConnack");let{options:t}=e,s=t.protocolVersion===5?n.reasonCode:n.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,n.properties){if(n.properties.topicAliasMaximum){if(n.properties.topicAliasMaximum>65535){e.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}n.properties.topicAliasMaximum>0&&(e.topicAliasSend=new l.default(n.properties.topicAliasMaximum))}n.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=n.properties.serverKeepAlive),n.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=n.properties.maximumPacketSize)}if(s===0)e.reconnecting=!1,e._onConnect(n);else if(s>0){let u=new c.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[s]}`,s);e.emit("error",u),e.options.reconnectOnConnackError&&e._cleanUp(!0)}};r.default=i}),Ju=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=(o,l,c)=>{o.log("handling pubrel packet");let i=typeof c<"u"?c:o.noop,{messageId:e}=l,n={cmd:"pubcomp",messageId:e};o.incomingStore.get(l,(t,s)=>{t?o._sendPacket(n,i):(o.emit("message",s.topic,s.payload,s),o.handleMessage(s,u=>{if(u)return i(u);o.incomingStore.del(s,o.noop),o._sendPacket(n,i)}))})};r.default=a}),Xu=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var o=a(ju()),l=a(Mu()),c=a(Zu()),i=a(Kr()),e=a(Ju()),n=(t,s,u)=>{let{options:d}=t;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<s.length)return t.emit("error",new Error(`exceeding packets size ${s.cmd}`)),t.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),t;switch(t.log("_handlePacket :: emitting packetreceive"),t.emit("packetreceive",s),s.cmd){case"publish":(0,o.default)(t,s,u);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":t.reschedulePing(),(0,i.default)(t,s),u();break;case"pubrel":t.reschedulePing(),(0,e.default)(t,s,u);break;case"connack":(0,c.default)(t,s),u();break;case"auth":t.reschedulePing(),(0,l.default)(t,s),u();break;case"pingresp":t.log("_handlePacket :: received pingresp"),t.reschedulePing(!0),u();break;case"disconnect":t.emit("disconnect",s),u();break;default:t.log("_handlePacket :: unknown command"),u();break}};r.default=n}),eh=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedEventEmitter=void 0;var o=a((nr(),De(Vt))),l=cr(),c=class{};r.TypedEventEmitter=c,(0,l.applyMixin)(c,o.default)}),Qr=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNativeBrowser=r.isWebWorker=void 0;var a=()=>{var i;return typeof window<"u"?typeof navigator<"u"&&((i=navigator.userAgent)===null||i===void 0?void 0:i.toLowerCase().indexOf(" electron/"))>-1&&Le!=null&&Le.versions?!Object.prototype.hasOwnProperty.call(Le.versions,"electron"):typeof window.document<"u":!1},o=()=>{var i,e;return!!(typeof self=="object"&&!((e=(i=self==null?void 0:self.constructor)===null||i===void 0?void 0:i.name)===null||e===void 0)&&e.includes("WorkerGlobalScope"))},l=()=>typeof navigator<"u"&&navigator.product==="ReactNative",c=a()||o()||l();r.isWebWorker=o(),r.isReactNativeBrowser=l(),r.default=c}),th=ye((r,a)=>{pe(),me(),ge(),function(o,l){typeof r=="object"&&typeof a<"u"?l(r):typeof define=="function"&&define.amd?define(["exports"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.fastUniqueNumbers={}))}(r,function(o){var l=function(m){return function(b){var w=m(b);return b.add(w),w}},c=function(m){return function(b,w){return m.set(b,w),w}},i=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,e=536870912,n=e*2,t=function(m,b){return function(w){var _=b.get(w),A=_===void 0?w.size:_<n?_+1:0;if(!w.has(A))return m(w,A);if(w.size<e){for(;w.has(A);)A=Math.floor(Math.random()*n);return m(w,A)}if(w.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;w.has(A);)A=Math.floor(Math.random()*i);return m(w,A)}},s=new WeakMap,u=c(s),d=t(u,s),p=l(d);o.addUniqueNumber=p,o.generateUniqueNumber=d})}),rh=ye((r,a)=>{pe(),me(),ge(),function(o,l){typeof r=="object"&&typeof a<"u"?l(r,th()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.workerTimersBroker={},o.fastUniqueNumbers))}(r,function(o,l){var c=function(n){return n.method!==void 0&&n.method==="call"},i=function(n){return n.error===null&&typeof n.id=="number"},e=function(n){var t=new Map([[0,function(){}]]),s=new Map([[0,function(){}]]),u=new Map,d=new Worker(n);d.addEventListener("message",function(_){var A=_.data;if(c(A)){var y=A.params,v=y.timerId,L=y.timerType;if(L==="interval"){var O=t.get(v);if(typeof O=="number"){var S=u.get(O);if(S===void 0||S.timerId!==v||S.timerType!==L)throw new Error("The timer is in an undefined state.")}else if(typeof O<"u")O();else throw new Error("The timer is in an undefined state.")}else if(L==="timeout"){var C=s.get(v);if(typeof C=="number"){var j=u.get(C);if(j===void 0||j.timerId!==v||j.timerType!==L)throw new Error("The timer is in an undefined state.")}else if(typeof C<"u")C(),s.delete(v);else throw new Error("The timer is in an undefined state.")}}else if(i(A)){var Q=A.id,X=u.get(Q);if(X===void 0)throw new Error("The timer is in an undefined state.");var ae=X.timerId,R=X.timerType;u.delete(Q),R==="interval"?t.delete(ae):s.delete(ae)}else{var K=A.error.message;throw new Error(K)}});var p=function(_){var A=l.generateUniqueNumber(u);u.set(A,{timerId:_,timerType:"interval"}),t.set(_,A),d.postMessage({id:A,method:"clear",params:{timerId:_,timerType:"interval"}})},m=function(_){var A=l.generateUniqueNumber(u);u.set(A,{timerId:_,timerType:"timeout"}),s.set(_,A),d.postMessage({id:A,method:"clear",params:{timerId:_,timerType:"timeout"}})},b=function(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=l.generateUniqueNumber(t);return t.set(y,function(){_(),typeof t.get(y)=="function"&&d.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:y,timerType:"interval"}})}),d.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:y,timerType:"interval"}}),y},w=function(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=l.generateUniqueNumber(s);return s.set(y,_),d.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:y,timerType:"timeout"}}),y};return{clearInterval:p,clearTimeout:m,setInterval:b,setTimeout:w}};o.load=e})}),nh=ye((r,a)=>{pe(),me(),ge(),function(o,l){typeof r=="object"&&typeof a<"u"?l(r,rh()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.workerTimers={},o.workerTimersBroker))}(r,function(o,l){var c=function(d,p){var m=null;return function(){if(m!==null)return m;var b=new Blob([p],{type:"application/javascript; charset=utf-8"}),w=URL.createObjectURL(b);return m=d(w),setTimeout(function(){return URL.revokeObjectURL(w)}),m}},i=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,e=c(l.load,i),n=function(d){return e().clearInterval(d)},t=function(d){return e().clearTimeout(d)},s=function(){var d;return(d=e()).setInterval.apply(d,arguments)},u=function(){var d;return(d=e()).setTimeout.apply(d,arguments)};o.clearInterval=n,o.clearTimeout=t,o.setInterval=s,o.setTimeout=u})}),ih=ye(r=>{pe(),me(),ge();var a=r&&r.__createBinding||(Object.create?function(s,u,d,p){p===void 0&&(p=d);var m=Object.getOwnPropertyDescriptor(u,d);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(s,p,m)}:function(s,u,d,p){p===void 0&&(p=d),s[p]=u[d]}),o=r&&r.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),l=r&&r.__importStar||function(){var s=function(u){return s=Object.getOwnPropertyNames||function(d){var p=[];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(p[p.length]=m);return p},s(u)};return function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var p=s(u),m=0;m<p.length;m++)p[m]!=="default"&&a(d,u,p[m]);return o(d,u),d}}();Object.defineProperty(r,"__esModule",{value:!0});var c=l(Qr()),i=nh(),e={set:i.setInterval,clear:i.clearInterval},n={set:(s,u)=>setInterval(s,u),clear:s=>clearInterval(s)},t=s=>{switch(s){case"native":return n;case"worker":return e;case"auto":default:return c.default&&!c.isWebWorker&&!c.isReactNativeBrowser?e:n}};r.default=t}),Ds=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0});var o=a(ih()),l=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(c,i){this.destroyed=!1,this.client=c,this.timer=typeof i=="object"&&"set"in i&&"clear"in i?i:(0,o.default)(i),this.setKeepalive(c.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(c){if(c*=1e3,isNaN(c)||c<=0||c>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${c}`);this._keepalive=c,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${c}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let c=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+c,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};r.default=l}),Oi=ye(r=>{pe(),me(),ge();var a=r&&r.__createBinding||(Object.create?function(O,S,C,j){j===void 0&&(j=C);var Q=Object.getOwnPropertyDescriptor(S,C);(!Q||("get"in Q?!S.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(O,j,Q)}:function(O,S,C,j){j===void 0&&(j=C),O[j]=S[C]}),o=r&&r.__setModuleDefault||(Object.create?function(O,S){Object.defineProperty(O,"default",{enumerable:!0,value:S})}:function(O,S){O.default=S}),l=r&&r.__importStar||function(){var O=function(S){return O=Object.getOwnPropertyNames||function(C){var j=[];for(var Q in C)Object.prototype.hasOwnProperty.call(C,Q)&&(j[j.length]=Q);return j},O(S)};return function(S){if(S&&S.__esModule)return S;var C={};if(S!=null)for(var j=O(S),Q=0;Q<j.length;Q++)j[Q]!=="default"&&a(C,S,j[Q]);return o(C,S),C}}(),c=r&&r.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(r,"__esModule",{value:!0});var i=c(fu()),e=c(Tu()),n=c(Es()),t=or(),s=c(Ru()),u=l(Pu()),d=c(Ot()),p=c(Ss()),m=c(Xu()),b=cr(),w=eh(),_=c(Ds()),A=l(Qr()),y=globalThis.setImmediate||((...O)=>{let S=O.shift();(0,b.nextTick)(()=>{S(...O)})}),v={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},L=class Ri extends w.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(S,C){super(),this.options=C||{};for(let j in v)typeof this.options[j]>"u"?this.options[j]=v[j]:this.options[j]=C[j];this.log=this.options.log||(0,d.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Ri.VERSION),A.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",A.default?"browser":"node"),this.log("MqttClient :: options.protocol",C.protocol),this.log("MqttClient :: options.protocolVersion",C.protocolVersion),this.log("MqttClient :: options.username",C.username),this.log("MqttClient :: options.keepalive",C.keepalive),this.log("MqttClient :: options.reconnectPeriod",C.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",C.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",C.properties?C.properties.topicAliasMaximum:void 0),this.options.clientId=typeof C.clientId=="string"?C.clientId:Ri.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=C.protocolVersion===5&&C.customHandleAcks?C.customHandleAcks:(...j)=>{j[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=S,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new n.default:this.options.messageIdProvider,this.outgoingStore=C.outgoingStore||new p.default,this.incomingStore=C.incomingStore||new p.default,this.queueQoSZero=C.queueQoSZero===void 0?!0:C.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,C.properties&&C.properties.topicAliasMaximum>0&&(C.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new i.default(C.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:j}=this,Q=()=>{let X=j.shift();this.log("deliver :: entry %o",X);let ae=null;if(!X){this._resubscribe();return}ae=X.packet,this.log("deliver :: call _sendPacket for %o",ae);let R=!0;ae.messageId&&ae.messageId!==0&&(this.messageIdProvider.register(ae.messageId)||(R=!1)),R?this._sendPacket(ae,K=>{X.cb&&X.cb(K),Q()}):(this.log("messageId: %d has already used. The message is skipped and removed.",ae.messageId),Q())};this.log("connect :: sending queued packets"),Q()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(S,C){C()}handleMessage(S,C){C()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var S;let C=new t.Writable,j=e.default.parser(this.options),Q=null,X=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new p.default,this.outgoingStore=this.options.outgoingStore||new p.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),j.on("packet",W=>{this.log("parser :: on packet push to packets array."),X.push(W)});let ae=()=>{this.log("work :: getting next packet in queue");let W=X.shift();if(W)this.log("work :: packet pulled from queue"),(0,m.default)(this,W,R);else{this.log("work :: no packets in queue");let be=Q;Q=null,this.log("work :: done flag is %s",!!be),be&&be()}},R=()=>{if(X.length)(0,b.nextTick)(ae);else{let W=Q;Q=null,W()}};C._write=(W,be,ce)=>{Q=ce,this.log("writable stream :: parsing buffer"),j.parse(W),ae()};let K=W=>{this.log("streamErrorHandler :: error",W.message),W.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",W)):this.noop(W)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(C),this.stream.on("error",K),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let J={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(J.will=Object.assign(Object.assign({},this.options.will),{payload:(S=this.options.will)===null||S===void 0?void 0:S.payload})),this.topicAliasRecv&&(J.properties||(J.properties={}),this.topicAliasRecv&&(J.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(J),j.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let W=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(W)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(S,C,j,Q){this.log("publish :: message `%s` to topic `%s`",C,S);let{options:X}=this;typeof j=="function"&&(Q=j,j=null),j=j||{},j=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),j);let{qos:ae,retain:R,dup:K,properties:J,cbStorePut:W}=j;if(this._checkDisconnecting(Q))return this;let be=()=>{let ce=0;if((ae===1||ae===2)&&(ce=this._nextId(),ce===null))return this.log("No messageId left"),!1;let le={cmd:"publish",topic:S,payload:C,qos:ae,retain:R,messageId:ce,dup:K};switch(X.protocolVersion===5&&(le.properties=J),this.log("publish :: qos",ae),ae){case 1:case 2:this.outgoing[le.messageId]={volatile:!1,cb:Q||this.noop},this.log("MqttClient:publish: packet cmd: %s",le.cmd),this._sendPacket(le,void 0,W);break;default:this.log("MqttClient:publish: packet cmd: %s",le.cmd),this._sendPacket(le,Q,W);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!be())&&this._storeProcessingQueue.push({invoke:be,cbStorePut:j.cbStorePut,callback:Q}),this}publishAsync(S,C,j){return new Promise((Q,X)=>{this.publish(S,C,j,(ae,R)=>{ae?X(ae):Q(R)})})}subscribe(S,C,j){let Q=this.options.protocolVersion;typeof C=="function"&&(j=C),j=j||this.noop;let X=!1,ae=[];typeof S=="string"?(S=[S],ae=S):Array.isArray(S)?ae=S:typeof S=="object"&&(X=S.resubscribe,delete S.resubscribe,ae=Object.keys(S));let R=u.validateTopics(ae);if(R!==null)return y(j,new Error(`Invalid topic ${R}`)),this;if(this._checkDisconnecting(j))return this.log("subscribe: discconecting true"),this;let K={qos:0};Q===5&&(K.nl=!1,K.rap=!1,K.rh=0),C=Object.assign(Object.assign({},K),C);let J=C.properties,W=[],be=(le,de)=>{if(de=de||C,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,le)||this._resubscribeTopics[le].qos<de.qos||X){let $={topic:le,qos:de.qos};Q===5&&($.nl=de.nl,$.rap=de.rap,$.rh=de.rh,$.properties=J),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",$.topic,$.qos),W.push($)}};if(Array.isArray(S)?S.forEach(le=>{this.log("subscribe: array topic %s",le),be(le)}):Object.keys(S).forEach(le=>{this.log("subscribe: object topic %s, %o",le,S[le]),be(le,S[le])}),!W.length)return j(null,[]),this;let ce=()=>{let le=this._nextId();if(le===null)return this.log("No messageId left"),!1;let de={cmd:"subscribe",subscriptions:W,messageId:le};if(J&&(de.properties=J),this.options.resubscribe){this.log("subscribe :: resubscribe true");let $=[];W.forEach(se=>{if(this.options.reconnectPeriod>0){let I={qos:se.qos};Q===5&&(I.nl=se.nl||!1,I.rap=se.rap||!1,I.rh=se.rh||0,I.properties=se.properties),this._resubscribeTopics[se.topic]=I,$.push(se.topic)}}),this.messageIdToTopic[de.messageId]=$}return this.outgoing[de.messageId]={volatile:!0,cb($,se){if(!$){let{granted:I}=se;for(let re=0;re<I.length;re+=1)W[re].qos=I[re]}j($,W,se)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(de),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ce())&&this._storeProcessingQueue.push({invoke:ce,callback:j}),this}subscribeAsync(S,C){return new Promise((j,Q)=>{this.subscribe(S,C,(X,ae)=>{X?Q(X):j(ae)})})}unsubscribe(S,C,j){typeof S=="string"&&(S=[S]),typeof C=="function"&&(j=C),j=j||this.noop;let Q=u.validateTopics(S);if(Q!==null)return y(j,new Error(`Invalid topic ${Q}`)),this;if(this._checkDisconnecting(j))return this;let X=()=>{let ae=this._nextId();if(ae===null)return this.log("No messageId left"),!1;let R={cmd:"unsubscribe",messageId:ae,unsubscriptions:[]};return typeof S=="string"?R.unsubscriptions=[S]:Array.isArray(S)&&(R.unsubscriptions=S),this.options.resubscribe&&R.unsubscriptions.forEach(K=>{delete this._resubscribeTopics[K]}),typeof C=="object"&&C.properties&&(R.properties=C.properties),this.outgoing[R.messageId]={volatile:!0,cb:j},this.log("unsubscribe: call _sendPacket"),this._sendPacket(R),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!X())&&this._storeProcessingQueue.push({invoke:X,callback:j}),this}unsubscribeAsync(S,C){return new Promise((j,Q)=>{this.unsubscribe(S,C,(X,ae)=>{X?Q(X):j(ae)})})}end(S,C,j){this.log("end :: (%s)",this.options.clientId),(S==null||typeof S!="boolean")&&(j=j||C,C=S,S=!1),typeof C!="object"&&(j=j||C,C=null),this.log("end :: cb? %s",!!j),(!j||typeof j!="function")&&(j=this.noop);let Q=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(ae=>{this.outgoingStore.close(R=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),j){let K=ae||R;this.log("end :: closeStores: invoking callback with args"),j(K)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},X=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,S),this._cleanUp(S,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(Q)},C)};return this.disconnecting?(j(),this):(this._clearReconnect(),this.disconnecting=!0,!S&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,X,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),X()),this)}endAsync(S,C){return new Promise((j,Q)=>{this.end(S,C,X=>{X?Q(X):j()})})}removeOutgoingMessage(S){if(this.outgoing[S]){let{cb:C}=this.outgoing[S];this._removeOutgoingAndStoreMessage(S,()=>{C(new Error("Message removed"))})}return this}reconnect(S){this.log("client reconnect");let C=()=>{S?(this.options.incomingStore=S.incomingStore,this.options.outgoingStore=S.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new p.default,this.outgoingStore=this.options.outgoingStore||new p.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=C:C(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(S=>{this.outgoing[S].volatile&&typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(S=>{typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_removeTopicAliasAndRecoverTopicName(S){let C;S.properties&&(C=S.properties.topicAlias);let j=S.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",C,j),j.length===0){if(typeof C>"u")return new Error("Unregistered Topic Alias");if(j=this.topicAliasSend.getTopicByAlias(C),typeof j>"u")return new Error("Unregistered Topic Alias");S.topic=j}C&&delete S.properties.topicAlias}_checkDisconnecting(S){return this.disconnecting&&(S&&S!==this.noop?S(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(S,C,j={}){if(C&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",C)),this.log("_cleanUp :: forced? %s",S),S)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let Q=Object.assign({cmd:"disconnect"},j);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(Q,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),y(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),C&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",C),C())}_storeAndSend(S,C,j){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",S.cmd);let Q=S,X;if(Q.cmd==="publish"&&(Q=(0,s.default)(S),X=this._removeTopicAliasAndRecoverTopicName(Q),X))return C&&C(X);this.outgoingStore.put(Q,ae=>{if(ae)return C&&C(ae);j(),this._writePacket(S,C)})}_applyTopicAlias(S){if(this.options.protocolVersion===5&&S.cmd==="publish"){let C;S.properties&&(C=S.properties.topicAlias);let j=S.topic.toString();if(this.topicAliasSend)if(C){if(j.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",j,C),!this.topicAliasSend.put(j,C)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",j,C),new Error("Sending Topic Alias out of range")}else j.length!==0&&(this.options.autoAssignTopicAlias?(C=this.topicAliasSend.getAliasByTopic(j),C?(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",j,C)):(C=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(j,C),S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",j,C))):this.options.autoUseTopicAlias&&(C=this.topicAliasSend.getAliasByTopic(j),C&&(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",j,C))));else if(C)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",j,C),new Error("Sending Topic Alias out of range")}}_noop(S){this.log("noop ::",S)}_writePacket(S,C){this.log("_writePacket :: packet: %O",S),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",S),this.log("_writePacket :: writing to stream");let j=e.default.writeToStream(S,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",j),!j&&C&&C!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",C)):C&&(this.log("_writePacket :: invoking cb"),C())}_sendPacket(S,C,j,Q){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),j=j||this.noop,C=C||this.noop;let X=this._applyTopicAlias(S);if(X){C(X);return}if(!this.connected){if(S.cmd==="auth"){this._writePacket(S,C);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(S,C,j);return}if(Q){this._writePacket(S,C);return}switch(S.cmd){case"publish":break;case"pubrel":this._storeAndSend(S,C,j);return;default:this._writePacket(S,C);return}switch(S.qos){case 2:case 1:this._storeAndSend(S,C,j);break;case 0:default:this._writePacket(S,C);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(S,C,j){this.log("_storePacket :: packet: %o",S),this.log("_storePacket :: cb? %s",!!C),j=j||this.noop;let Q=S;if(Q.cmd==="publish"){Q=(0,s.default)(S);let ae=this._removeTopicAliasAndRecoverTopicName(Q);if(ae)return C&&C(ae)}let X=Q.qos||0;X===0&&this.queueQoSZero||Q.cmd!=="publish"?this.queue.push({packet:Q,cb:C}):X>0?(C=this.outgoing[Q.messageId]?this.outgoing[Q.messageId].cb:null,this.outgoingStore.put(Q,ae=>{if(ae)return C&&C(ae);j()})):C&&C(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new _.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(S=!1){this.keepaliveManager&&this.options.keepalive&&(S||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let S=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&S.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let C=0;C<S.length;C++){let j={};j[S[C]]=this._resubscribeTopics[S[C]],j.resubscribe=!0,this.subscribe(j,{properties:j[S[C]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(S){if(this.disconnected){this.emit("connect",S);return}this.connackPacket=S,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let C=()=>{let j=this.outgoingStore.createStream(),Q=()=>{j.destroy(),j=null,this._flushStoreProcessingQueue(),X()},X=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",Q),j.on("error",R=>{X(),this._flushStoreProcessingQueue(),this.removeListener("close",Q),this.emit("error",R)});let ae=()=>{if(!j)return;let R=j.read(1),K;if(!R){j.once("readable",ae);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[R.messageId]){ae();return}!this.disconnecting&&!this.reconnectTimer?(K=this.outgoing[R.messageId]?this.outgoing[R.messageId].cb:null,this.outgoing[R.messageId]={volatile:!1,cb(J,W){K&&K(J,W),ae()}},this._packetIdsDuringStoreProcessing[R.messageId]=!0,this.messageIdProvider.register(R.messageId)?this._sendPacket(R,void 0,void 0,!0):this.log("messageId: %d has already used.",R.messageId)):j.destroy&&j.destroy()};j.on("end",()=>{let R=!0;for(let K in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[K]){R=!1;break}this.removeListener("close",Q),R?(X(),this._invokeAllStoreProcessingQueue(),this.emit("connect",S)):C()}),ae()};C()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let S=this._storeProcessingQueue[0];if(S&&S.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let S of this._storeProcessingQueue)S.cbStorePut&&S.cbStorePut(new Error("Connection closed")),S.callback&&S.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(S,C){delete this.outgoing[S],this.outgoingStore.del({messageId:S},(j,Q)=>{C(j,Q),this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue()})}};L.VERSION=b.MQTTJS_VERSION,r.default=L}),oh=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=Us(),o=class{constructor(){this.numberAllocator=new a.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(l){return this.numberAllocator.use(l)}deallocate(l){this.numberAllocator.free(l)}clear(){this.numberAllocator.clear()}};r.default=o});function Yt(r){throw new RangeError(Ws[r])}function mo(r,a){let o=r.split("@"),l="";o.length>1&&(l=o[0]+"@",r=o[1]);let c=function(i,e){let n=[],t=i.length;for(;t--;)n[t]=e(i[t]);return n}((r=r.replace(Fs,".")).split("."),a).join(".");return l+c}function bo(r){let a=[],o=0,l=r.length;for(;o<l;){let c=r.charCodeAt(o++);if(c>=55296&&c<=56319&&o<l){let i=r.charCodeAt(o++);(64512&i)==56320?a.push(((1023&c)<<10)+(1023&i)+65536):(a.push(c),o--)}else a.push(c)}return a}var yo,wo,Fs,Ws,mt,Ar,fn,dn,pn,gn,Wt,sh=at(()=>{pe(),me(),ge(),yo=/^xn--/,wo=/[^\0-\x7E]/,Fs=/[\x2E\u3002\uFF0E\uFF61]/g,Ws={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},mt=Math.floor,Ar=String.fromCharCode,fn=function(r,a){return r+22+75*(r<26)-((a!=0)<<5)},dn=function(r,a,o){let l=0;for(r=o?mt(r/700):r>>1,r+=mt(r/a);r>455;l+=36)r=mt(r/35);return mt(l+36*r/(r+38))},pn=function(r){let a=[],o=r.length,l=0,c=128,i=72,e=r.lastIndexOf("-");e<0&&(e=0);for(let t=0;t<e;++t)r.charCodeAt(t)>=128&&Yt("not-basic"),a.push(r.charCodeAt(t));for(let t=e>0?e+1:0;t<o;){let s=l;for(let d=1,p=36;;p+=36){t>=o&&Yt("invalid-input");let m=(n=r.charCodeAt(t++))-48<10?n-22:n-65<26?n-65:n-97<26?n-97:36;(m>=36||m>mt((2147483647-l)/d))&&Yt("overflow"),l+=m*d;let b=p<=i?1:p>=i+26?26:p-i;if(m<b)break;let w=36-b;d>mt(2147483647/w)&&Yt("overflow"),d*=w}let u=a.length+1;i=dn(l-s,u,s==0),mt(l/u)>2147483647-c&&Yt("overflow"),c+=mt(l/u),l%=u,a.splice(l++,0,c)}var n;return String.fromCodePoint(...a)},gn=function(r){let a=[],o=(r=bo(r)).length,l=128,c=0,i=72;for(let t of r)t<128&&a.push(Ar(t));let e=a.length,n=e;for(e&&a.push("-");n<o;){let t=2147483647;for(let u of r)u>=l&&u<t&&(t=u);let s=n+1;t-l>mt((2147483647-c)/s)&&Yt("overflow"),c+=(t-l)*s,l=t;for(let u of r)if(u<l&&++c>2147483647&&Yt("overflow"),u==l){let d=c;for(let p=36;;p+=36){let m=p<=i?1:p>=i+26?26:p-i;if(d<m)break;let b=d-m,w=36-m;a.push(Ar(fn(m+b%w,0))),d=mt(b/w)}a.push(Ar(fn(d,0))),i=dn(c,s,n==e),c=0,++n}++c,++l}return a.join("")},Wt={version:"2.1.0",ucs2:{decode:bo,encode:r=>String.fromCodePoint(...r)},decode:pn,encode:gn,toASCII:function(r){return mo(r,function(a){return wo.test(a)?"xn--"+gn(a):a})},toUnicode:function(r){return mo(r,function(a){return yo.test(a)?pn(a.slice(4).toLowerCase()):a})}},Wt.decode,Wt.encode,Wt.toASCII,Wt.toUnicode,Wt.ucs2,Wt.version});function ah(r,a){return Object.prototype.hasOwnProperty.call(r,a)}var _o,sr,vo,wt,lh=at(()=>{pe(),me(),ge(),_o=function(r,a,o,l){a=a||"&",o=o||"=";var c={};if(typeof r!="string"||r.length===0)return c;var i=/\+/g;r=r.split(a);var e=1e3;l&&typeof l.maxKeys=="number"&&(e=l.maxKeys);var n=r.length;e>0&&n>e&&(n=e);for(var t=0;t<n;++t){var s,u,d,p,m=r[t].replace(i,"%20"),b=m.indexOf(o);b>=0?(s=m.substr(0,b),u=m.substr(b+1)):(s=m,u=""),d=decodeURIComponent(s),p=decodeURIComponent(u),ah(c,d)?Array.isArray(c[d])?c[d].push(p):c[d]=[c[d],p]:c[d]=p}return c},sr=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},vo=function(r,a,o,l){return a=a||"&",o=o||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(c){var i=encodeURIComponent(sr(c))+o;return Array.isArray(r[c])?r[c].map(function(e){return i+encodeURIComponent(sr(e))}).join(a):i+encodeURIComponent(sr(r[c]))}).join(a):l?encodeURIComponent(sr(l))+o+encodeURIComponent(sr(r)):""},wt={},wt.decode=wt.parse=_o,wt.encode=wt.stringify=vo,wt.decode,wt.encode,wt.parse,wt.stringify});function Pi(){throw new Error("setTimeout has not been defined")}function ji(){throw new Error("clearTimeout has not been defined")}function $s(r){if(Ct===setTimeout)return setTimeout(r,0);if((Ct===Pi||!Ct)&&setTimeout)return Ct=setTimeout,setTimeout(r,0);try{return Ct(r,0)}catch{try{return Ct.call(null,r,0)}catch{return Ct.call(this||er,r,0)}}}function uh(){tr&&Jt&&(tr=!1,Jt.length?vt=Jt.concat(vt):yr=-1,vt.length&&Vs())}function Vs(){if(!tr){var r=$s(uh);tr=!0;for(var a=vt.length;a;){for(Jt=vt,vt=[];++yr<a;)Jt&&Jt[yr].run();yr=-1,a=vt.length}Jt=null,tr=!1,function(o){if(xt===clearTimeout)return clearTimeout(o);if((xt===ji||!xt)&&clearTimeout)return xt=clearTimeout,clearTimeout(o);try{xt(o)}catch{try{return xt.call(null,o)}catch{return xt.call(this||er,o)}}}(r)}}function Eo(r,a){(this||er).fun=r,(this||er).array=a}function St(){}var So,Ct,xt,er,Ye,Jt,vt,tr,yr,ze,hh=at(()=>{pe(),me(),ge(),er=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Ye=So={},function(){try{Ct=typeof setTimeout=="function"?setTimeout:Pi}catch{Ct=Pi}try{xt=typeof clearTimeout=="function"?clearTimeout:ji}catch{xt=ji}}(),vt=[],tr=!1,yr=-1,Ye.nextTick=function(r){var a=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)a[o-1]=arguments[o];vt.push(new Eo(r,a)),vt.length!==1||tr||$s(Vs)},Eo.prototype.run=function(){(this||er).fun.apply(null,(this||er).array)},Ye.title="browser",Ye.browser=!0,Ye.env={},Ye.argv=[],Ye.version="",Ye.versions={},Ye.on=St,Ye.addListener=St,Ye.once=St,Ye.off=St,Ye.removeListener=St,Ye.removeAllListeners=St,Ye.emit=St,Ye.prependListener=St,Ye.prependOnceListener=St,Ye.listeners=function(r){return[]},Ye.binding=function(r){throw new Error("process.binding is not supported")},Ye.cwd=function(){return"/"},Ye.chdir=function(r){throw new Error("process.chdir is not supported")},Ye.umask=function(){return 0},ze=So,ze.addListener,ze.argv,ze.binding,ze.browser,ze.chdir,ze.cwd,ze.emit,ze.env,ze.listeners,ze.nextTick,ze.off,ze.on,ze.once,ze.prependListener,ze.prependOnceListener,ze.removeAllListeners,ze.removeListener,ze.title,ze.umask,ze.version,ze.versions});function ch(){if(Bi)return Mr;Bi=!0;var r=Mr={},a,o;function l(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=l}catch{a=l}try{typeof clearTimeout=="function"?o=clearTimeout:o=c}catch{o=c}})();function i(w){if(a===setTimeout)return setTimeout(w,0);if((a===l||!a)&&setTimeout)return a=setTimeout,setTimeout(w,0);try{return a(w,0)}catch{try{return a.call(null,w,0)}catch{return a.call(this||Qt,w,0)}}}function e(w){if(o===clearTimeout)return clearTimeout(w);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(w);try{return o(w)}catch{try{return o.call(null,w)}catch{return o.call(this||Qt,w)}}}var n=[],t=!1,s,u=-1;function d(){!t||!s||(t=!1,s.length?n=s.concat(n):u=-1,n.length&&p())}function p(){if(!t){var w=i(d);t=!0;for(var _=n.length;_;){for(s=n,n=[];++u<_;)s&&s[u].run();u=-1,_=n.length}s=null,t=!1,e(w)}}r.nextTick=function(w){var _=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)_[A-1]=arguments[A];n.push(new m(w,_)),n.length===1&&!t&&i(p)};function m(w,_){(this||Qt).fun=w,(this||Qt).array=_}m.prototype.run=function(){(this||Qt).fun.apply(null,(this||Qt).array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}return r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(w){return[]},r.binding=function(w){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(w){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},Mr}var Mr,Bi,Qt,He,Hs=at(()=>{pe(),me(),ge(),Mr={},Bi=!1,Qt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,He=ch(),He.platform="browser",He.addListener,He.argv,He.binding,He.browser,He.chdir,He.cwd,He.emit,He.env,He.listeners,He.nextTick,He.off,He.on,He.once,He.prependListener,He.prependOnceListener,He.removeAllListeners,He.removeListener,He.title,He.umask,He.version,He.versions});function fh(){if(Mi)return Lr;Mi=!0;var r=He;function a(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,e){for(var n="",t=0,s=-1,u=0,d,p=0;p<=i.length;++p){if(p<i.length)d=i.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(s===p-1||u===1))if(s!==p-1&&u===2){if(n.length<2||t!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var m=n.lastIndexOf("/");if(m!==n.length-1){m===-1?(n="",t=0):(n=n.slice(0,m),t=n.length-1-n.lastIndexOf("/")),s=p,u=0;continue}}else if(n.length===2||n.length===1){n="",t=0,s=p,u=0;continue}}e&&(n.length>0?n+="/..":n="..",t=2)}else n.length>0?n+="/"+i.slice(s+1,p):n=i.slice(s+1,p),t=p-s-1;s=p,u=0}else d===46&&u!==-1?++u:u=-1}return n}function l(i,e){var n=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+t:n+i+t:t}var c={resolve:function(){for(var i="",e=!1,n,t=arguments.length-1;t>=-1&&!e;t--){var s;t>=0?s=arguments[t]:(n===void 0&&(n=r.cwd()),s=n),a(s),s.length!==0&&(i=s+"/"+i,e=s.charCodeAt(0)===47)}return i=o(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(a(i),i.length===0)return".";var e=i.charCodeAt(0)===47,n=i.charCodeAt(i.length-1)===47;return i=o(i,!e),i.length===0&&!e&&(i="."),i.length>0&&n&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return a(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var n=arguments[e];a(n),n.length>0&&(i===void 0?i=n:i+="/"+n)}return i===void 0?".":c.normalize(i)},relative:function(i,e){if(a(i),a(e),i===e||(i=c.resolve(i),e=c.resolve(e),i===e))return"";for(var n=1;n<i.length&&i.charCodeAt(n)===47;++n);for(var t=i.length,s=t-n,u=1;u<e.length&&e.charCodeAt(u)===47;++u);for(var d=e.length,p=d-u,m=s<p?s:p,b=-1,w=0;w<=m;++w){if(w===m){if(p>m){if(e.charCodeAt(u+w)===47)return e.slice(u+w+1);if(w===0)return e.slice(u+w)}else s>m&&(i.charCodeAt(n+w)===47?b=w:w===0&&(b=0));break}var _=i.charCodeAt(n+w),A=e.charCodeAt(u+w);if(_!==A)break;_===47&&(b=w)}var y="";for(w=n+b+1;w<=t;++w)(w===t||i.charCodeAt(w)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+e.slice(u+b):(u+=b,e.charCodeAt(u)===47&&++u,e.slice(u))},_makeLong:function(i){return i},dirname:function(i){if(a(i),i.length===0)return".";for(var e=i.charCodeAt(0),n=e===47,t=-1,s=!0,u=i.length-1;u>=1;--u)if(e=i.charCodeAt(u),e===47){if(!s){t=u;break}}else s=!1;return t===-1?n?"/":".":n&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');a(i);var n=0,t=-1,s=!0,u;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var d=e.length-1,p=-1;for(u=i.length-1;u>=0;--u){var m=i.charCodeAt(u);if(m===47){if(!s){n=u+1;break}}else p===-1&&(s=!1,p=u+1),d>=0&&(m===e.charCodeAt(d)?--d===-1&&(t=u):(d=-1,t=p))}return n===t?t=p:t===-1&&(t=i.length),i.slice(n,t)}else{for(u=i.length-1;u>=0;--u)if(i.charCodeAt(u)===47){if(!s){n=u+1;break}}else t===-1&&(s=!1,t=u+1);return t===-1?"":i.slice(n,t)}},extname:function(i){a(i);for(var e=-1,n=0,t=-1,s=!0,u=0,d=i.length-1;d>=0;--d){var p=i.charCodeAt(d);if(p===47){if(!s){n=d+1;break}continue}t===-1&&(s=!1,t=d+1),p===46?e===-1?e=d:u!==1&&(u=1):e!==-1&&(u=-1)}return e===-1||t===-1||u===0||u===1&&e===t-1&&e===n+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return l("/",i)},parse:function(i){a(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var n=i.charCodeAt(0),t=n===47,s;t?(e.root="/",s=1):s=0;for(var u=-1,d=0,p=-1,m=!0,b=i.length-1,w=0;b>=s;--b){if(n=i.charCodeAt(b),n===47){if(!m){d=b+1;break}continue}p===-1&&(m=!1,p=b+1),n===46?u===-1?u=b:w!==1&&(w=1):u!==-1&&(w=-1)}return u===-1||p===-1||w===0||w===1&&u===p-1&&u===d+1?p!==-1&&(d===0&&t?e.base=e.name=i.slice(1,p):e.base=e.name=i.slice(d,p)):(d===0&&t?(e.name=i.slice(1,u),e.base=i.slice(1,p)):(e.name=i.slice(d,u),e.base=i.slice(d,p)),e.ext=i.slice(u,p)),d>0?e.dir=i.slice(0,d-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,Lr=c,Lr}var Lr,Mi,Li,dh=at(()=>{pe(),me(),ge(),Hs(),Lr={},Mi=!1,Li=fh()}),qs={};ur(qs,{URL:()=>ua,Url:()=>ia,default:()=>Ne,fileURLToPath:()=>zs,format:()=>oa,parse:()=>la,pathToFileURL:()=>Gs,resolve:()=>sa,resolveObject:()=>aa});function gt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function dr(r,a,o){if(r&&bt.isObject(r)&&r instanceof gt)return r;var l=new gt;return l.parse(r,a,o),l}function ph(){if(Ni)return Nr;Ni=!0;var r=ze;function a(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,e){for(var n="",t=0,s=-1,u=0,d,p=0;p<=i.length;++p){if(p<i.length)d=i.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(s===p-1||u===1))if(s!==p-1&&u===2){if(n.length<2||t!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var m=n.lastIndexOf("/");if(m!==n.length-1){m===-1?(n="",t=0):(n=n.slice(0,m),t=n.length-1-n.lastIndexOf("/")),s=p,u=0;continue}}else if(n.length===2||n.length===1){n="",t=0,s=p,u=0;continue}}e&&(n.length>0?n+="/..":n="..",t=2)}else n.length>0?n+="/"+i.slice(s+1,p):n=i.slice(s+1,p),t=p-s-1;s=p,u=0}else d===46&&u!==-1?++u:u=-1}return n}function l(i,e){var n=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+t:n+i+t:t}var c={resolve:function(){for(var i="",e=!1,n,t=arguments.length-1;t>=-1&&!e;t--){var s;t>=0?s=arguments[t]:(n===void 0&&(n=r.cwd()),s=n),a(s),s.length!==0&&(i=s+"/"+i,e=s.charCodeAt(0)===47)}return i=o(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(a(i),i.length===0)return".";var e=i.charCodeAt(0)===47,n=i.charCodeAt(i.length-1)===47;return i=o(i,!e),i.length===0&&!e&&(i="."),i.length>0&&n&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return a(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var n=arguments[e];a(n),n.length>0&&(i===void 0?i=n:i+="/"+n)}return i===void 0?".":c.normalize(i)},relative:function(i,e){if(a(i),a(e),i===e||(i=c.resolve(i),e=c.resolve(e),i===e))return"";for(var n=1;n<i.length&&i.charCodeAt(n)===47;++n);for(var t=i.length,s=t-n,u=1;u<e.length&&e.charCodeAt(u)===47;++u);for(var d=e.length,p=d-u,m=s<p?s:p,b=-1,w=0;w<=m;++w){if(w===m){if(p>m){if(e.charCodeAt(u+w)===47)return e.slice(u+w+1);if(w===0)return e.slice(u+w)}else s>m&&(i.charCodeAt(n+w)===47?b=w:w===0&&(b=0));break}var _=i.charCodeAt(n+w),A=e.charCodeAt(u+w);if(_!==A)break;_===47&&(b=w)}var y="";for(w=n+b+1;w<=t;++w)(w===t||i.charCodeAt(w)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+e.slice(u+b):(u+=b,e.charCodeAt(u)===47&&++u,e.slice(u))},_makeLong:function(i){return i},dirname:function(i){if(a(i),i.length===0)return".";for(var e=i.charCodeAt(0),n=e===47,t=-1,s=!0,u=i.length-1;u>=1;--u)if(e=i.charCodeAt(u),e===47){if(!s){t=u;break}}else s=!1;return t===-1?n?"/":".":n&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');a(i);var n=0,t=-1,s=!0,u;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var d=e.length-1,p=-1;for(u=i.length-1;u>=0;--u){var m=i.charCodeAt(u);if(m===47){if(!s){n=u+1;break}}else p===-1&&(s=!1,p=u+1),d>=0&&(m===e.charCodeAt(d)?--d===-1&&(t=u):(d=-1,t=p))}return n===t?t=p:t===-1&&(t=i.length),i.slice(n,t)}else{for(u=i.length-1;u>=0;--u)if(i.charCodeAt(u)===47){if(!s){n=u+1;break}}else t===-1&&(s=!1,t=u+1);return t===-1?"":i.slice(n,t)}},extname:function(i){a(i);for(var e=-1,n=0,t=-1,s=!0,u=0,d=i.length-1;d>=0;--d){var p=i.charCodeAt(d);if(p===47){if(!s){n=d+1;break}continue}t===-1&&(s=!1,t=d+1),p===46?e===-1?e=d:u!==1&&(u=1):e!==-1&&(u=-1)}return e===-1||t===-1||u===0||u===1&&e===t-1&&e===n+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return l("/",i)},parse:function(i){a(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var n=i.charCodeAt(0),t=n===47,s;t?(e.root="/",s=1):s=0;for(var u=-1,d=0,p=-1,m=!0,b=i.length-1,w=0;b>=s;--b){if(n=i.charCodeAt(b),n===47){if(!m){d=b+1;break}continue}p===-1&&(m=!1,p=b+1),n===46?u===-1?u=b:w!==1&&(w=1):u!==-1&&(w=-1)}return u===-1||p===-1||w===0||w===1&&u===p-1&&u===d+1?p!==-1&&(d===0&&t?e.base=e.name=i.slice(1,p):e.base=e.name=i.slice(d,p)):(d===0&&t?(e.name=i.slice(1,u),e.base=i.slice(1,p)):(e.name=i.slice(d,u),e.base=i.slice(d,p)),e.ext=i.slice(u,p)),d>0?e.dir=i.slice(0,d-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,Nr=c,Nr}function gh(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Fr?mh(r):bh(r)}function mh(r){let a=r.hostname,o=r.pathname;for(let l=0;l<o.length;l++)if(o[l]==="%"){let c=o.codePointAt(l+2)||32;if(o[l+1]==="2"&&c===102||o[l+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(Js,"\\"),o=decodeURIComponent(o),a!=="")return`\\\\${a}${o}`;{let l=o.codePointAt(1)|32,c=o[2];if(l<Qs||l>Zs||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function bh(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let a=r.pathname;for(let o=0;o<a.length;o++)if(a[o]==="%"){let l=a.codePointAt(o+2)||32;if(a[o+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(a)}function yh(r){let a=Ui.resolve(r),o=r.charCodeAt(r.length-1);(o===Ks||Fr&&o===Ys)&&a[a.length-1]!==Ui.sep&&(a+="/");let l=new URL("file://");return a.includes("%")&&(a=a.replace(Xs,"%25")),!Fr&&a.includes("\\")&&(a=a.replace(ea,"%5C")),a.includes(`
`)&&(a=a.replace(ta,"%0A")),a.includes("\r")&&(a=a.replace(ra,"%0D")),a.includes("	")&&(a=a.replace(na,"%09")),l.pathname=a,l}function zs(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Wr?wh(r):_h(r)}function wh(r){let a=r.hostname,o=r.pathname;for(let l=0;l<o.length;l++)if(o[l]==="%"){let c=o.codePointAt(l+2)||32;if(o[l+1]==="2"&&c===102||o[l+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(pa,"\\"),o=decodeURIComponent(o),a!=="")return`\\\\${a}${o}`;{let l=o.codePointAt(1)|32,c=o[2];if(l<fa||l>da||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function _h(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let a=r.pathname;for(let o=0;o<a.length;o++)if(a[o]==="%"){let l=a.codePointAt(o+2)||32;if(a[o+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(a)}function Gs(r){let a=Li.resolve(r),o=r.charCodeAt(r.length-1);(o===ca||Wr&&o===ha)&&a[a.length-1]!==Li.sep&&(a+="/");let l=new URL("file://");return a.includes("%")&&(a=a.replace(ga,"%25")),!Wr&&a.includes("\\")&&(a=a.replace(ma,"%5C")),a.includes(`
`)&&(a=a.replace(ba,"%0A")),a.includes("\r")&&(a=a.replace(ya,"%0D")),a.includes("	")&&(a=a.replace(wa,"%09")),l.pathname=a,l}var Ne,ko,bt,Ao,Co,xo,Io,Cr,mn,bn,yn,To,Oo,xr,Kt,Ir,Nr,Ni,Ui,Ro,Ys,Ks,Qs,Zs,Fr,Js,Xs,ea,ta,ra,na,Po,ia,oa,sa,aa,la,ua,ha,ca,fa,da,Wr,pa,ga,ma,ba,ya,wa,vh=at(()=>{pe(),me(),ge(),sh(),lh(),hh(),dh(),Hs(),Ne={},ko=Wt,bt={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Ne.parse=dr,Ne.resolve=function(r,a){return dr(r,!1,!0).resolve(a)},Ne.resolveObject=function(r,a){return r?dr(r,!1,!0).resolveObject(a):a},Ne.format=function(r){return bt.isString(r)&&(r=dr(r)),r instanceof gt?r.format():gt.prototype.format.call(r)},Ne.Url=gt,Ao=/^([a-z0-9.+-]+:)/i,Co=/:[0-9]*$/,xo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Io=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Cr=["'"].concat(Io),mn=["%","/","?",";","#"].concat(Cr),bn=["/","?","#"],yn=/^[+a-z0-9A-Z_-]{0,63}$/,To=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Oo={javascript:!0,"javascript:":!0},xr={javascript:!0,"javascript:":!0},Kt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ir=wt,gt.prototype.parse=function(r,a,o){if(!bt.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var l=r.indexOf("?"),c=l!==-1&&l<r.indexOf("#")?"?":"#",i=r.split(c);i[0]=i[0].replace(/\\/g,"/");var e=r=i.join(c);if(e=e.trim(),!o&&r.split("#").length===1){var n=xo.exec(e);if(n)return this.path=e,this.href=e,this.pathname=n[1],n[2]?(this.search=n[2],this.query=a?Ir.parse(this.search.substr(1)):this.search.substr(1)):a&&(this.search="",this.query={}),this}var t=Ao.exec(e);if(t){var s=(t=t[0]).toLowerCase();this.protocol=s,e=e.substr(t.length)}if(o||t||e.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=e.substr(0,2)==="//";!u||t&&xr[t]||(e=e.substr(2),this.slashes=!0)}if(!xr[t]&&(u||t&&!Kt[t])){for(var d,p,m=-1,b=0;b<bn.length;b++)(w=e.indexOf(bn[b]))!==-1&&(m===-1||w<m)&&(m=w);for((p=m===-1?e.lastIndexOf("@"):e.lastIndexOf("@",m))!==-1&&(d=e.slice(0,p),e=e.slice(p+1),this.auth=decodeURIComponent(d)),m=-1,b=0;b<mn.length;b++){var w;(w=e.indexOf(mn[b]))!==-1&&(m===-1||w<m)&&(m=w)}m===-1&&(m=e.length),this.host=e.slice(0,m),e=e.slice(m),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var A=this.hostname.split(/\./),y=(b=0,A.length);b<y;b++){var v=A[b];if(v&&!v.match(yn)){for(var L="",O=0,S=v.length;O<S;O++)v.charCodeAt(O)>127?L+="x":L+=v[O];if(!L.match(yn)){var C=A.slice(0,b),j=A.slice(b+1),Q=v.match(To);Q&&(C.push(Q[1]),j.unshift(Q[2])),j.length&&(e="/"+j.join(".")+e),this.hostname=C.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=ko.toASCII(this.hostname));var X=this.port?":"+this.port:"",ae=this.hostname||"";this.host=ae+X,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),e[0]!=="/"&&(e="/"+e))}if(!Oo[s])for(b=0,y=Cr.length;b<y;b++){var R=Cr[b];if(e.indexOf(R)!==-1){var K=encodeURIComponent(R);K===R&&(K=escape(R)),e=e.split(R).join(K)}}var J=e.indexOf("#");J!==-1&&(this.hash=e.substr(J),e=e.slice(0,J));var W=e.indexOf("?");if(W!==-1?(this.search=e.substr(W),this.query=e.substr(W+1),a&&(this.query=Ir.parse(this.query)),e=e.slice(0,W)):a&&(this.search="",this.query={}),e&&(this.pathname=e),Kt[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){X=this.pathname||"";var be=this.search||"";this.path=X+be}return this.href=this.format(),this},gt.prototype.format=function(){var r=this.auth||"";r&&(r=(r=encodeURIComponent(r)).replace(/%3A/i,":"),r+="@");var a=this.protocol||"",o=this.pathname||"",l=this.hash||"",c=!1,i="";this.host?c=r+this.host:this.hostname&&(c=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(c+=":"+this.port)),this.query&&bt.isObject(this.query)&&Object.keys(this.query).length&&(i=Ir.stringify(this.query));var e=this.search||i&&"?"+i||"";return a&&a.substr(-1)!==":"&&(a+=":"),this.slashes||(!a||Kt[a])&&c!==!1?(c="//"+(c||""),o&&o.charAt(0)!=="/"&&(o="/"+o)):c||(c=""),l&&l.charAt(0)!=="#"&&(l="#"+l),e&&e.charAt(0)!=="?"&&(e="?"+e),a+c+(o=o.replace(/[?#]/g,function(n){return encodeURIComponent(n)}))+(e=e.replace("#","%23"))+l},gt.prototype.resolve=function(r){return this.resolveObject(dr(r,!1,!0)).format()},gt.prototype.resolveObject=function(r){if(bt.isString(r)){var a=new gt;a.parse(r,!1,!0),r=a}for(var o=new gt,l=Object.keys(this),c=0;c<l.length;c++){var i=l[c];o[i]=this[i]}if(o.hash=r.hash,r.href==="")return o.href=o.format(),o;if(r.slashes&&!r.protocol){for(var e=Object.keys(r),n=0;n<e.length;n++){var t=e[n];t!=="protocol"&&(o[t]=r[t])}return Kt[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(r.protocol&&r.protocol!==o.protocol){if(!Kt[r.protocol]){for(var s=Object.keys(r),u=0;u<s.length;u++){var d=s[u];o[d]=r[d]}return o.href=o.format(),o}if(o.protocol=r.protocol,r.host||xr[r.protocol])o.pathname=r.pathname;else{for(var p=(r.pathname||"").split("/");p.length&&!(r.host=p.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),p[0]!==""&&p.unshift(""),p.length<2&&p.unshift(""),o.pathname=p.join("/")}if(o.search=r.search,o.query=r.query,o.host=r.host||"",o.auth=r.auth,o.hostname=r.hostname||r.host,o.port=r.port,o.pathname||o.search){var m=o.pathname||"",b=o.search||"";o.path=m+b}return o.slashes=o.slashes||r.slashes,o.href=o.format(),o}var w=o.pathname&&o.pathname.charAt(0)==="/",_=r.host||r.pathname&&r.pathname.charAt(0)==="/",A=_||w||o.host&&r.pathname,y=A,v=o.pathname&&o.pathname.split("/")||[],L=(p=r.pathname&&r.pathname.split("/")||[],o.protocol&&!Kt[o.protocol]);if(L&&(o.hostname="",o.port=null,o.host&&(v[0]===""?v[0]=o.host:v.unshift(o.host)),o.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(p[0]===""?p[0]=r.host:p.unshift(r.host)),r.host=null),A=A&&(p[0]===""||v[0]==="")),_)o.host=r.host||r.host===""?r.host:o.host,o.hostname=r.hostname||r.hostname===""?r.hostname:o.hostname,o.search=r.search,o.query=r.query,v=p;else if(p.length)v||(v=[]),v.pop(),v=v.concat(p),o.search=r.search,o.query=r.query;else if(!bt.isNullOrUndefined(r.search))return L&&(o.hostname=o.host=v.shift(),(Q=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=Q.shift(),o.host=o.hostname=Q.shift())),o.search=r.search,o.query=r.query,bt.isNull(o.pathname)&&bt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!v.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var O=v.slice(-1)[0],S=(o.host||r.host||v.length>1)&&(O==="."||O==="..")||O==="",C=0,j=v.length;j>=0;j--)(O=v[j])==="."?v.splice(j,1):O===".."?(v.splice(j,1),C++):C&&(v.splice(j,1),C--);if(!A&&!y)for(;C--;C)v.unshift("..");!A||v[0]===""||v[0]&&v[0].charAt(0)==="/"||v.unshift(""),S&&v.join("/").substr(-1)!=="/"&&v.push("");var Q,X=v[0]===""||v[0]&&v[0].charAt(0)==="/";return L&&(o.hostname=o.host=X?"":v.length?v.shift():"",(Q=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=Q.shift(),o.host=o.hostname=Q.shift())),(A=A||o.host&&v.length)&&!X&&v.unshift(""),v.length?o.pathname=v.join("/"):(o.pathname=null,o.path=null),bt.isNull(o.pathname)&&bt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=r.auth||o.auth,o.slashes=o.slashes||r.slashes,o.href=o.format(),o},gt.prototype.parseHost=function(){var r=this.host,a=Co.exec(r);a&&((a=a[0])!==":"&&(this.port=a.substr(1)),r=r.substr(0,r.length-a.length)),r&&(this.hostname=r)},Ne.Url,Ne.format,Ne.resolve,Ne.resolveObject,Nr={},Ni=!1,Ui=ph(),Ro=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ne.URL=typeof URL<"u"?URL:null,Ne.pathToFileURL=yh,Ne.fileURLToPath=gh,Ne.Url,Ne.format,Ne.resolve,Ne.resolveObject,Ne.URL,Ys=92,Ks=47,Qs=97,Zs=122,Fr=Ro==="win32",Js=/\//g,Xs=/%/g,ea=/\\/g,ta=/\n/g,ra=/\r/g,na=/\t/g,Po=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ne.URL=typeof URL<"u"?URL:null,Ne.pathToFileURL=Gs,Ne.fileURLToPath=zs,ia=Ne.Url,oa=Ne.format,sa=Ne.resolve,aa=Ne.resolveObject,la=Ne.parse,ua=Ne.URL,ha=92,ca=47,fa=97,da=122,Wr=Po==="win32",pa=/\//g,ga=/%/g,ma=/\\/g,ba=/\n/g,ya=/\r/g,wa=/\t/g}),Eh=ye((r,a)=>{pe(),me(),ge(),a.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Ki=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferedDuplex=void 0,r.writev=l;var a=or(),o=(et(),De(Xe));function l(i,e){let n=new Array(i.length);for(let t=0;t<i.length;t++)typeof i[t].chunk=="string"?n[t]=o.Buffer.from(i[t].chunk,"utf8"):n[t]=i[t].chunk;this._write(o.Buffer.concat(n),"binary",e)}var c=class extends a.Duplex{constructor(i,e,n){super({objectMode:!0}),this.proxy=e,this.socket=n,this.writeQueue=[],i.objectMode||(this._writev=l.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",t=>{!this.destroyed&&this.readable&&this.push(t)})}_read(i){this.proxy.read(i)}_write(i,e,n){this.isSocketOpen?this.writeToProxy(i,e,n):this.writeQueue.push({chunk:i,encoding:e,cb:n})}_final(i){this.writeQueue=[],this.proxy.end(i)}_destroy(i,e){this.writeQueue=[],this.proxy.destroy(),e(i)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(i,e,n){this.proxy.write(i,e)===!1?this.proxy.once("drain",n):n()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:i,encoding:e,cb:n}=this.writeQueue.shift();this.writeToProxy(i,e,n)}}};r.BufferedDuplex=c}),Tr=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(r,"__esModule",{value:!0}),r.streamBuilder=r.browserStreamBuilder=void 0;var o=(et(),De(Xe)),l=a(Eh()),c=a(Ot()),i=or(),e=a(Qr()),n=Ki(),t=(0,c.default)("mqttjs:ws"),s=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function u(A,y){let v=`${A.protocol}://${A.hostname}:${A.port}${A.path}`;return typeof A.transformWsUrl=="function"&&(v=A.transformWsUrl(v,A,y)),v}function d(A){let y=A;return A.port||(A.protocol==="wss"?y.port=443:y.port=80),A.path||(y.path="/"),A.wsOptions||(y.wsOptions={}),!e.default&&!A.forceNativeWebSocket&&A.protocol==="wss"&&s.forEach(v=>{Object.prototype.hasOwnProperty.call(A,v)&&!Object.prototype.hasOwnProperty.call(A.wsOptions,v)&&(y.wsOptions[v]=A[v])}),y}function p(A){let y=d(A);if(y.hostname||(y.hostname=y.host),!y.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let v=new URL(document.URL);y.hostname=v.hostname,y.port||(y.port=Number(v.port))}return y.objectMode===void 0&&(y.objectMode=!(y.binary===!0||y.binary===void 0)),y}function m(A,y,v){t("createWebSocket"),t(`protocol: ${v.protocolId} ${v.protocolVersion}`);let L=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt";t(`creating new Websocket for url: ${y} and protocol: ${L}`);let O;return v.createWebsocket?O=v.createWebsocket(y,[L],v):O=new l.default(y,[L],v.wsOptions),O}function b(A,y){let v=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt",L=u(y,A),O;return y.createWebsocket?O=y.createWebsocket(L,[v],y):O=new WebSocket(L,[v]),O.binaryType="arraybuffer",O}var w=(A,y)=>{t("streamBuilder");let v=d(y);v.hostname=v.hostname||v.host||"localhost";let L=u(v,A),O=m(A,L,v),S=l.default.createWebSocketStream(O,v.wsOptions);return S.url=L,O.on("close",()=>{S.destroy()}),S};r.streamBuilder=w;var _=(A,y)=>{t("browserStreamBuilder");let v,L=p(y).browserBufferSize||1024*512,O=y.browserBufferTimeout||1e3,S=!y.objectMode,C=b(A,y),j=X(y,W,be);y.objectMode||(j._writev=n.writev.bind(j)),j.on("close",()=>{C.close()});let Q=typeof C.addEventListener<"u";C.readyState===C.OPEN?(v=j,v.socket=C):(v=new n.BufferedDuplex(y,j,C),Q?C.addEventListener("open",ae):C.onopen=ae),Q?(C.addEventListener("close",R),C.addEventListener("error",K),C.addEventListener("message",J)):(C.onclose=R,C.onerror=K,C.onmessage=J);function X(ce,le,de){let $=new i.Transform({objectMode:ce.objectMode});return $._write=le,$._flush=de,$}function ae(){t("WebSocket onOpen"),v instanceof n.BufferedDuplex&&v.socketReady()}function R(ce){t("WebSocket onClose",ce),v.end(),v.destroy()}function K(ce){t("WebSocket onError",ce);let le=new Error("WebSocket error");le.event=ce,v.destroy(le)}async function J(ce){if(!j||j.destroyed||!j.readable)return;let{data:le}=ce;le instanceof ArrayBuffer?le=o.Buffer.from(le):le instanceof Blob?le=o.Buffer.from(await new Response(le).arrayBuffer()):le=o.Buffer.from(le,"utf8"),j.push(le)}function W(ce,le,de){if(C.bufferedAmount>L){setTimeout(W,O,ce,le,de);return}S&&typeof ce=="string"&&(ce=o.Buffer.from(ce,"utf8"));try{C.send(ce)}catch($){return de($)}de()}function be(ce){C.close(),ce()}return v};r.browserStreamBuilder=_}),Qi={};ur(Qi,{Server:()=>qe,Socket:()=>qe,Stream:()=>qe,_createServerHandle:()=>qe,_normalizeArgs:()=>qe,_setSimultaneousAccepts:()=>qe,connect:()=>qe,createConnection:()=>qe,createServer:()=>qe,default:()=>_a,isIP:()=>qe,isIPv4:()=>qe,isIPv6:()=>qe});function qe(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var _a,va=at(()=>{pe(),me(),ge(),_a={_createServerHandle:qe,_normalizeArgs:qe,_setSimultaneousAccepts:qe,connect:qe,createConnection:qe,createServer:qe,isIP:qe,isIPv4:qe,isIPv6:qe,Server:qe,Socket:qe,Stream:qe}}),Ea=ye((r,a)=>{pe(),me(),ge(),a.exports={}}),jo=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(r,"__esModule",{value:!0});var o=a((va(),De(Qi))),l=a(Ot()),c=a(Ea()),i=(0,l.default)("mqttjs:tcp"),e=(n,t)=>{if(t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",t.socksProxy)return(0,c.default)(t.hostname,t.port,t.socksProxy,{timeout:t.socksTimeout});let{port:s,path:u}=t,d=t.hostname;return i("port %d and host %s",s,d),o.default.createConnection({port:s,host:d,path:u})};r.default=e}),Sa={};ur(Sa,{default:()=>ka});var ka,Sh=at(()=>{pe(),me(),ge(),ka={}}),Bo=ye(r=>{pe(),me(),ge();var a=r&&r.__rest||function(u,d){var p={};for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&d.indexOf(m)<0&&(p[m]=u[m]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,m=Object.getOwnPropertySymbols(u);b<m.length;b++)d.indexOf(m[b])<0&&Object.prototype.propertyIsEnumerable.call(u,m[b])&&(p[m[b]]=u[m[b]]);return p},o=r&&r.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0});var l=o((Sh(),De(Sa))),c=o((va(),De(Qi))),i=o(Ot()),e=o(Ea()),n=(0,i.default)("mqttjs:tls");function t(u){let{host:d,port:p,socksProxy:m}=u,b=a(u,["host","port","socksProxy"]);return l.default.connect(m?Object.assign(Object.assign({},b),{socket:(0,e.default)(d,p,m,{timeout:u.socksTimeout})}):u)}var s=(u,d)=>{d.port=d.port||8883,d.host=d.hostname||d.host||"localhost",c.default.isIP(d.host)===0&&(d.servername=d.host),d.rejectUnauthorized=d.rejectUnauthorized!==!1,delete d.path,n("port %d host %s rejectUnauthorized %b",d.port,d.host,d.rejectUnauthorized);let p=t(d);p.on("secureConnect",()=>{d.rejectUnauthorized&&!p.authorized?p.emit("error",new Error("TLS not authorized")):p.removeListener("error",m)});function m(b){d.rejectUnauthorized&&u.emit("error",b),p.end()}return p.on("error",m),p};r.default=s}),Mo=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=(et(),De(Xe)),o=or(),l=Ki(),c,i,e;function n(){let p=new o.Transform;return p._write=(m,b,w)=>{c.send({data:m.buffer,success(){w()},fail(_){w(new Error(_))}})},p._flush=m=>{c.close({success(){m()}})},p}function t(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function s(p,m){let b=p.protocol==="wxs"?"wss":"ws",w=`${b}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(w=`${b}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(w=p.transformWsUrl(w,p,m)),w}function u(){c.onOpen(()=>{e.socketReady()}),c.onMessage(p=>{let{data:m}=p;m instanceof ArrayBuffer?m=a.Buffer.from(m):m=a.Buffer.from(m,"utf8"),i.push(m)}),c.onClose(()=>{e.emit("close"),e.end(),e.destroy()}),c.onError(p=>{let m=new Error(p.errMsg);e.destroy(m)})}var d=(p,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let b=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";t(m);let w=s(m,p);c=wx.connectSocket({url:w,protocols:[b]}),i=n(),e=new l.BufferedDuplex(m,i,c),e._destroy=(A,y)=>{c.close({success(){y&&y(A)}})};let _=e.destroy;return e.destroy=(A,y)=>(e.destroy=_,setTimeout(()=>{c.close({fail(){e._destroy(A,y)}})},0),e),u(),e};r.default=d}),Lo=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=(et(),De(Xe)),o=or(),l=Ki(),c,i,e,n=!1;function t(){let m=new o.Transform;return m._write=(b,w,_)=>{c.sendSocketMessage({data:b.buffer,success(){_()},fail(){_(new Error)}})},m._flush=b=>{c.closeSocket({success(){b()}})},m}function s(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function u(m,b){let w=m.protocol==="alis"?"wss":"ws",_=`${w}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(_=`${w}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(_=m.transformWsUrl(_,m,b)),_}function d(){n||(n=!0,c.onSocketOpen(()=>{e.socketReady()}),c.onSocketMessage(m=>{if(typeof m.data=="string"){let b=a.Buffer.from(m.data,"base64");i.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let w=b.result;w instanceof ArrayBuffer?w=a.Buffer.from(w):w=a.Buffer.from(w,"utf8"),i.push(w)}),b.readAsArrayBuffer(m.data)}}),c.onSocketClose(()=>{e.end(),e.destroy()}),c.onSocketError(m=>{e.destroy(m)}))}var p=(m,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let w=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";s(b);let _=u(b,m);return c=b.my,c.connectSocket({url:_,protocols:w}),i=t(),e=new l.BufferedDuplex(b,i,c),d(),e};r.default=p}),kh=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0}),r.connectAsync=u;var o=a(Ot()),l=a((vh(),De(qs))),c=a(Oi()),i=a(Qr());typeof(Le==null?void 0:Le.nextTick)!="function"&&(Le.nextTick=setImmediate);var e=(0,o.default)("mqttjs"),n=null;function t(d){let p;d.auth&&(p=d.auth.match(/^(.+):(.+)$/),p?(d.username=p[1],d.password=p[2]):d.username=d.auth)}function s(d,p){var m,b,w;if(e("connecting to an MQTT broker..."),typeof d=="object"&&!p&&(p=d,d=""),p=p||{},d&&typeof d=="string"){let y=l.default.parse(d,!0),v={};if(y.port!=null&&(v.port=Number(y.port)),v.host=y.hostname,v.query=y.query,v.auth=y.auth,v.protocol=y.protocol,v.path=y.path,p=Object.assign(Object.assign({},v),p),!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||((m=p.protocol)===null||m===void 0?void 0:m.includes("+unix")),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!(!((b=p.protocol)===null||b===void 0)&&b.startsWith("ws"))&&!(!((w=p.protocol)===null||w===void 0)&&w.startsWith("wx"))&&delete p.path,t(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),i.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Le<"u"&&(p.socksProxy=Le.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(n||(n={},!i.default&&!p.forceNativeWebSocket?(n.ws=Tr().streamBuilder,n.wss=Tr().streamBuilder,n.mqtt=jo().default,n.tcp=jo().default,n.ssl=Bo().default,n.tls=n.ssl,n.mqtts=Bo().default):(n.ws=Tr().browserStreamBuilder,n.wss=Tr().browserStreamBuilder,n.wx=Mo().default,n.wxs=Mo().default,n.ali=Lo().default,n.alis=Lo().default)),!n[p.protocol]){let y=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((v,L)=>y&&L%2===0?!1:typeof n[v]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function _(y){return p.servers&&((!y._reconnectCount||y._reconnectCount===p.servers.length)&&(y._reconnectCount=0),p.host=p.servers[y._reconnectCount].host,p.port=p.servers[y._reconnectCount].port,p.protocol=p.servers[y._reconnectCount].protocol?p.servers[y._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,y._reconnectCount++),e("calling streambuilder for",p.protocol),n[p.protocol](y,p)}let A=new c.default(_,p);return A.on("error",()=>{}),A}function u(d,p,m=!0){return new Promise((b,w)=>{let _=s(d,p),A={connect:v=>{y(),b(_)},end:()=>{y(),b(_)},error:v=>{y(),_.end(),w(v)}};m===!1&&(A.close=()=>{A.error(new Error("Couldn't connect to server"))});function y(){Object.keys(A).forEach(v=>{_.off(v,A[v])})}Object.keys(A).forEach(v=>{_.on(v,A[v])})})}r.default=s}),No=ye(r=>{pe(),me(),ge();var a=r&&r.__createBinding||(Object.create?function(m,b,w,_){_===void 0&&(_=w);var A=Object.getOwnPropertyDescriptor(b,w);(!A||("get"in A?!b.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(m,_,A)}:function(m,b,w,_){_===void 0&&(_=w),m[_]=b[w]}),o=r&&r.__setModuleDefault||(Object.create?function(m,b){Object.defineProperty(m,"default",{enumerable:!0,value:b})}:function(m,b){m.default=b}),l=r&&r.__importStar||function(){var m=function(b){return m=Object.getOwnPropertyNames||function(w){var _=[];for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(_[_.length]=A);return _},m(b)};return function(b){if(b&&b.__esModule)return b;var w={};if(b!=null)for(var _=m(b),A=0;A<_.length;A++)_[A]!=="default"&&a(w,b,_[A]);return o(w,b),w}}(),c=r&&r.__exportStar||function(m,b){for(var w in m)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&a(b,m,w)},i=r&&r.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=r.KeepaliveManager=r.UniqueMessageIdProvider=r.DefaultMessageIdProvider=r.Store=r.MqttClient=r.connectAsync=r.connect=r.Client=void 0;var e=i(Oi());r.MqttClient=e.default;var n=i(Es());r.DefaultMessageIdProvider=n.default;var t=i(oh());r.UniqueMessageIdProvider=t.default;var s=i(Ss());r.Store=s.default;var u=l(kh());r.connect=u.default,Object.defineProperty(r,"connectAsync",{enumerable:!0,get:function(){return u.connectAsync}});var d=i(Ds());r.KeepaliveManager=d.default,r.Client=e.default,c(Oi(),r),c(cr(),r);var p=Kr();Object.defineProperty(r,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),Ah=ye(r=>{pe(),me(),ge();var a=r&&r.__createBinding||(Object.create?function(e,n,t,s){s===void 0&&(s=t);var u=Object.getOwnPropertyDescriptor(n,t);(!u||("get"in u?!n.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,s,u)}:function(e,n,t,s){s===void 0&&(s=t),e[s]=n[t]}),o=r&&r.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),l=r&&r.__importStar||function(){var e=function(n){return e=Object.getOwnPropertyNames||function(t){var s=[];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(s[s.length]=u);return s},e(n)};return function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var s=e(n),u=0;u<s.length;u++)s[u]!=="default"&&a(t,n,s[u]);return o(t,n),t}}(),c=r&&r.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&a(n,e,t)};Object.defineProperty(r,"__esModule",{value:!0});var i=l(No());r.default=i,c(No(),r)});const Ch=Ah();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/var Ur={exports:{}},xh=Ur.exports,Uo;function Ih(){return Uo||(Uo=1,function(r,a){(function(o,l){r.exports=l()})(xh,function(){return function(o,l,c){o=o||{};var i=l.prototype,e={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function n(s,u,d,p){return i.fromToBase(s,u,d,p)}c.en.relativeTime=e,i.fromToBase=function(s,u,d,p,m){for(var b,w,_,A=d.$locale().relativeTime||e,y=o.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],v=y.length,L=0;L<v;L+=1){var O=y[L];O.d&&(b=p?c(s).diff(d,O.d,!0):d.diff(s,O.d,!0));var S=(o.rounding||Math.round)(Math.abs(b));if(_=b>0,S<=O.r||!O.r){S<=1&&L>0&&(O=y[L-1]);var C=A[O.l];m&&(S=m(""+S)),w=typeof C=="string"?C.replace("%d",S):C(S,u,O.l,_);break}}if(u)return w;var j=_?A.future:A.past;return typeof j=="function"?j(w):j.replace("%s",w)},i.to=function(s,u){return n(s,u,this,!0)},i.from=function(s,u){return n(s,u,this)};var t=function(s){return s.$u?c.utc():c()};i.toNow=function(s){return this.to(t(this),s)},i.fromNow=function(s){return this.from(t(this),s)}}})}(Ur)),Ur.exports}var Th=Ih();const Oh=cl(Th);lr.extend(Oh);const Yh=()=>{const{data:o,isSuccess:l}=fl({limit:5,offset:0}),c=Wi(i=>i.authStore);return q.jsx(q.Fragment,{children:l&&o&&c.mqtt&&c.user&&q.jsx(Rh,{lastNotifications:o.data,newOffset:5,limitValue:5,config:{mqtt:c.mqtt,user:c.user}})})},Rh=({lastNotifications:r,limitValue:a,newOffset:o,config:l})=>{const[c,i]=Be.useState(r),[e]=Be.useState(a),[n,t]=Be.useState(o),[s,u]=Be.useState(!0),[d,p]=Be.useState(!0),[m,b]=Be.useState(!1),[w,_]=Be.useState(null),[A,y]=Be.useState(!1),[v]=dl(),[L]=pl(),O=Be.useRef(null),S=Be.useRef(null),C=Be.useRef(null),[j,Q]=Be.useState(null),X=de=>{Q(de.currentTarget)},ae=()=>{Q(null)},R=!!j,K=R?"notification-popover":void 0,J=Be.useCallback(async()=>{if(!(m||!s||w)){b(!0),_(null);try{const de=await L({limit:e,offset:n,unread:d?void 0:!0}).unwrap();de.data.length===0?u(!1):(i($=>[...$,...de.data]),t($=>$+e),u(de.data.length===e))}catch{_("Error al cargar notificaciones")}finally{b(!1)}}},[n,e,d,m,s,w]),W=async de=>{try{if(c.some(F=>F.n_uuid===de.n_uuid))return;const se=lr().format("YYYY-MM-DD HH:mm:ss"),I=El(),re={nu_id:I,u_id:0,n_uuid:de.n_uuid,fecha_creacion:"",fecha_entrega:se,fecha_lectura:"",leido:0,notificacion:{n_id:0,n_uuid:de.n_uuid,evento:de.evento,titulo:de.titulo,mensaje:de.mensaje,data:de.data,fecha:de.fecha}};if(yl.success(()=>q.jsx(dt,{children:q.jsx(Je,{variant:"body1",children:re.notificacion.mensaje})})),i(F=>[re,...F]),(await v({nu_id:I,fecha_entrega:se,n_uuid:de.n_uuid})).error)return}catch($){console.error($)}},be=de=>{i($=>$.map(se=>se.nu_id===de?{...se,leido:1}:se))},ce=Be.useMemo(()=>c.reduce((de,$)=>{const se=lr($.notificacion.fecha).format("YYYY-MM-DD");return de[se]||(de[se]=[]),de[se].push($),de},{}),[c]),le=Be.useMemo(()=>c.filter(de=>de.leido===0).length,[c]);return Be.useEffect(()=>{y(!0)},[r]),Be.useEffect(()=>(O.current&&O.current.disconnect(),R&&S.current&&(O.current=new IntersectionObserver(de=>{de[0].isIntersecting&&J()},{root:C.current,threshold:.1}),O.current.observe(S.current)),()=>{O.current&&O.current.disconnect()}),[J,R]),Ph({onMessage:W,isInitNotification:A,config:{topic:l.user.rl_id===gl.Invitado?"notifications/contrata/#":"notifications/admin",mqtt:l.mqtt,user_id:l.user.u_id}}),q.jsxs(q.Fragment,{children:[q.jsx(Wo,{onClick:X,"aria-describedby":K,children:q.jsx(Rl,{color:"error",className:"cursor-pointer",variant:"dot",overlap:"circular",invisible:le===0,anchorOrigin:{vertical:"top",horizontal:"right"},children:q.jsx(Kl,{})})}),q.jsx(ml,{id:K,open:R,anchorEl:j,onClose:ae,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},disablePortal:!0,slotProps:{paper:{sx:{backgroundColor:"transparent",backgroundImage:"inherit",border:"none",boxShadow:"none",mt:de=>`calc((${de.mixins.toolbar.minHeight}px - 40px) / 2)`}}},children:q.jsx(Vo,{sx:{boxShadow:"0px 4px 18px 0px rgba(42, 55, 60, 0.16)",":hover":{boxShadow:"0px 4px 18px 0px rgba(42, 55, 60, 0.16)"}},children:q.jsxs(it,{spacing:1,children:[q.jsxs(it,{spacing:1,px:2,pt:2,children:[q.jsx(Je,{variant:"h5",children:"Notificaciones"}),q.jsxs(it,{direction:"row",spacing:2,children:[q.jsx(Do,{selected:d===!0,onClick:()=>{p(!0),i([]),t(0),u(!0)},children:"Todo"}),q.jsx(Do,{selected:d===!1,onClick:()=>{p(!1),i([]),t(0),u(!0)},children:"No leídos"})]})]}),q.jsxs("div",{ref:C,style:{maxHeight:"400px",width:"400px",overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:10},children:[Object.entries(ce).map(([de,$],se)=>q.jsxs(it,{spacing:1,children:[q.jsx(Je,{variant:"subtitle1",color:"textPrimary",children:Ho(`${lr().format("YYYY-MM-DD")===de?"Hoy, ":""}${lr(de,"YYYY-MM-DD").format("dddd D [de] MMMM , YYYY")}`)}),q.jsx(it,{spacing:1,children:$.map((I,re,we)=>q.jsx(jh,{data:I,hasDivider:re<we.length-1,onReadNotification:be},I.nu_id))})]},se)),q.jsx("div",{ref:S}),m&&q.jsx(Je,{variant:"body1",color:"textSecondary",children:"Cargando más notificaciones..."}),w&&q.jsxs(Je,{variant:"body1",color:"error",children:["Error: ",String(w)]}),!s&&!m&&!w&&q.jsx(Je,{variant:"body1",color:"textSecondary",children:"No existen registros adicionales de notificaciones."})]},JSON.stringify(d))]})})})]})},Ph=({onMessage:r,isInitNotification:a,config:o})=>{Be.useEffect(()=>{if(!a)return;const l=Ch.connect("ws://",{port:o.mqtt.port,username:o.mqtt.user,password:o.mqtt.password,clean:!1,clientId:`web_client_${o.user_id}`});return l.on("connect",()=>{l.subscribe(o.topic,{qos:1},c=>{c&&console.error(c)})}),l.on("message",(c,i)=>{try{const e=JSON.parse(i.toString());r(e)}catch(e){console.error(e)}}),l.on("error",c=>{console.error(c)}),()=>{l.end(!0,c=>{c&&console.error(c)})}},[a])},jh=({hasDivider:r,data:a,onReadNotification:o})=>{const[l,c]=Be.useState(a),[i]=bl(),e=async()=>{if(l.leido===0)try{await i({nu_id:l.nu_id}).unwrap(),c(n=>({...n,leido:1})),o(l.nu_id)}catch(n){console.error(n)}};return q.jsxs(q.Fragment,{children:[q.jsxs(it,{direction:"row",spacing:1,padding:1,sx:{borderRadius:"10px",cursor:l.leido===0?"pointer":void 0,":hover":{backgroundColor:"tertiary.opacityLight"}},onClick:e,children:[Bh(l.notificacion.evento),q.jsxs(it,{spacing:.5,flex:1,children:[q.jsx(Je,{variant:"body2",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:Ho(lr(l.notificacion.fecha).fromNow())}),q.jsx(Je,{variant:"subtitle1",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:l.notificacion.titulo}),q.jsx(Je,{variant:"body1",children:l.notificacion.mensaje})]}),l.leido===0&&q.jsx(dt,{width:12,height:12,sx:{borderRadius:"50%",backgroundColor:"primary.700"}})]}),r&&q.jsx($o,{})]})},Bh=r=>{switch(r){case"ticket.not.attended":return q.jsx(dt,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"warning.opacityDarker",color:"text.warning"},children:q.jsx(an,{})});case"ticket.requested":return q.jsx(dt,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"tertiary.opacityDarker",color:"text.tertiary"},children:q.jsx(an,{})});case"ticket.cancelled":return q.jsx(dt,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:q.jsx(an,{isCanceled:!0})});case"alarm.camera.disconnected":return q.jsx(dt,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:q.jsx(vl,{})});case"alarm.controller.disconnected":return q.jsx(dt,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:q.jsx(Ql,{})});case"alarm.pinentrada.activated":return q.jsx(dt,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:q.jsx(ao,{})});default:return q.jsx(dt,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"tertiary.opacityDarker",color:"text.tertiary"},children:q.jsx(ao,{})})}},Do=({children:r,selected:a,onClick:o})=>q.jsx(dt,{sx:{py:1,px:2,borderRadius:"10px",border:"1px solid",borderColor:"custom.outlineBoder",":hover":{...a&&{backgroundColor:"primary.opacityDark"},...!a&&{backgroundColor:"primary.opacityLight"}},...a&&{backgroundColor:"primary.opacityDark",borderColor:"transparent"},cursor:"pointer"},onClick:o,children:q.jsx(Je,{variant:"subtitle1",color:"textPrimary",sx:{whiteSpace:"nowrap"},children:r})}),Kh=()=>q.jsx(wl,{position:"bottom-right"});export{Vh as A,Kh as C,zh as F,Yh as N,Gh as P,qh as T,Hh as a};
