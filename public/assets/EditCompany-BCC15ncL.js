import{r as d,ea as I,j as r,bB as T,B as P,bC as k,bD as B,T as n,E as b,bE as S,p as y,dM as G,eb as F,ac as _}from"./index-B2MwQ28r.js";import{D as K,G as V,g as W}from"./SearchIcon-nGvQXR5y.js";const q=({openDialog:j,handleCloseDialog:s,companyName:i,id:f})=>{const[x,v]=d.useState(""),[l,a]=d.useState(""),[p,{isLoading:C}]=I(),u=async()=>{var t;if(a(""),x===i)try{(t=(await p({id:f})).data)!=null&&t.success&&s(),s()}catch(c){a(W(c))}else a("El nombre no coincide. Intenta de nuevo.")};return r.jsxs(T,{open:j,onClose:t=>{t.preventDefault(),t.stopPropagation(),s()},sx:{"& .MuiDialogPaper-root":{borderRadius:"24px !important"}},children:[r.jsx(P,{display:"flex",justifyContent:"center",mt:2,children:r.jsx("img",{src:K,alt:"Eliminar icono",style:{width:48,height:48}})}),r.jsxs(k,{sx:t=>({...t.typography.h5,textAlign:"center",color:t.palette.text.primary}),children:["¿Estás seguro de eliminar a la empresa ",i,"?"]}),r.jsxs(B,{children:[r.jsxs(n,{sx:t=>({...t.typography.body2,textAlign:"center",color:t.palette.text.secondary}),children:["Al eliminar ",i,", también se borrarán los empleados, cuentas y tarjetas asignadas."]}),r.jsxs(n,{sx:t=>({marginTop:2,color:t.palette.text.primary}),children:['Para confirmar, escribe: "',i,'"']}),r.jsx(b,{fullWidth:!0,margin:"dense",variant:"outlined",placeholder:"Escribe el nombre de la empresa",value:x,onChange:t=>{a(""),v(t.target.value),a("")},error:!!l,helperText:l}),l&&r.jsx(V,{item:!0,xs:12,children:r.jsx(n,{variant:"body2",sx:t=>({color:t.palette.error.light}),children:l})})]}),r.jsxs(S,{children:[r.jsx(y,{onClick:s,color:"inherit",sx:{"&:hover":{backgroundColor:t=>t.palette.tertiary.opacityLighter}},children:"Cancelar"}),r.jsx(y,{onClick:u,color:"error",disabled:x!==i||C,variant:"contained",sx:{"&:hover":{backgroundColor:t=>t.palette.error.light},"&:disabled":{backgroundColor:t=>t.palette.action.disabledBackground}},children:"Eliminar"})]})]})},z=({openDialogEdit:j,handleCloseDialogEdit:s,industry:i,description:f,companyName:x,id:v})=>{const[l,a]=d.useState(""),[p,C]=d.useState(i||""),[u,t]=d.useState(f||""),[c,L]=d.useState(x||""),[o,m]=d.useState({name:"",description:"",industry:""}),{data:h,isError:E,isLoading:D}=G(),[M,{isLoading:R}]=F(),w=()=>{const e={name:"",description:"",industry:""};let g=!0;return(!c||c.trim().length<4)&&(e.name="El nombre debe tener al menos 4 caracteres.",g=!1),(!u||u.trim().length<10)&&(e.description="La descripción debe tener al menos 10 caracteres.",g=!1),(!p||Number(p)===0)&&(e.industry="Selecciona un rubro válido.",g=!1),m(e),g},A=async()=>{if(w())try{await M({id:v,data:{contrata:c,descripcion:u,r_id:Number(p)}}).unwrap(),s()}catch(e){a(W(e))}};return r.jsxs(T,{open:j,onClose:s,fullWidth:!0,maxWidth:"sm",sx:{"& .MuiDialogPaper-root":{borderRadius:"24px",padding:2}},onClick:e=>e.stopPropagation(),children:[r.jsx(k,{sx:e=>({...e.typography.h5,textAlign:"start",color:e.palette.text.primary}),children:"Editar empresa"}),r.jsxs(B,{children:[r.jsx(n,{sx:e=>({mt:1,mb:.5,color:e.palette.text.primary,fontWeight:500}),children:"Nombre*"}),r.jsx(b,{fullWidth:!0,variant:"outlined",placeholder:"Nombre de la empresa",value:c,onChange:e=>{a(""),L(e.target.value),m({...o,name:""})},error:!!o.name,helperText:o.name}),r.jsx(n,{sx:e=>({mt:2,mb:.5,color:e.palette.text.primary,fontWeight:500}),children:"Rubro*"}),r.jsx(b,{select:!0,fullWidth:!0,variant:"outlined",value:p,onChange:e=>{a(""),C(e.target.value),m({...o,industry:""})},error:!!o.industry,helperText:o.industry,disabled:D||E,children:h&&!D&&!E&&(h==null?void 0:h.map(e=>r.jsx(_,{value:e.r_id,children:e.rubro},e.r_id)))}),r.jsx(n,{sx:e=>({mt:2,mb:.5,color:e.palette.text.primary,fontWeight:500}),children:"Descripción*"}),r.jsx(b,{fullWidth:!0,variant:"outlined",multiline:!0,minRows:3,placeholder:"Descripción de la empresa",value:u,onChange:e=>{a(""),t(e.target.value),m({...o,description:""})},error:!!o.description,helperText:o.description}),r.jsx(n,{variant:"body2",sx:e=>({mt:2,color:e.palette.text.disabled}),children:"*Campos obligatorios de completar"}),l&&r.jsx(V,{item:!0,xs:12,children:r.jsx(n,{variant:"body2",sx:e=>({color:e.palette.error.light}),children:l})})]}),r.jsxs(S,{sx:{px:3,pb:2},children:[r.jsx(y,{onClick:s,color:"inherit",sx:{textTransform:"none"},children:"Cancelar"}),r.jsx(y,{onClick:A,variant:"contained",disabled:R,sx:{textTransform:"none","&:hover":{backgroundColor:"#00C7E3"}},children:"Guardar cambios"})]})]})};export{q as D,z as E};
