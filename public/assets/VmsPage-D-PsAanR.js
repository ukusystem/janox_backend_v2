const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YouTube-CYiy-f6y.js","assets/index-B2MwQ28r.js","assets/index-CxjVi7H7.css","assets/SoundCloud-CElY0Svc.js","assets/Vimeo-3AVO-IKK.js","assets/Mux-CyARi_c6.js","assets/Facebook-ConogkoP.js","assets/Streamable-CTIs07ht.js","assets/Wistia-7fmOMgIC.js","assets/Twitch-CFQpDeUd.js","assets/DailyMotion-dKWbUAs1.js","assets/Mixcloud-CcY0iMEd.js","assets/Vidyard-CQ_F0CI1.js","assets/Kaltura-BCyAbPTC.js","assets/FilePlayer-CYmZI9zp.js","assets/Preview-Dxb3Vrmp.js"])))=>i.map(i=>d[i]);
import{c as _e,j as e,S as F,B as U,a as L,u as G,ax as mt,m as de,L as ae,h as oe,i as Q,b6 as Ut,b7 as Nt,F as N,b8 as zt,r as M,b9 as ft,n as Ne,ba as pe,bb as $t,bc as Y,bd as te,be as K,bf as xt,s as gt,I as Zt,l as k,T as $,A as Ft,E as yt,bg as _t,a8 as W,aH as Ce,a5 as Ct,ac as jt,D as je,a9 as fe,ad as wt,bh as Bt,bi as Ke,p as me,bj as qt,aI as ze,aL as we,w as xe,bk as Ae,bl as Wt,bm as Yt,f as Gt,bn as Xt,bo as ye,bp as Kt,bq as vt,aF as z,br as Ue,bs as Jt,bt,bu as ge,bv as Qt,bw as er,bx as tr,by as ce,bz as rr,bA as nr,bB as sr,bC as ir,bD as ar,bE as or,bF as lr,bG as cr,bH as Se,bI as $e,bJ as X,bK as dr,bL as ur,bM as Oe,bN as pr,bO as re}from"./index-B2MwQ28r.js";import{S as hr}from"./SearchIcon-CAoQ-mMC.js";import{S as Ze}from"./SpeedCameraIcon-DoAZ-uPr.js";import{A as Pt,a as St,C as mr}from"./ArrowDropUp-DpvEkpl6.js";import{L as ee}from"./ListItemButton-Dybxl5ag.js";import{A as fr}from"./Autocomplete-DO-HpUXO.js";import{A as xr,D as gr}from"./DeleteIcon-6yAmFfzU.js";import{c as Ot}from"./capitalizeFirstLetter-D3I3Kuho.js";import{T as Mt,a as Je}from"./TimePicker-DwOuA5l1.js";import{C as Fe}from"./Card-Czpwx8nj.js";import{C as Be}from"./CardContent-CM-ZmfFR.js";import{S as ie}from"./StreamPlayer-D6eUqJhJ.js";import{C as kt}from"./CardHeader--yi8JTB-.js";const yr=_e(e.jsx("path",{d:"M6 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m-3 .5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5M6 5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m15 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5M14 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1m0-3.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5m-11 10c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5m7 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5m0-17c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5M10 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1m0 5.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m8 .5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m3 8.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5M14 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m0 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5m-4-12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0 8.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1m4-4.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-4c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5"}),"BlurOnRounded"),_r=_e([e.jsx("circle",{cx:"12",cy:"12",r:"3"},"0"),e.jsx("path",{d:"M20 4h-3.17l-1.24-1.35c-.37-.41-.91-.65-1.47-.65H9.88c-.56 0-1.1.24-1.48.65L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-8 13c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAltRounded"),Cr=_e(e.jsx("path",{d:"M6 13h12c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1s.45 1 1 1m-2 4h12c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1m3-9c0 .55.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1H8c-.55 0-1 .45-1 1"}),"ClearAllRounded"),jr=_e(e.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.16 0-7.74 2.42-9.44 5.93-.32.67.04 1.47.75 1.71.59.2 1.23-.08 1.5-.64 1.3-2.66 4.03-4.5 7.19-4.5 1.95 0 3.73.72 5.12 1.88l-1.91 1.91c-.63.63-.19 1.71.7 1.71H21c.55 0 1-.45 1-1V9.41c0-.89-1.08-1.34-1.71-.71z"}),"RedoRounded"),wr=({...r})=>e.jsx(F,{...r,viewBox:"0 0 24 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_5378_35558",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_5378_35558)",children:e.jsx("path",{d:"M21 7V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H17L21 7ZM19 7.85L16.15 5H5V19H19V7.85ZM12 18C12.8333 18 13.5417 17.7083 14.125 17.125C14.7083 16.5417 15 15.8333 15 15C15 14.1667 14.7083 13.4583 14.125 12.875C13.5417 12.2917 12.8333 12 12 12C11.1667 12 10.4583 12.2917 9.875 12.875C9.29167 13.4583 9 14.1667 9 15C9 15.8333 9.29167 16.5417 9.875 17.125C10.4583 17.7083 11.1667 18 12 18ZM6 10H15V6H6V10Z",fill:"currentColor"})})]})}),qe=({...r})=>e.jsx(F,{...r,viewBox:"0 0 24 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_5378_34157",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("path",{d:"M24 0L24 24L-1.04907e-06 24L0 -1.04907e-06L24 0Z",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_5378_34157)",children:e.jsx("path",{d:"M3 5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3L19 3C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5L21 19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21L5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19L3 5ZM11.45 5C11.6333 5.3 11.7708 5.62083 11.8625 5.9625C11.9542 6.30417 12 6.65 12 7L12 17C12 17.35 11.9542 17.6958 11.8625 18.0375C11.7708 18.3792 11.6333 18.7 11.45 19L19 19L19 5L11.45 5ZM5 5L5 19L8 19C8.55 19 9.02083 18.8042 9.4125 18.4125C9.80417 18.0208 10 17.55 10 17L10 7C10 6.45 9.80417 5.97917 9.4125 5.5875C9.02083 5.19583 8.55 5 8 5L5 5Z",fill:"currentColor"})})]})}),vr=({...r})=>e.jsx(F,{...r,viewBox:"0 0 24 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_5378_21",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_5378_21)",children:e.jsx("path",{d:"M5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5ZM5 15H19V5H5V15ZM5 17V19H19V17H5Z",fill:"currentColor"})})]})}),br=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2799_6911",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2799_6911)",children:e.jsx("path",{d:"M12 20C11.45 20 10.9792 19.8042 10.5875 19.4125C10.1958 19.0208 10 18.55 10 18C10 17.45 10.1958 16.9792 10.5875 16.5875C10.9792 16.1958 11.45 16 12 16C12.55 16 13.0208 16.1958 13.4125 16.5875C13.8042 16.9792 14 17.45 14 18C14 18.55 13.8042 19.0208 13.4125 19.4125C13.0208 19.8042 12.55 20 12 20ZM12 14C11.45 14 10.9792 13.8042 10.5875 13.4125C10.1958 13.0208 10 12.55 10 12C10 11.45 10.1958 10.9792 10.5875 10.5875C10.9792 10.1958 11.45 10 12 10C12.55 10 13.0208 10.1958 13.4125 10.5875C13.8042 10.9792 14 11.45 14 12C14 12.55 13.8042 13.0208 13.4125 13.4125C13.0208 13.8042 12.55 14 12 14ZM12 8C11.45 8 10.9792 7.80417 10.5875 7.4125C10.1958 7.02083 10 6.55 10 6C10 5.45 10.1958 4.97917 10.5875 4.5875C10.9792 4.19583 11.45 4 12 4C12.55 4 13.0208 4.19583 13.4125 4.5875C13.8042 4.97917 14 5.45 14 6C14 6.55 13.8042 7.02083 13.4125 7.4125C13.0208 7.80417 12.55 8 12 8Z",fill:"currentColor"})})]})}),It=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2799_7036",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2799_7036)",children:e.jsx("path",{d:"M19 21L12 14L9.65 16.35C9.78333 16.6 9.875 16.8667 9.925 17.15C9.975 17.4333 10 17.7167 10 18C10 19.1 9.60833 20.0417 8.825 20.825C8.04167 21.6083 7.1 22 6 22C4.9 22 3.95833 21.6083 3.175 20.825C2.39167 20.0417 2 19.1 2 18C2 16.9 2.39167 15.9583 3.175 15.175C3.95833 14.3917 4.9 14 6 14C6.28333 14 6.56667 14.025 6.85 14.075C7.13333 14.125 7.4 14.2167 7.65 14.35L10 12L7.65 9.65C7.4 9.78333 7.13333 9.875 6.85 9.925C6.56667 9.975 6.28333 10 6 10C4.9 10 3.95833 9.60833 3.175 8.825C2.39167 8.04167 2 7.1 2 6C2 4.9 2.39167 3.95833 3.175 3.175C3.95833 2.39167 4.9 2 6 2C7.1 2 8.04167 2.39167 8.825 3.175C9.60833 3.95833 10 4.9 10 6C10 6.28333 9.975 6.56667 9.925 6.85C9.875 7.13333 9.78333 7.4 9.65 7.65L22 20V21H19ZM15 11L13 9L19 3H22V4L15 11ZM6 8C6.55 8 7.02083 7.80417 7.4125 7.4125C7.80417 7.02083 8 6.55 8 6C8 5.45 7.80417 4.97917 7.4125 4.5875C7.02083 4.19583 6.55 4 6 4C5.45 4 4.97917 4.19583 4.5875 4.5875C4.19583 4.97917 4 5.45 4 6C4 6.55 4.19583 7.02083 4.5875 7.4125C4.97917 7.80417 5.45 8 6 8ZM12 12.5C12.1333 12.5 12.25 12.45 12.35 12.35C12.45 12.25 12.5 12.1333 12.5 12C12.5 11.8667 12.45 11.75 12.35 11.65C12.25 11.55 12.1333 11.5 12 11.5C11.8667 11.5 11.75 11.55 11.65 11.65C11.55 11.75 11.5 11.8667 11.5 12C11.5 12.1333 11.55 12.25 11.65 12.35C11.75 12.45 11.8667 12.5 12 12.5ZM6 20C6.55 20 7.02083 19.8042 7.4125 19.4125C7.80417 19.0208 8 18.55 8 18C8 17.45 7.80417 16.9792 7.4125 16.5875C7.02083 16.1958 6.55 16 6 16C5.45 16 4.97917 16.1958 4.5875 16.5875C4.19583 16.9792 4 17.45 4 18C4 18.55 4.19583 19.0208 4.5875 19.4125C4.97917 19.8042 5.45 20 6 20Z",fill:"currentColor"})})]})}),Pr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2802_24425",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2802_24425)",children:e.jsx("path",{d:"M8 19V5L19 12L8 19ZM10 15.35L15.25 12L10 8.65V15.35Z",fill:"currentColor"})})]})}),Sr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2802_24986",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2802_24986)",children:e.jsx("path",{d:"M13 19V5H19V19H13ZM5 19V5H11V19H5ZM15 17H17V7H15V17ZM7 17H9V7H7V17Z",fill:"currentColor"})})]})}),Dt=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_6854_58795",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_6854_58795)",children:e.jsx("path",{d:"M16.5 18V6H18.5V18H16.5ZM5.5 18V6L14.5 12L5.5 18ZM7.5 14.25L10.9 12L7.5 9.75V14.25Z",fill:"currentColor"})})]})}),Et=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_6854_58796",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_6854_58796)",children:e.jsx("path",{d:"M5.5 18V6H7.5V18H5.5ZM18.5 18L9.5 12L18.5 6V18ZM16.5 14.25V9.75L13.1 12L16.5 14.25Z",fill:"currentColor"})})]})}),Tt=({open:r,position:t,width:n,height:l,children:d})=>e.jsx(e.Fragment,{children:e.jsx(U,{sx:{backgroundColor:"background.default",transition:"transform 0.3s ease-in-out",display:r?void 0:"none",zIndex:999,width:t==="left"||t==="right"?n?`${n}px`:void 0:"100%",height:t==="top"||t==="bottom"?l?`${l}px`:void 0:"100%",top:t==="left"||t==="right"?0:void 0,left:t==="top"||t==="bottom"?0:void 0,[t]:0,transform:r?"translateX(0) translateY(0)":t==="left"?"translateX(-100%)":t==="right"?"translateX(100%)":t==="top"?"translateY(-100%)":"translateY(100%)"},children:d})}),Or=({contextMenuRef:r,children:t})=>{const n=L(f=>f.menuCam),l=L(f=>f.streamStore),d=G(),a=()=>{const f=n.data,o=l.gridItemIndex;if(f&&f.length>0&&typeof o=="number"&&o>-1){d(Nt({fromIndex:o,newStreams:f}));const{ctrl_id:x,cmr_id:u,tc_id:s,descripcion:_}=f[0];d(N({camera:{ctrl_id:x,cmr_id:u,tc_id:s,descripcion:_},openManagementDrawer:!0}))}},h=e.jsxs(U,{sx:{zIndex:2e3,top:`${n.position.y}px`,left:`${n.position.x+15}px`,visibility:n.toogled?"visible":"hidden",position:"fixed"},ref:r,children:[e.jsx(mt,{children:e.jsx(de,{children:e.jsx(ae,{disablePadding:!0,children:e.jsxs(ee,{onClick:a,children:[e.jsx(oe,{children:e.jsx(yr,{})}),e.jsx(Q,{primary:`Mostrar ${n.title}`})]})})})}),t]});return Ut.createPortal(h,document.body)},Mr=()=>{const r=L(u=>u.streamStore),t=L(u=>u.vmsSlice),{records:n}=L(u=>u.vmsStore),{isSuccess:l,data:d}=zt(),a=M.useMemo(()=>{let u={};return l&&d&&(u={id:"group-cameras-control",title:"Camaras y/o Control",type:"group",children:[{id:"collapse-cameras",title:"Camaras",type:"collapse",children:Object.values(d).map(s=>{const{region:_,rgn_id:C,controllers:v}=s,i=Object.values(v).map(m=>{const{ctrl_id:c,nodo:p,camaras:g}=m,y=g.map(w=>({id:`cam-item-${w.cmr_id}`,title:w.descripcion,type:"item",icon:Ze,data:[w]}));return{id:`item-nodo-${c}`,title:p,type:"collapse",children:y,data:m.camaras}});return{id:`callapse-cam-reg-${C}`,title:_,type:"collapse",children:i,data:Object.values(v).flatMap(m=>m.camaras)}}),data:Object.values(d).flatMap(s=>Object.values(s.controllers)).flatMap(s=>s.camaras)}]}),u},[l,d]),h=M.useRef(null),f=G(),o=(u,s)=>{if(u.preventDefault(),h.current){const _=u.clientX,C=u.clientY;s.data&&f($t({position:{x:_,y:C},toogled:!0,title:s.title,data:s.data}))}},x=u=>{if(u.data===void 0)return;const{ctrl_id:s,descripcion:_,cmr_id:C,tc_id:v}=u.data[0];switch(r.managementStep){case Y.InLive:r.isSelected&&r.gridItemIndex!==void 0&&r.gridItemIndex>-1&&r.gridItemIndex in t.streams&&(f(xt({index:r.gridItemIndex,newStream:{ctrl_id:s,descripcion:_,cmr_id:C,tc_id:v}})),f(N({camera:{ctrl_id:s,cmr_id:C,tc_id:v,descripcion:_},openManagementDrawer:!0})));break;case Y.Records:n.cutHls||f(K({camera:{ctrl_id:s,cmr_id:C,tc_id:v,descripcion:_}}));break;case Y.Photos:f(te({camera:{ctrl_id:s,cmr_id:C,tc_id:v,descripcion:_}}));break}};return M.useEffect(()=>{const u=s=>{h.current&&(h.current.contains(s.target)||f(pe()))};return document.addEventListener("click",u),()=>{document.removeEventListener("click",u)}}),M.useEffect(()=>{l&&d&&f(ft({allCameras:d}))},[l,d]),e.jsx(e.Fragment,{children:e.jsxs(Ne,{sx:{maxWidth:"100%",maxHeight:"100%"},children:[e.jsx(de,{disablePadding:!0,children:a.children&&a.children[0]&&a.children[0].children&&a.children[0].children.map((u,s)=>e.jsx(Qe,{title:u.title??"Titulo no definido",divider:!0,onClick:()=>{f(pe())},onContextMenu:_=>{f(pe()),o(_,u)},children:u.children&&u.children.map((_,C)=>e.jsx(Qe,{title:_.title??"Titulo no definido",divider:!0,isController:!0,onClick:()=>{f(pe())},onContextMenu:v=>{f(pe()),o(v,_)},children:_.children&&_.children.map((v,i)=>e.jsxs(ee,{sx:{pl:6},onDoubleClick:()=>x(v),children:[v.icon&&e.jsx(oe,{sx:{minWidth:40},children:e.jsx(v.icon,{})}),e.jsx(Q,{primary:v.title,color:"primary",slotProps:{primary:{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}})]},v.id??i))},_.id??C))},u.id??s))}),e.jsx(Or,{contextMenuRef:h})]})})},Qe=({children:r,title:t,divider:n,isController:l,onClick:d,onContextMenu:a})=>{const[h,f]=M.useState(!1),o=x=>{f(!h),d&&d(x)};return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{onClick:o,onContextMenu:a,sx:{px:3,backgroundColor:h?l?"tertiary.opacityMain":"primary.opacityLight":"background.default",color:"text.primary",":hover":{color:"text.primary",backgroundColor:h?l?"tertiary.opacityMain":"primary.opacityLight":"tertiary.opacityLight"}},divider:!h&&n,children:[e.jsx(Q,{primary:t,color:"primary",slotProps:{primary:{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}}),h?e.jsx(Pt,{}):e.jsx(St,{})]}),e.jsx(mr,{in:h,timeout:"auto",unmountOnExit:!0,sx:{...h&&{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"divider"}},children:r})]})},q=gt(({isSelected:r,...t})=>e.jsx(Zt,{...t,size:"large"}))(({theme:r,isSelected:t})=>({color:r.palette.text.primary,backgroundColor:t?r.palette.tertiary.opacityLight:"transparent","&:hover":{backgroundColor:r.palette.tertiary.opacityLight}})),kr=()=>{const r=L(o=>o.vmsSlice),t=L(o=>o.streamStore),{allCameras:n,cameraSearch:l,records:d}=L(o=>o.vmsStore),a=G(),h=()=>{a(N({openCameraDrawer:!1,openManagementDrawer:!1,isSelected:!1,gridItemIndex:-1}))},f=M.useMemo(()=>n===void 0?[]:Object.values(n).flatMap(o=>Object.values(o.controllers).flatMap(x=>x.camaras)),[n]);return e.jsx(e.Fragment,{children:e.jsx(Tt,{open:t.openCameraDrawer,position:"left",width:250,children:e.jsxs(U,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,borderRightWidth:1,borderRightColor:"divider",borderRightStyle:"solid"},children:[e.jsxs(k,{spacing:2,px:2,pt:3,width:250,children:[e.jsxs(k,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx($,{variant:"h5",children:"Cámaras"}),e.jsx(q,{onClick:h,children:e.jsx(vr,{})})]}),e.jsx(fr,{freeSolo:!0,value:l,onChange:(o,x)=>{if(typeof x!="string"&&(a(ft({cameraSearch:x})),x!==null)){const{ctrl_id:u,cmr_id:s,descripcion:_,tc_id:C}=x;switch(t.managementStep){case Y.InLive:t.isSelected&&t.gridItemIndex!==void 0&&t.gridItemIndex>-1&&t.gridItemIndex in r.streams&&(a(xt({index:t.gridItemIndex,newStream:{ctrl_id:u,descripcion:_,cmr_id:s,tc_id:C}})),a(N({camera:{ctrl_id:u,cmr_id:s,tc_id:C,descripcion:_},openManagementDrawer:!0})));break;case Y.Records:d.cutHls||a(K({camera:{ctrl_id:u,cmr_id:s,tc_id:C,descripcion:_}}));break;case Y.Photos:a(te({camera:{ctrl_id:u,cmr_id:s,tc_id:C,descripcion:_}}));break}}},clearIcon:e.jsx(Ft,{}),id:"vms_camera_searcher",options:f,getOptionLabel:o=>typeof o=="string"?o:`${o.nodo} : ${o.descripcion}`,renderInput:o=>e.jsx(yt,{...o,placeholder:"Buscar cámara",slotProps:{input:{...o.InputProps,startAdornment:e.jsx(hr,{})}},sx:{"& .MuiOutlinedInput-root":{borderRadius:"25px",px:2,py:.75}}})})]}),e.jsx(Mr,{})]})})})},Ht=async r=>{try{const t=`${xe}/${r.ruta}`,n=await fetch(t,{credentials:"include"});if(!n.ok)throw new Error("Error al descargar video");const l=await n.blob(),d=URL.createObjectURL(l),a=document.createElement("a");a.href=d;const h=l.type.split("/")[1]||"mp4";a.download=`video_${r.rac_id}_${Date.now()}.${h}`,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(d)}catch(t){console.error("Fallo en la descarga",t)}},Ir=()=>{const r=G(),t=L(u=>u.streamStore),{records:n,allCameras:l}=L(u=>u.vmsStore),[d,{isSuccess:a,data:h,error:f}]=_t(),o=()=>{r(K({cutHls:!1}))},x=M.useMemo(()=>l===void 0?[]:Object.values(l).flatMap(u=>Object.values(u.controllers).flatMap(s=>s.camaras)),[l]);return M.useEffect(()=>{n.date!==void 0&&n.time!==void 0&&n.camera!==void 0&&d({ctrl_id:n.camera.ctrl_id,cmr_id:n.camera.cmr_id,date:W(n.date).format("YYYY-MM-DD"),hour:Number(W(n.time).format("HH")),tipo:1})},[n.date,n.time,n.camera]),M.useEffect(()=>{a&&h&&r(K({list:h,selected:h[0],page:0,rowsPerPage:1,totalCount:h.length})),f&&r(K({list:[],selected:void 0,page:0,rowsPerPage:1,totalCount:0}))},[a,f,h]),M.useEffect(()=>{t.camera&&t.isSelected&&n.camera===void 0&&r(K({camera:t.camera}))},[]),e.jsx(e.Fragment,{children:e.jsxs(k,{spacing:1,height:"100%",width:"100%",children:[e.jsxs(k,{spacing:1,px:1.5,children:[e.jsxs(k,{direction:"row",alignItems:"center",spacing:.5,children:[n.cutHls&&e.jsx(Ce,{onClick:o,children:e.jsx(xr,{})}),e.jsx(Ct,{inputProps:{id:"select_record_cam"},value:n.camera?`${n.camera.ctrl_id}_${n.camera.cmr_id}`:"",startAdornment:e.jsx(Ze,{}),onChange:u=>{const s=u.target.value;if(s!==""){const _=x.find(C=>`${C.ctrl_id}_${C.cmr_id}`===s);_&&r(K({camera:_}))}},sx:{width:200,backgroundColor:"transparent","&.Mui-focused":{boxShadow:"none"},"&.MuiOutlinedInput-root":{"& fieldset":{borderColor:"transparent"},"&:hover fieldset":{borderColor:"transparent"},"&.Mui-focused fieldset":{borderColor:"transparent"}}},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:x.map((u,s)=>e.jsx(jt,{value:`${u.ctrl_id}_${u.cmr_id}`,children:u.descripcion},s))})]}),e.jsx(je,{}),!n.cutHls&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(k,{spacing:1,flex:1,children:[e.jsx(fe,{htmlFor:"date-select-vms-record",children:"Fecha"}),e.jsx(wt,{value:n.date?W(n.date):null,onChange:u=>{r(K({date:(u==null?void 0:u.toISOString())??void 0}))},slotProps:{textField:{size:"small",id:"date-select-vms-record"}}})]}),e.jsxs(k,{spacing:1,flex:.6,children:[e.jsx(fe,{htmlFor:"time-select-vms-record",children:"Hora"}),e.jsx(Mt,{value:n.time?W(n.time):null,onChange:u=>{r(K({time:(u==null?void 0:u.toISOString())??void 0}))},views:["hours"],slotProps:{textField:{size:"small",id:"time-select-vms-record"}}})]})]}),n.date&&e.jsx(e.Fragment,{children:e.jsx($,{variant:"body1",children:Ot(W(n.date).format("dddd D [de] MMMM [del] YYYY"))})})]}),n.cutHls&&e.jsx(e.Fragment,{children:e.jsx(Dr,{handleCancel:o})})]}),!n.cutHls&&n.camera!==void 0&&n.selected!==void 0&&n.date!==void 0&&n.time!==void 0&&e.jsx(Er,{}),(n.camera===void 0||n.selected===void 0||n.date===void 0||n.time===void 0)&&e.jsx(k,{spacing:2,flex:1,alignItems:"center",justifyContent:"center",px:1.5,children:e.jsx($,{textAlign:"center",sx:{textWrap:"pretty"},children:"Empieza a filtrar la fecha y hora para ver las grabaciones"})})]})})},Dr=({handleCancel:r})=>{const t=L(c=>c.nvrState),n=L(c=>c.vmsStore),[l,d]=M.useState(null),[a,h]=M.useState(null),[f,o]=M.useState(!1),[x,u]=M.useState(null),[s,_]=M.useState(W().startOf("day")),[C,v]=M.useState(W().startOf("day").add(1,"minutes")),[i]=Bt(),m=async()=>{try{if(n.records.selected!==void 0&&n.records.camera!==void 0&&n.records.date!==void 0&&!t.playerProps.isError&&s!==null&&C!==null&&a===null&&l===null){u(null),o(!0);const c=await i({ctrl_id:n.records.camera.ctrl_id,cmr_id:n.records.camera.cmr_id,date:W(n.records.date).format("YYYY-MM-DD"),startTime:s.format("HH:mm:ss"),endTime:C.format("HH:mm:ss")}).unwrap(),p=document.createElement("a");p.href=c,p.download=`video_${n.records.camera.ctrl_id}_${n.records.camera.cmr_id}_${t.date}_${Date.now()}.mp4`,document.body.appendChild(p),p.click(),p.remove(),o(!1)}}catch(c){console.error("Error:",c),c instanceof Error?u(c.message):u("Ocurrio un error al recortar video."),o(!1)}};return e.jsxs(k,{spacing:3,children:[e.jsx($,{variant:"h5",children:"Crea un recorte"}),e.jsxs(k,{spacing:1,children:[e.jsxs(k,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(Je,{value:s,onChange:c=>_(c),format:"HH:mm:ss",onError:c=>{d(c?"Tiempo invalido.":null)},helperText:l?e.jsx("span",{children:l}):null}),e.jsx("span",{children:"-"}),e.jsx(Je,{value:C,onChange:c=>v(c),format:"HH:mm:ss",minTime:s!==null?s:void 0,maxTime:s!==null?s.add(30,"minutes"):void 0,onError:c=>{h(c?c==="minTime"?`Tiempo final mínimo ${s!==null?s.format("HH:mm:ss"):void 0} .`:c==="maxTime"?`Tiempo final máximo ${s!==null?s.add(30,"minutes").format("HH:mm:ss"):void 0} .`:"Tiempo invalido.":null)}})]}),a&&e.jsx(Ke,{sx:{color:"error.main"},children:a}),x&&e.jsx(Ke,{sx:{color:"error.main"},children:x})]}),e.jsx($,{variant:"body1",textAlign:"center",children:"Coloca el tiempo que quieres cortar"}),e.jsx($,{variant:"body1",textAlign:"center",sx:{textWrap:"pretty"},children:"Un recorte es una parte extraída del video con una duración máxima de 30 minutos"}),e.jsxs(k,{direction:"row",spacing:1,children:[e.jsx(me,{onClick:r,variant:"label",color:"tertiary",size:"medium",fullWidth:!0,children:"Cancelar"}),e.jsx(me,{onClick:m,variant:"contained",color:"primary",size:"medium",type:"submit",fullWidth:!0,disabled:n.records.selected===void 0||n.records.date===void 0||n.records.camera===void 0||t.playerProps.isError||s===null||C===null||f||a!==null||l!==null,children:"Descargar"})]})]})},Er=()=>{const{records:r}=L(t=>t.vmsStore);return e.jsx(Ne,{sx:{maxWidth:"100%",maxHeight:"100%"},children:e.jsx(k,{spacing:1,px:1.5,children:r.camera&&r.list.map((t,n)=>{var l;return e.jsx(Tr,{archivoCamera:t,isSelect:((l=r.selected)==null?void 0:l.rac_id)===t.rac_id,camera:r.camera,index:n},t.rac_id)})})})},Tr=({archivoCamera:r,isSelect:t,camera:n,index:l})=>{const d=G(),a=()=>{d(Ae()),d(K({selected:r,page:l}))},[h,f]=M.useState(null),o=s=>{s.stopPropagation(),s.preventDefault(),f(s.currentTarget)},x=()=>{f(null)},u=()=>{d(K({cutHls:!0}))};return e.jsxs(e.Fragment,{children:[e.jsxs(U,{sx:{borderWidth:1,borderStyle:"solid",borderColor:"divider",display:"flex",height:90,borderRadius:3,overflow:"hidden",":hover":{backgroundColor:"tertiary.opacityMain"},backgroundColor:t?"tertiary.opacityMain":"transparent",cursor:"pointer"},onClick:a,children:[e.jsx(U,{sx:{flex:.8},children:e.jsx("img",{src:qt,alt:"record-thumbail",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",display:"block"}})}),e.jsx(U,{sx:{flex:1},children:e.jsxs(k,{padding:.5,spacing:1,children:[e.jsxs(k,{direction:"row",spacing:.5,alignItems:"center",justifyContent:"space-between",children:[e.jsx($,{variant:"subtitle1",children:n.descripcion??"no_definido"}),e.jsx(Ce,{onClick:o,children:e.jsx(br,{})})]}),e.jsx($,{variant:"caption",children:`Hora ${W(r.fecha).format("hh:mm:ss a")}`})]})})]}),e.jsx(ze,{id:h?"record_popover_item":void 0,open:!!h,anchorEl:h,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(Fe,{children:e.jsx(Be,{sx:{padding:0,"&:last-child":{paddingBottom:0}},children:e.jsxs(de,{disablePadding:!0,sx:{pr:1},children:[e.jsxs(ee,{disableGutters:!0,disabled:r.isM3u8===void 0||r.isM3u8===!1,onClick:u,children:[e.jsx(oe,{sx:{minWidth:40,justifyContent:"center"},children:e.jsx(It,{sx:{width:21,height:"auto"}})}),e.jsx(Q,{primary:"Recortar Video",color:"primary",slotProps:{primary:{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}})]}),e.jsxs(ee,{disableGutters:!0,onClick:()=>Ht(r),disabled:r.isM3u8===!0,children:[e.jsx(oe,{sx:{minWidth:40,justifyContent:"center"},children:e.jsx(we,{})}),e.jsx(Q,{primary:"Descargar",color:"primary",slotProps:{primary:{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}})]})]})})})})]})},Lt=async r=>{try{const t=`${xe}/${r.ruta}`,n=await fetch(t,{credentials:"include"});if(!n.ok)throw new Error("Error al descargar captura");const l=await n.blob(),d=URL.createObjectURL(l),a=document.createElement("a");a.href=d;const h=l.type.split("/")[1]||"jpg";a.download=`captura_${r.rac_id}_${Date.now()}.${h}`,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(d)}catch(t){console.error("Fallo en la descarga",t)}},Hr=()=>{const r=G(),t=L(x=>x.streamStore),{photos:n,allCameras:l}=L(x=>x.vmsStore),d=M.useMemo(()=>l===void 0?[]:Object.values(l).flatMap(x=>Object.values(x.controllers).flatMap(u=>u.camaras)),[l]),[a,{isSuccess:h,data:f,error:o}]=_t();return M.useEffect(()=>{n.date!==void 0&&n.time!==void 0&&n.camera!==void 0&&a({ctrl_id:n.camera.ctrl_id,cmr_id:n.camera.cmr_id,date:W(n.date).format("YYYY-MM-DD"),hour:Number(W(n.time).format("HH")),tipo:0})},[n.date,n.time,n.camera]),M.useEffect(()=>{h&&f&&r(te({list:f,selected:f[0],page:0,rowsPerPage:1,totalCount:f.length})),o&&r(te({list:[],selected:void 0,page:0,rowsPerPage:1,totalCount:0}))},[h,o,f]),M.useEffect(()=>{t.camera&&t.isSelected&&n.camera===void 0&&r(te({camera:t.camera}))},[]),e.jsx(e.Fragment,{children:e.jsxs(k,{spacing:1,height:"100%",width:"100%",children:[e.jsxs(k,{spacing:1,px:1.5,children:[e.jsx(Ct,{inputProps:{id:"select_snapshot_cam"},value:n.camera?`${n.camera.ctrl_id}_${n.camera.cmr_id}`:"",startAdornment:e.jsx(Ze,{}),onChange:x=>{const u=x.target.value;if(u!==""){const s=d.find(_=>`${_.ctrl_id}_${_.cmr_id}`===u);s&&r(te({camera:s}))}},sx:{width:200,backgroundColor:"transparent","&.Mui-focused":{boxShadow:"none"},"&.MuiOutlinedInput-root":{"& fieldset":{borderColor:"transparent"},"&:hover fieldset":{borderColor:"transparent"},"&.Mui-focused fieldset":{borderColor:"transparent"}}},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:d.map((x,u)=>e.jsx(jt,{value:`${x.ctrl_id}_${x.cmr_id}`,children:x.descripcion},u))}),e.jsx(je,{}),e.jsxs(k,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(k,{spacing:1,flex:1,children:[e.jsx(fe,{htmlFor:"date-select-vms-photos",children:"Fecha"}),e.jsx(wt,{value:n.date?W(n.date):void 0,onChange:x=>{r(te({date:(x==null?void 0:x.toISOString())??void 0}))},slotProps:{textField:{size:"small",id:"date-select-vms-photos"}}})]}),e.jsxs(k,{spacing:1,flex:.6,children:[e.jsx(fe,{htmlFor:"time-select-vms-photos",children:"Hora"}),e.jsx(Mt,{value:n.time?W(n.time):void 0,onChange:x=>{r(te({time:(x==null?void 0:x.toISOString())??void 0}))},views:["hours"],slotProps:{textField:{size:"small",id:"time-select-vms-photos"}}})]})]}),n.date&&e.jsx(e.Fragment,{children:e.jsx($,{variant:"body1",children:Ot(W(n.date).format("dddd D [de] MMMM [del] YYYY"))})})]}),n.camera!==void 0&&n.selected!==void 0&&n.date!==void 0&&n.time!==void 0&&e.jsx(Lr,{}),(n.camera===void 0||n.selected===void 0||n.date===void 0||n.time===void 0)&&e.jsx(k,{spacing:2,flex:1,alignItems:"center",justifyContent:"center",px:1.5,children:e.jsx($,{textAlign:"center",sx:{textWrap:"pretty"},children:"Empieza a filtrar la fecha y hora para ver las grabaciones"})})]})})},Lr=()=>{const{photos:r}=L(t=>t.vmsStore);return e.jsx(Ne,{sx:{maxWidth:"100%",maxHeight:"100%"},children:e.jsx(k,{spacing:1,px:1.5,children:r.camera&&r.list.map((t,n)=>{var l;return e.jsx(Rr,{archivoCamera:t,isSelect:((l=r.selected)==null?void 0:l.rac_id)===t.rac_id,camera:r.camera,index:n},t.rac_id)})})})},Rr=({archivoCamera:r,isSelect:t,camera:n,index:l})=>{const d=G(),a=()=>{d(te({selected:r,page:l}))};return e.jsx(e.Fragment,{children:e.jsxs(U,{sx:{borderWidth:1,borderStyle:"solid",borderColor:"divider",display:"flex",height:90,borderRadius:3,overflow:"hidden",":hover":{backgroundColor:"tertiary.opacityMain"},backgroundColor:t?"tertiary.opacityMain":"transparent",cursor:"pointer"},onClick:a,children:[e.jsx(U,{sx:{flex:.8},children:e.jsx("img",{src:`${xe}/${r.ruta}`,alt:"movement_detection_photo",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",display:"block"}})}),e.jsx(U,{sx:{flex:1},children:e.jsxs(k,{padding:.5,spacing:1,children:[e.jsxs(k,{direction:"row",spacing:.5,alignItems:"center",justifyContent:"space-between",children:[e.jsx($,{variant:"subtitle1",children:n.descripcion??"no_definido"}),e.jsx(Ce,{onClick:()=>Lt(r),children:e.jsx(we,{})})]}),e.jsx($,{variant:"caption",children:`Hora ${W(r.fecha).format("hh:mm:ss a")}`})]})})]})})},Vr=[{label:"En vivo",step:Y.InLive},{label:"Grabaciones",step:Y.Records},{label:"Fotos",step:Y.Photos}],Ar=()=>{const{openManagementDrawer:r,managementStep:t,camera:n}=L(a=>a.streamStore),l=G(),d=a=>{l(N({managementStep:a}))};return e.jsx(e.Fragment,{children:e.jsx(Tt,{open:r,position:"right",width:300,children:e.jsxs(U,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,borderLeftWidth:1,borderLeftColor:"divider",borderLeftStyle:"solid"},children:[e.jsx(k,{direction:"row",width:"100%",children:Vr.map((a,h)=>{const f=t===a.step;return e.jsx(U,{onClick:()=>d(a.step),sx:{flex:1,py:1.75,px:2,cursor:"pointer",color:"text.secondary",borderBottomWidth:"3px",borderBottomStyle:"solid",borderBottomColor:f?"primary.main":"divider",fontWeight:f?"bold":"normal",transition:"all 0.3s ease",backgroundColor:f?"primary.opacityLight":"transparent"},children:e.jsx($,{variant:"subtitle1",sx:{textWrap:"nowrap",textAlign:"center"},children:a.label})},h)})}),e.jsxs(k,{spacing:1,alignItems:"center",flexGrow:1,overflow:"hidden",children:[t===Y.InLive&&e.jsx(Wt,{camera:n}),t===Y.Records&&e.jsx(Ir,{}),t===Y.Photos&&e.jsx(Hr,{})]})]})})})},Ur=({contextMenuRef:r,children:t})=>{const[n]=Yt(),l=Gt(),d=G(),a=L(f=>f.streamMenuContext),h=async()=>{try{const f=a.data;if(f){const o=await n({cmr_id:f.cmr_id,ctrl_id:f.ctrl_id}).unwrap(),x=document.createElement("a");x.href=o,x.download=`captura_${f.ctrl_id}_${f.cmr_id}_${Date.now()}.jpg`,x.style.display="none",document.body.appendChild(x),x.click(),document.body.removeChild(x)}}catch(f){console.error("Error al descargar la imagen:",f)}};return e.jsxs(U,{sx:{zIndex:1300,top:`${a.position.y+"px"}`,left:`${a.position.x+"px"}`,visibility:a.toogled?"visible":"hidden",position:"fixed"},ref:r,children:[e.jsx(mt,{children:e.jsxs(de,{sx:{minWidth:240},children:[e.jsx(ae,{disablePadding:!0,children:e.jsxs(ee,{onClick:()=>{a.index!==null&&(d(Xt({streamIndex:a.index})),d(ye()))},children:[e.jsx(oe,{children:e.jsx(Kt,{})}),e.jsx(Q,{primary:"Cerrar Video"})]})}),e.jsx(ae,{disablePadding:!0,children:e.jsxs(ee,{onClick:()=>{d(vt())},children:[e.jsx(oe,{children:e.jsx(Cr,{})}),e.jsx(Q,{primary:"Cerrar Todos Videos"})]})}),e.jsx(ae,{disablePadding:!0,children:e.jsxs(ee,{onClick:()=>{if(a.data){const{ctrl_id:f}=a.data;l(`/site/${f}/cameras`)}},children:[e.jsx(oe,{children:e.jsx(jr,{})}),e.jsx(Q,{primary:"Ir al site"})]})}),e.jsx(ae,{disablePadding:!0,children:e.jsxs(ee,{onClick:()=>{h()},children:[e.jsx(oe,{children:e.jsx(_r,{})}),e.jsx(Q,{primary:"Capturar"})]})})]})}),t]})};function Nr(r){return r==="c3"?3:r==="c4"?4:r}function he(r,t){return Array.from({length:r},(n,l)=>t+l)}const zr=()=>{const r=M.useRef(null),t=L(i=>i.streamStore),n=L(i=>i.vmsSlice),l=L(i=>i.nvrState),d=G(),a=(i,m)=>{r.current||(r.current=setTimeout(()=>{const c=n.streams[m];c?(d(Ue({ctrl_id:c.ctrl_id,cmr_id:c.cmr_id,tc_id:c.tc_id,descripcion:c.descripcion})),!t.isSelected&&!t.openManagementDrawer&&d(N({openManagementDrawer:!0,isSelected:!0,gridItemIndex:m})),!t.isSelected&&t.openManagementDrawer&&d(N({openManagementDrawer:!0,isSelected:!0,gridItemIndex:m})),t.isSelected&&!t.openManagementDrawer&&m!==t.gridItemIndex&&d(N({openManagementDrawer:!0,isSelected:!0,gridItemIndex:m})),t.isSelected&&t.openManagementDrawer&&m===t.gridItemIndex&&d(N({openManagementDrawer:!1,openCameraDrawer:!1,isSelected:!1,gridItemIndex:-1})),t.isSelected&&t.openManagementDrawer&&m!==t.gridItemIndex&&d(N({openManagementDrawer:!0,isSelected:!0,gridItemIndex:m}))):(d(ye()),t.isSelected||d(N({isSelected:!0,gridItemIndex:m,openManagementDrawer:!1})),t.isSelected&&m===t.gridItemIndex&&d(N({isSelected:!1,gridItemIndex:-1,openManagementDrawer:!1})),t.isSelected&&m!==t.gridItemIndex&&d(N({isSelected:!0,gridItemIndex:m,openManagementDrawer:!1}))),r.current=null},150))},h=i=>{if(r.current&&(clearTimeout(r.current),r.current=null),t.gridOption!==1){const c=n.streams[i];d(c?N({isExpanded:!0,gridOption:1,gridItemIndexExpanded:i,cameraExpanded:c}):N({isExpanded:!0,gridOption:1,gridItemIndexExpanded:i}))}},f=Nr(t.gridOption),o=f<=2?"q1":f<=4?"q2":"q3",x=typeof t.gridOption=="number"?t.gridOption**2:t.gridOption==="c3"?6:8,u=(i,m)=>{i.dataTransfer.setData("index",String(m))},s=i=>{i.preventDefault()},_=(i,m)=>{const c=i.dataTransfer.getData("index");d(Jt({fromIndex:Number(c),toIndex:m}));const p=n.streams[Number(c)];t.isSelected&&d(N({gridItemIndex:m})),p?d(Ue({ctrl_id:p.ctrl_id,cmr_id:p.cmr_id,tc_id:p.tc_id,descripcion:p.descripcion})):(d(ye()),d(bt())),i.dataTransfer.clearData("index")},C=M.useRef(null),v=(i,m)=>{i.preventDefault();const c=n.streams[m];if(C.current){const p=i.clientX,g=i.clientY,y=C.current.getBoundingClientRect().height,w=C.current.getBoundingClientRect().width,P=window.innerWidth,S=window.innerHeight;c&&(P-p<=w?(d(ge({position:{x:P-w-(P-p),y:g},toogled:!0,data:c,index:m})),S-(g+56)<=y&&d(ge({position:{x:P-(P-p+w),y:S-(S-g+y)},toogled:!0,data:c,index:m}))):(d(ge({position:{x:p,y:g},toogled:!0,data:c,index:m})),S-(g+56)<=y&&d(ge({position:{x:p,y:S-(S-g+y)},toogled:!0,data:c,index:m}))))}};return L(i=>i.streamMenuContext),M.useEffect(()=>{const i=m=>{C.current&&(C.current.contains(m.target)||d(Qt()))};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[C.current]),e.jsxs(e.Fragment,{children:[e.jsxs(z,{container:!0,sx:{width:"100%",height:"100%",position:"relative",margin:0,"& .MuiGrid-item":{padding:0}},columns:24,children:[!t.isExpanded&&e.jsxs(e.Fragment,{children:[typeof t.gridOption=="number"&&e.jsx(e.Fragment,{children:he(x,0).map((i,m)=>e.jsx(z,{size:{xs:24/f},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===m?"primary.main":"divider"},onClick:c=>a(c,m),onDoubleClick:()=>h(m),onContextMenu:c=>{v(c,m)},draggable:!0,onDragStart:c=>u(c,m),onDragOver:c=>s(c),onDrop:c=>_(c,m),children:!l.isModeNvr&&n.streams[m]&&e.jsx(ie,{cmr_id:n.streams[m].cmr_id,ctrl_id:n.streams[m].ctrl_id,q:o},n.streams[m].ctrl_id+m+`${o}`)},i))}),t.gridOption==="c3"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{size:{xs:24},sx:{height:"66.7%"},children:e.jsxs(z,{container:!0,columns:24,sx:{width:"100%",height:"100%"},children:[e.jsx(z,{size:{xs:16},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===0?"primary.main":"divider"},onClick:i=>a(i,0),onDoubleClick:()=>h(0),onContextMenu:i=>{v(i,0)},draggable:!0,onDragStart:i=>u(i,0),onDragOver:i=>s(i),onDrop:i=>_(i,0),children:!l.isModeNvr&&n.streams[0]&&e.jsx(ie,{cmr_id:n.streams[0].cmr_id,ctrl_id:n.streams[0].ctrl_id,q:"q1"},n.streams[0].ctrl_id+0+"q1")}),e.jsx(z,{size:{xs:8},children:e.jsx(z,{container:!0,sx:{width:"100%",height:"100%"},columns:24,children:he(2,1).map(i=>e.jsx(z,{size:{xs:24},sx:{width:"100%",borderWidth:1,borderColor:t.gridItemIndex===i?"primary.main":"divider",borderStyle:"solid",position:"relative"},onClick:m=>a(m,i),onDoubleClick:()=>h(i),onContextMenu:m=>{v(m,i)},draggable:!0,onDragStart:m=>u(m,i),onDragOver:m=>s(m),onDrop:m=>_(m,i),children:!l.isModeNvr&&n.streams[i]&&e.jsx(ie,{cmr_id:n.streams[i].cmr_id,ctrl_id:n.streams[i].ctrl_id,q:"q2"},n.streams[i].ctrl_id+i+"q2")},i))})})]})}),e.jsx(z,{size:{xs:24},sx:{height:"33.3%"},children:e.jsx(z,{container:!0,columns:24,sx:{width:"100%",height:"100%"},children:he(3,3).map(i=>e.jsx(z,{size:{xs:8},sx:{borderWidth:1,borderStyle:"solid",borderColor:t.gridItemIndex===i?"primary.main":"divider",position:"relative"},onClick:m=>a(m,i),onDoubleClick:()=>h(i),onContextMenu:m=>{v(m,i)},draggable:!0,onDragStart:m=>u(m,i),onDragOver:m=>s(m),onDrop:m=>_(m,i),children:!l.isModeNvr&&n.streams[i]&&e.jsx(ie,{cmr_id:n.streams[i].cmr_id,ctrl_id:n.streams[i].ctrl_id,q:"q2"},n.streams[i].ctrl_id+i+"q2")},i))})})]}),t.gridOption==="c4"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{size:{xs:24},sx:{height:"75%"},children:e.jsxs(z,{container:!0,columns:24,sx:{width:"100%",height:"100%"},children:[e.jsx(z,{size:{xs:18},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===0?"primary.main":"divider"},onClick:i=>a(i,0),onDoubleClick:()=>h(0),onContextMenu:i=>{v(i,0)},draggable:!0,onDragStart:i=>u(i,0),onDragOver:i=>s(i),onDrop:i=>_(i,0),children:!l.isModeNvr&&n.streams[0]&&e.jsx(ie,{cmr_id:n.streams[0].cmr_id,ctrl_id:n.streams[0].ctrl_id,q:"q1"},n.streams[0].ctrl_id+0+"q1")}),e.jsx(z,{size:{xs:6},children:e.jsx(z,{container:!0,sx:{width:"100%",height:"100%"},columns:24,children:he(3,1).map(i=>e.jsx(z,{size:{xs:24},sx:{width:"100%",borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===i?"primary.main":"divider"},onClick:m=>a(m,i),onDoubleClick:()=>h(i),onContextMenu:m=>{v(m,i)},draggable:!0,onDragStart:m=>u(m,i),onDragOver:m=>s(m),onDrop:m=>_(m,i),children:!l.isModeNvr&&n.streams[i]&&e.jsx(ie,{cmr_id:n.streams[i].cmr_id,ctrl_id:n.streams[i].ctrl_id,q:"q2"},n.streams[i].ctrl_id+i+"q2")},i))})})]})}),e.jsx(z,{size:{xs:24},sx:{height:"25%"},children:e.jsx(z,{container:!0,columns:24,sx:{width:"100%",height:"100%"},children:he(4,4).map(i=>e.jsx(z,{size:{xs:6},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===i?"primary.main":"divider"},onClick:m=>a(m,i),onDoubleClick:()=>h(i),onContextMenu:m=>{v(m,i)},draggable:!0,onDragStart:m=>u(m,i),onDragOver:m=>s(m),onDrop:m=>_(m,i),children:!l.isModeNvr&&n.streams[i]&&e.jsx(ie,{cmr_id:n.streams[i].cmr_id,ctrl_id:n.streams[i].ctrl_id,q:"q2"},n.streams[i].ctrl_id+i+"q2")},i))})})]})]}),t.isExpanded&&t.gridItemIndexExpanded!==void 0&&e.jsx(e.Fragment,{children:e.jsx(z,{size:{xs:24},onClick:i=>a(i,t.gridItemIndexExpanded),onDoubleClick:()=>{r.current&&(clearTimeout(r.current),r.current=null),d(N({gridOption:t.previusGridOption,isExpanded:!1,gridItemIndexExpanded:void 0,cameraExpanded:void 0}))},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===t.gridItemIndexExpanded?"primary.main":"divider"},onContextMenu:i=>{t.gridItemIndexExpanded!==void 0&&v(i,t.gridItemIndexExpanded)},children:!l.isModeNvr&&t.cameraExpanded!==void 0&&e.jsx(ie,{cmr_id:t.cameraExpanded.cmr_id,ctrl_id:t.cameraExpanded.ctrl_id,q:o},t.cameraExpanded.ctrl_id+t.cameraExpanded.cmr_id+`${o}`)})})]}),e.jsx(Ur,{contextMenuRef:C})]})},$r=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2799_6800",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2799_6800)",children:e.jsx("path",{d:"M3 11V3H11V11H3ZM3 21V13H11V21H3ZM13 11V3H21V11H13ZM13 21V13H21V21H13ZM5 9H9V5H5V9ZM15 9H19V5H15V9ZM15 19H19V15H15V19ZM5 19H9V15H5V19Z",fill:"currentColor"})})]})}),Zr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2799_6958",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2799_6958)",children:e.jsx("path",{d:"M3 21V3H21V21H3ZM5 19H19V5H5V19Z",fill:"currentColor"})})]})}),Fr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2799_6752",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2799_6752)",children:e.jsx("path",{d:"M3 21V3H21V21H3ZM5 19H8.325V15.675H5V19ZM10.325 19H13.675V15.675H10.325V19ZM15.675 19H19V15.675H15.675V19ZM5 13.675H8.325V10.325H5V13.675ZM10.325 13.675H13.675V10.325H10.325V13.675ZM15.675 13.675H19V10.325H15.675V13.675ZM5 8.325H8.325V5H5V8.325ZM10.325 8.325H13.675V5H10.325V8.325ZM15.675 8.325H19V5H15.675V8.325Z",fill:"currentColor"})})]})}),Br=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_5378_35669",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_5378_35669)",children:e.jsx("path",{d:"M5 19H7V17H5V19ZM9 19H11V17H9V19ZM13 19H15V17H13V19ZM17 19H19V17H17V19ZM5 7H7V5H5V7ZM5 11H7V9H5V11ZM5 15H7V13H5V15ZM9 7H11V5H9V7ZM9 11H11V9H9V11ZM9 15H11V13H9V15ZM13 7H15V5H13V7ZM13 11H15V9H13V11ZM13 15H15V13H13V15ZM17 7H19V5H17V7ZM17 11H19V9H17V11ZM17 15H19V13H17V15ZM5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5Z",fill:"currentColor"})})]})}),qr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2799_7025",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2799_7025)",children:e.jsx("path",{d:"M5 19H6.425L16.2 9.22499L14.775 7.79999L5 17.575V19ZM3 21V16.75L17.625 2.17499L21.8 6.44999L7.25 21H3ZM15.475 8.52499L14.775 7.79999L16.2 9.22499L15.475 8.52499Z",fill:"currentColor"})})]})}),Wr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_699_744",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("path",{d:"M24 0H0V24H24V0Z",fill:"#D9D9D9"})}),e.jsxs("g",{mask:"url(#mask0_699_744)",children:[e.jsx("rect",{x:"3.5",y:"3.5",width:"17",height:"17",stroke:"currentColor"}),e.jsx("path",{d:"M13.5 7.41602H13.6758V8.57031H13.5762C13.0723 8.57031 12.6367 8.64844 12.2695 8.80469C11.9062 8.96094 11.6074 9.17578 11.373 9.44922C11.1387 9.72266 10.9629 10.043 10.8457 10.4102C10.7324 10.7734 10.6758 11.1602 10.6758 11.5703V12.9121C10.6758 13.252 10.7129 13.5527 10.7871 13.8145C10.8613 14.0723 10.9648 14.2891 11.0977 14.4648C11.2344 14.6367 11.3906 14.7676 11.5664 14.8574C11.7422 14.9473 11.9316 14.9922 12.1348 14.9922C12.3457 14.9922 12.5371 14.9492 12.709 14.8633C12.8809 14.7734 13.0273 14.6504 13.1484 14.4941C13.2695 14.3379 13.3613 14.1523 13.4238 13.9375C13.4863 13.7227 13.5176 13.4883 13.5176 13.2344C13.5176 12.9922 13.4863 12.7656 13.4238 12.5547C13.3652 12.3398 13.2773 12.1523 13.1602 11.9922C13.043 11.8281 12.8965 11.7012 12.7207 11.6113C12.5488 11.5176 12.3496 11.4707 12.123 11.4707C11.8418 11.4707 11.5859 11.5371 11.3555 11.6699C11.1289 11.8027 10.9453 11.9766 10.8047 12.1914C10.668 12.4023 10.5938 12.627 10.582 12.8652L10.043 12.6895C10.0742 12.3262 10.1543 12 10.2832 11.7109C10.416 11.4219 10.5898 11.1758 10.8047 10.9727C11.0195 10.7695 11.2676 10.6152 11.5488 10.5098C11.834 10.4004 12.1465 10.3457 12.4863 10.3457C12.9004 10.3457 13.2598 10.4238 13.5645 10.5801C13.8691 10.7363 14.1211 10.9492 14.3203 11.2188C14.5234 11.4844 14.6738 11.7891 14.7715 12.1328C14.873 12.4727 14.9238 12.8281 14.9238 13.1992C14.9238 13.6094 14.8613 13.9922 14.7363 14.3477C14.6113 14.6992 14.4277 15.0078 14.1855 15.2734C13.9473 15.5391 13.6562 15.7461 13.3125 15.8945C12.9727 16.043 12.5859 16.1172 12.1523 16.1172C11.6953 16.1172 11.2871 16.0293 10.9277 15.8535C10.5723 15.6777 10.2695 15.4355 10.0195 15.127C9.77344 14.8184 9.58594 14.4629 9.45703 14.0605C9.32812 13.6582 9.26367 13.2324 9.26367 12.7832V12.1973C9.26367 11.5488 9.3457 10.9375 9.50977 10.3633C9.67383 9.78516 9.92578 9.27539 10.2656 8.83398C10.6094 8.39258 11.0488 8.04688 11.584 7.79688C12.1191 7.54297 12.7578 7.41602 13.5 7.41602Z",fill:"currentColor"})]})]})}),Yr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_700_752",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("path",{d:"M24 0H0V24H24V0Z",fill:"#D9D9D9"})}),e.jsxs("g",{mask:"url(#mask0_700_752)",children:[e.jsx("rect",{x:"3.5",y:"3.5",width:"17",height:"17",stroke:"currentColor"}),e.jsx("path",{d:"M14.8125 13.6738C14.8125 14.2051 14.6895 14.6523 14.4434 15.0156C14.1973 15.3789 13.8613 15.6543 13.4355 15.8418C13.0137 16.0254 12.5371 16.1172 12.0059 16.1172C11.4746 16.1172 10.9961 16.0254 10.5703 15.8418C10.1445 15.6543 9.80859 15.3789 9.5625 15.0156C9.31641 14.6523 9.19336 14.2051 9.19336 13.6738C9.19336 13.3223 9.26172 13.0039 9.39844 12.7188C9.53516 12.4297 9.72852 12.1816 9.97852 11.9746C10.2324 11.7637 10.5293 11.6016 10.8691 11.4883C11.2129 11.375 11.5879 11.3184 11.9941 11.3184C12.5332 11.3184 13.0156 11.418 13.4414 11.6172C13.8672 11.8164 14.2012 12.0918 14.4434 12.4434C14.6895 12.7949 14.8125 13.2051 14.8125 13.6738ZM13.3945 13.6035C13.3945 13.3184 13.3359 13.0684 13.2188 12.8535C13.1016 12.6387 12.9375 12.4727 12.7266 12.3555C12.5156 12.2383 12.2715 12.1797 11.9941 12.1797C11.7129 12.1797 11.4688 12.2383 11.2617 12.3555C11.0547 12.4727 10.8926 12.6387 10.7754 12.8535C10.6621 13.0684 10.6055 13.3184 10.6055 13.6035C10.6055 13.8926 10.6621 14.1426 10.7754 14.3535C10.8887 14.5605 11.0508 14.7188 11.2617 14.8281C11.4727 14.9375 11.7207 14.9922 12.0059 14.9922C12.291 14.9922 12.5371 14.9375 12.7441 14.8281C12.9512 14.7188 13.1113 14.5605 13.2246 14.3535C13.3379 14.1426 13.3945 13.8926 13.3945 13.6035ZM14.6191 9.71289C14.6191 10.1387 14.5059 10.5176 14.2793 10.8496C14.0566 11.1816 13.748 11.4434 13.3535 11.6348C12.959 11.8223 12.5098 11.916 12.0059 11.916C11.498 11.916 11.0449 11.8223 10.6465 11.6348C10.252 11.4434 9.94141 11.1816 9.71484 10.8496C9.49219 10.5176 9.38086 10.1387 9.38086 9.71289C9.38086 9.20508 9.49219 8.77734 9.71484 8.42969C9.94141 8.07812 10.252 7.81055 10.6465 7.62695C11.041 7.44336 11.4922 7.35156 12 7.35156C12.5078 7.35156 12.959 7.44336 13.3535 7.62695C13.748 7.81055 14.0566 8.07812 14.2793 8.42969C14.5059 8.77734 14.6191 9.20508 14.6191 9.71289ZM13.207 9.75977C13.207 9.50586 13.1562 9.2832 13.0547 9.0918C12.957 8.89648 12.8184 8.74414 12.6387 8.63477C12.459 8.52539 12.2461 8.4707 12 8.4707C11.7539 8.4707 11.541 8.52344 11.3613 8.62891C11.1816 8.73438 11.043 8.88281 10.9453 9.07422C10.8477 9.26562 10.7988 9.49414 10.7988 9.75977C10.7988 10.0215 10.8477 10.25 10.9453 10.4453C11.043 10.6367 11.1816 10.7871 11.3613 10.8965C11.5449 11.0059 11.7598 11.0605 12.0059 11.0605C12.252 11.0605 12.4648 11.0059 12.6445 10.8965C12.8242 10.7871 12.9629 10.6367 13.0605 10.4453C13.1582 10.25 13.207 10.0215 13.207 9.75977Z",fill:"currentColor"})]})]})}),Gr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_700_763",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("path",{d:"M24 0H0V24H24V0Z",fill:"#D9D9D9"})}),e.jsxs("g",{mask:"url(#mask0_700_763)",children:[e.jsx("rect",{x:"3.5",y:"3.5",width:"12",height:"12",stroke:"currentColor"}),e.jsx("rect",{x:"3.5",y:"15.5",width:"5",height:"5",stroke:"currentColor"}),e.jsx("rect",{x:"20.5",y:"3.5",width:"6",height:"5",transform:"rotate(90 20.5 3.5)",stroke:"currentColor"}),e.jsx("rect",{x:"8.5",y:"15.5",width:"7",height:"5",stroke:"currentColor"}),e.jsx("rect",{x:"20.5",y:"9.5",width:"6",height:"5",transform:"rotate(90 20.5 9.5)",stroke:"currentColor"}),e.jsx("rect",{x:"20.5",y:"15.5",width:"5",height:"5",transform:"rotate(90 20.5 15.5)",stroke:"currentColor"})]})]})}),Xr=({...r})=>e.jsx(F,{...r,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_700_771",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("path",{d:"M24 0H0V24H24V0Z",fill:"#D9D9D9"})}),e.jsxs("g",{mask:"url(#mask0_700_771)",children:[e.jsx("rect",{x:"3.5",y:"3.5",width:"12",height:"12",stroke:"currentColor"}),e.jsx("rect",{x:"3.5",y:"15.5",width:"4",height:"5",stroke:"currentColor"}),e.jsx("rect",{x:"20.5467",y:"3.52059",width:"4",height:"5",transform:"rotate(90.2143 20.5467 3.52059)",stroke:"currentColor"}),e.jsx("rect",{x:"7.5",y:"15.5",width:"4",height:"5",stroke:"currentColor"}),e.jsx("rect",{x:"20.5317",y:"7.52059",width:"3.99799",height:"5",transform:"rotate(90.2143 20.5317 7.52059)",stroke:"currentColor"}),e.jsx("rect",{x:"11.5",y:"15.5",width:"4",height:"5",stroke:"currentColor"}),e.jsx("rect",{x:"20.5168",y:"11.5206",width:"4",height:"5",transform:"rotate(90.2143 20.5168 11.5206)",stroke:"currentColor"}),e.jsx("rect",{x:"15.5",y:"15.5",width:"5",height:"5",stroke:"currentColor"})]})]})}),Kr=()=>{const r=G(),{isSuccess:t,data:n}=er(),[l,d]=M.useState({preferencia:"Por defecto"}),a=S=>{if(S){const{configdata:{gridOption:E,streams:T},prfvms_id:V,preferencia:I}=S;d({preferencia:I,prfvms_id:V}),r(N({gridOption:E,previusGridOption:E})),r(lr({gridOption:E,streams:T}))}else d({preferencia:"Por defecto"}),r(cr()),r(N({gridOption:2,previusGridOption:2})),r(vt())},[h,f]=M.useState(null),o=M.useRef(null),x=()=>{o.current&&f(o.current)},u=()=>{f(null)},s=!!h,_=s?"preferencias-popover":void 0,[C,v]=M.useState(!1),i=()=>{v(!0)},m=()=>{v(!1)},[c,{isError:p,isSuccess:g,data:y,error:w}]=tr(),P=S=>{c({prfvms_id:S})};return M.useEffect(()=>{p&&w&&ce.error(()=>e.jsx(U,{children:e.jsx($,{component:"p",variant:"body1",children:JSON.stringify(w)})})),g&&y&&ce.success(()=>e.jsx(U,{children:e.jsx($,{component:"p",variant:"body1",children:y.message})}))},[p,g]),e.jsx(e.Fragment,{children:e.jsxs(k,{spacing:1,direction:"row",alignItems:"center",children:[e.jsx(q,{onClick:i,children:e.jsx(wr,{})}),e.jsx(U,{ref:o,children:e.jsx(de,{disablePadding:!0,sx:{borderWidth:1,borderStyle:"solid",borderColor:"divider",borderRadius:3,width:200,overflow:"hidden"},children:e.jsx(ae,{disablePadding:!0,children:e.jsxs(ee,{onClick:x,sx:{py:.5,px:1},children:[e.jsx(Q,{primary:l.preferencia,color:"primary",slotProps:{primary:{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}}),s?e.jsx(Pt,{}):e.jsx(St,{})]})})})}),e.jsx(ze,{id:_,open:s,anchorEl:h,onClose:u,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(Fe,{children:[e.jsx(kt,{title:e.jsx(k,{direction:"row",alignItems:"center",spacing:1,sx:{width:"100%",overflow:"hidden"},children:e.jsx($,{variant:"subtitle1",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:"Preferencias"})}),sx:{"& .MuiCardHeader-content":{display:"block",width:"100%",overflow:"hidden"}}}),e.jsx(je,{}),e.jsx(Be,{sx:{padding:0,"&:last-child":{paddingBottom:1},overflow:"hidden",width:200},children:e.jsxs(de,{disablePadding:!0,children:[e.jsx(ae,{disablePadding:!0,divider:t&&n.length>0,children:e.jsx(ee,{onClick:()=>{a()},children:e.jsx(Q,{primary:"Por defecto"})})}),t&&n.map((S,E,T)=>{const{preferencia:V,prfvms_id:I}=S;return e.jsx(ae,{divider:E<T.length-1,disablePadding:!0,secondaryAction:e.jsx(Ce,{edge:"end","aria-label":"delete_preference",onClick:()=>{P(I)},children:e.jsx(gr,{})}),children:e.jsx(ee,{onClick:()=>{a(S)},children:e.jsx(Q,{primary:V,color:"primary",slotProps:{primary:{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}})})},I)})]})})]})}),C&&e.jsx(Jr,{handleClose:m,isOpen:C,data:l,setPreferenciaSelect:d})]})})},Jr=({handleClose:r,isOpen:t,data:n,setPreferenciaSelect:l})=>{const{preferencia:d,prfvms_id:a}=n,[h,f]=M.useState(a?d:""),[o,x]=M.useState(null),u=L(S=>S.vmsSlice),s=L(S=>S.streamStore),[_,{isError:C,isSuccess:v,data:i,error:m}]=rr(),[c,{isError:p,isSuccess:g,data:y,error:w}]=nr(),P=S=>{if(h.trim().length===0){x("Nombre de preferencia es requerido.");return}if(S==="create"){const E=u.streams.map(T=>T!==null?{ctrl_id:T.ctrl_id,cmr_id:T.cmr_id}:null);_({preferencia:h,configdata:{gridOption:s.gridOption,streams:E}})}S==="update"&&c({preferencia:h,configdata:{gridOption:s.gridOption,streams:u.streams},prfvms_id:a})};return M.useEffect(()=>{C&&m&&ce.error(()=>e.jsx(U,{children:e.jsx($,{component:"p",variant:"body1",children:JSON.stringify(m)})})),v&&i&&(ce.success(()=>e.jsx(U,{children:e.jsx($,{component:"p",variant:"body1",children:i.message})})),r())},[C,v]),M.useEffect(()=>{p&&w&&ce.error(()=>e.jsx(U,{children:e.jsx($,{component:"p",variant:"body1",children:JSON.stringify(w)})})),g&&y&&(ce.success(()=>e.jsx(U,{children:e.jsx($,{component:"p",variant:"body1",children:y.message})})),l(S=>{const{prfvms_id:E}=S;return{preferencia:h,prfvms_id:E}}),r())},[p,g]),e.jsxs(sr,{open:t,onClose:r,maxWidth:"xs",fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"background.paper",backgroundImage:"inherit",borderRadius:4}},children:[e.jsx(ir,{sx:{px:2,py:1},children:e.jsx($,{variant:"h5",children:"Vista personalizada"})}),e.jsx(ar,{sx:{px:2},children:e.jsxs(k,{spacing:2,children:[e.jsx($,{variant:"body1",children:"Guarda tu orden favorito de cámaras"}),e.jsxs(k,{spacing:1,children:[e.jsx(fe,{htmlFor:"preferencia",children:"Nombre"}),e.jsx(yt,{id:"preferencia",variant:"outlined",placeholder:"Nombre personalizado",value:h,onChange:S=>{f(S.target.value),x(null)},error:!!o,helperText:o||void 0})]})]})}),e.jsx(or,{children:e.jsxs(k,{direction:"row",spacing:1,children:[e.jsx(me,{onClick:r,variant:"text",color:"tertiary",size:"medium",children:"Cancelar"}),e.jsx(me,{size:"small",variant:"contained",color:"primary",onClick:()=>{P(a?"update":"create")},children:a?"Actualizar":"Guardar"}),a&&e.jsx(me,{variant:"contained",color:"primary",size:"medium",type:"submit",onClick:()=>{P("create")},children:"Guardar"})]})})]})},We=gt(U)(({theme:r})=>({width:"100%",backgroundColor:r.palette.background.paper,padding:"8px 16px",borderTopWidth:1,borderTopStyle:"solid",borderTopColor:r.palette.divider})),et={main:[{gridOption:1,icon:Zr},{gridOption:2,icon:$r},{gridOption:3,icon:Fr},{gridOption:4,icon:Br}],others:[{gridOption:"c3",icon:Gr},{gridOption:"c4",icon:Xr},{gridOption:6,icon:Wr},{gridOption:8,icon:Yr}]},Qr=()=>{const r=M.useRef(null),[t,n]=M.useState(null),l=G(),d=L(u=>u.streamStore),a=L(u=>u.vmsSlice),h=()=>{r.current&&n(r.current)},f=()=>{n(null)},o=()=>{l(N({openCameraDrawer:!0,openManagementDrawer:!0}))},x=u=>{if(u!==null){const s=d.gridOption;if(typeof u=="number"){if(typeof s=="number"&&u<s){const _=d.gridItemIndex;if(_!==void 0&&_>u**2-1){const v=u**2-1;l(N({gridItemIndex:v}));const i=a.streams[v];i?l(Ue({ctrl_id:i.ctrl_id,cmr_id:i.cmr_id,tc_id:i.tc_id,descripcion:i.descripcion})):(l(ye()),l(bt())),l(N({isSelected:!0}))}}l(Se(Array.from({length:u**2},()=>null)))}else l(u==="c3"?Se(Array.from({length:6},()=>null)):Se(Array.from({length:8},()=>null)));l(N({gridOption:u,previusGridOption:u}))}};return e.jsxs(We,{ref:r,children:[e.jsxs(k,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",width:"100%",children:[e.jsxs(k,{spacing:1,direction:"row",alignItems:"center",children:[!d.openCameraDrawer&&e.jsx(q,{onClick:o,children:e.jsx(qe,{})}),e.jsx(Kr,{})]}),e.jsxs(k,{direction:"row",children:[et.main.map((u,s)=>e.jsx(q,{isSelected:d.gridOption===u.gridOption,onClick:()=>x(u.gridOption),children:e.jsx(u.icon,{})},s)),e.jsx(q,{onClick:h,children:e.jsx(qr,{})})]})]}),e.jsx(ze,{id:t?"vms-options-popover":void 0,open:!!t,anchorEl:t,onClose:f,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},sx:{overflow:"hidden"},children:e.jsxs(Fe,{children:[e.jsx(kt,{title:e.jsx(k,{direction:"row",alignItems:"center",spacing:1,sx:{width:"100%",overflow:"hidden"},children:e.jsx($,{variant:"subtitle1",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:"Otros cuadros"})}),sx:{"& .MuiCardHeader-content":{display:"block",width:"100%",overflow:"hidden"}}}),e.jsx(je,{}),e.jsx(Be,{sx:{padding:1,"&:last-child":{paddingBottom:1},overflow:"hidden"},children:e.jsx(z,{container:!0,spacing:2,width:130,children:et.others.map((u,s)=>e.jsx(z,{size:{xs:6},children:e.jsx(q,{isSelected:d.gridOption===u.gridOption,onClick:()=>x(u.gridOption),children:e.jsx(u.icon,{})})},s))})})]})})]})};var Me,tt;function en(){if(tt)return Me;tt=1,Me=function(d,a,h){var f=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");typeof a=="function"&&(h=a,a={}),a=a||{},h=h||function(){},o.type=a.type||"text/javascript",o.charset=a.charset||"utf8",o.async="async"in a?!!a.async:!0,o.src=d,a.attrs&&r(o,a.attrs),a.text&&(o.text=""+a.text);var x="onload"in o?t:n;x(o,h),o.onload||t(o,h),f.appendChild(o)};function r(l,d){for(var a in d)l.setAttribute(a,d[a])}function t(l,d){l.onload=function(){this.onerror=this.onload=null,d(null,l)},l.onerror=function(){this.onerror=this.onload=null,d(new Error("Failed to load "+this.src),l)}}function n(l,d){l.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,d(null,l))}}return Me}var ke,rt;function Rt(){if(rt)return ke;rt=1;var r=function(p){return t(p)&&!n(p)};function t(c){return!!c&&typeof c=="object"}function n(c){var p=Object.prototype.toString.call(c);return p==="[object RegExp]"||p==="[object Date]"||a(c)}var l=typeof Symbol=="function"&&Symbol.for,d=l?Symbol.for("react.element"):60103;function a(c){return c.$$typeof===d}function h(c){return Array.isArray(c)?[]:{}}function f(c,p){return p.clone!==!1&&p.isMergeableObject(c)?i(h(c),c,p):c}function o(c,p,g){return c.concat(p).map(function(y){return f(y,g)})}function x(c,p){if(!p.customMerge)return i;var g=p.customMerge(c);return typeof g=="function"?g:i}function u(c){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(c).filter(function(p){return Object.propertyIsEnumerable.call(c,p)}):[]}function s(c){return Object.keys(c).concat(u(c))}function _(c,p){try{return p in c}catch{return!1}}function C(c,p){return _(c,p)&&!(Object.hasOwnProperty.call(c,p)&&Object.propertyIsEnumerable.call(c,p))}function v(c,p,g){var y={};return g.isMergeableObject(c)&&s(c).forEach(function(w){y[w]=f(c[w],g)}),s(p).forEach(function(w){C(c,w)||(_(c,w)&&g.isMergeableObject(p[w])?y[w]=x(w,g)(c[w],p[w],g):y[w]=f(p[w],g))}),y}function i(c,p,g){g=g||{},g.arrayMerge=g.arrayMerge||o,g.isMergeableObject=g.isMergeableObject||r,g.cloneUnlessOtherwiseSpecified=f;var y=Array.isArray(p),w=Array.isArray(c),P=y===w;return P?y?g.arrayMerge(c,p,g):v(c,p,g):f(p,g)}i.all=function(p,g){if(!Array.isArray(p))throw new Error("first argument should be an array");return p.reduce(function(y,w){return i(y,w,g)},{})};var m=i;return ke=m,ke}var Ie,nt;function ve(){if(nt)return Ie;nt=1;var r=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,d=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,h=(b,D)=>{for(var A in D)t(b,A,{get:D[A],enumerable:!0})},f=(b,D,A,Z)=>{if(D&&typeof D=="object"||typeof D=="function")for(let J of l(D))!a.call(b,J)&&J!==A&&t(b,J,{get:()=>D[J],enumerable:!(Z=n(D,J))||Z.enumerable});return b},o=(b,D,A)=>(A=b!=null?r(d(b)):{},f(!b||!b.__esModule?t(A,"default",{value:b,enumerable:!0}):A,b)),x=b=>f(t({},"__esModule",{value:!0}),b),u={};h(u,{callPlayer:()=>j,getConfig:()=>H,getSDK:()=>I,isBlobUrl:()=>B,isMediaStream:()=>O,lazy:()=>v,omit:()=>R,parseEndTime:()=>P,parseStartTime:()=>w,queryString:()=>E,randomString:()=>S,supportsWebKitPresentationMode:()=>se}),Ie=x(u);var s=o($e()),_=o(en()),C=o(Rt());const v=b=>s.default.lazy(async()=>{const D=await b();return typeof D.default=="function"?D:D.default}),i=/[?&#](?:start|t)=([0-9hms]+)/,m=/[?&#]end=([0-9hms]+)/,c=/(\d+)(h|m|s)/g,p=/^\d+$/;function g(b,D){if(b instanceof Array)return;const A=b.match(D);if(A){const Z=A[1];if(Z.match(c))return y(Z);if(p.test(Z))return parseInt(Z)}}function y(b){let D=0,A=c.exec(b);for(;A!==null;){const[,Z,J]=A;J==="h"&&(D+=parseInt(Z,10)*60*60),J==="m"&&(D+=parseInt(Z,10)*60),J==="s"&&(D+=parseInt(Z,10)),A=c.exec(b)}return D}function w(b){return g(b,i)}function P(b){return g(b,m)}function S(){return Math.random().toString(36).substr(2,5)}function E(b){return Object.keys(b).map(D=>`${D}=${b[D]}`).join("&")}function T(b){return window[b]?window[b]:window.exports&&window.exports[b]?window.exports[b]:window.module&&window.module.exports&&window.module.exports[b]?window.module.exports[b]:null}const V={},I=function(D,A,Z=null,J=()=>!0,ue=_.default){const be=T(A);return be&&J(be)?Promise.resolve(be):new Promise((Ye,Ge)=>{if(V[D]){V[D].push({resolve:Ye,reject:Ge});return}V[D]=[{resolve:Ye,reject:Ge}];const Xe=le=>{V[D].forEach(Pe=>Pe.resolve(le))};if(Z){const le=window[Z];window[Z]=function(){le&&le(),Xe(T(A))}}ue(D,le=>{le?(V[D].forEach(Pe=>Pe.reject(le)),V[D]=null):Z||Xe(T(A))})})};function H(b,D){return(0,C.default)(D.config,b.config)}function R(b,...D){const A=[].concat(...D),Z={},J=Object.keys(b);for(const ue of J)A.indexOf(ue)===-1&&(Z[ue]=b[ue]);return Z}function j(b,...D){if(!this.player||!this.player[b]){let A=`ReactPlayer: ${this.constructor.displayName} player could not call %c${b}%c – `;return this.player?this.player[b]||(A+="The method was not available"):A+="The player was not available",console.warn(A,"font-weight: bold",""),null}return this.player[b](...D)}function O(b){return typeof window<"u"&&typeof window.MediaStream<"u"&&b instanceof window.MediaStream}function B(b){return/^blob:/.test(b)}function se(b=document.createElement("video")){const D=/iPhone|iPod/.test(navigator.userAgent)===!1;return b.webkitSupportsPresentationMode&&typeof b.webkitSetPresentationMode=="function"&&D}function ne(b){return b}return Ie}var De,st;function tn(){if(st)return De;st=1;var r=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,d=(j,O)=>{for(var B in O)r(j,B,{get:O[B],enumerable:!0})},a=(j,O,B,se)=>{if(typeof O=="object"||typeof O=="function")for(let ne of n(O))!l.call(j,ne)&&ne!==B&&r(j,ne,{get:()=>O[ne],enumerable:!(se=t(O,ne))||se.enumerable});return j},h=j=>a(r({},"__esModule",{value:!0}),j),f={};d(f,{AUDIO_EXTENSIONS:()=>S,DASH_EXTENSIONS:()=>V,FLV_EXTENSIONS:()=>I,HLS_EXTENSIONS:()=>T,MATCH_URL_DAILYMOTION:()=>g,MATCH_URL_FACEBOOK:()=>C,MATCH_URL_FACEBOOK_WATCH:()=>v,MATCH_URL_KALTURA:()=>P,MATCH_URL_MIXCLOUD:()=>y,MATCH_URL_MUX:()=>_,MATCH_URL_SOUNDCLOUD:()=>u,MATCH_URL_STREAMABLE:()=>i,MATCH_URL_TWITCH_CHANNEL:()=>p,MATCH_URL_TWITCH_VIDEO:()=>c,MATCH_URL_VIDYARD:()=>w,MATCH_URL_VIMEO:()=>s,MATCH_URL_WISTIA:()=>m,MATCH_URL_YOUTUBE:()=>x,VIDEO_EXTENSIONS:()=>E,canPlay:()=>R}),De=h(f);var o=ve();const x=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,u=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,s=/vimeo\.com\/(?!progressive_redirect).+/,_=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,C=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,v=/^https?:\/\/fb\.watch\/.+$/,i=/streamable\.com\/([a-z0-9]+)$/,m=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,c=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,p=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,g=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,y=/mixcloud\.com\/([^/]+\/[^/]+)/,w=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,P=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,S=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,E=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,T=/\.(m3u8)($|\?)/i,V=/\.(mpd)($|\?)/i,I=/\.(flv)($|\?)/i,H=j=>{if(j instanceof Array){for(const O of j)if(typeof O=="string"&&H(O)||H(O.src))return!0;return!1}return(0,o.isMediaStream)(j)||(0,o.isBlobUrl)(j)?!0:S.test(j)||E.test(j)||T.test(j)||V.test(j)||I.test(j)},R={youtube:j=>j instanceof Array?j.every(O=>x.test(O)):x.test(j),soundcloud:j=>u.test(j)&&!S.test(j),vimeo:j=>s.test(j)&&!E.test(j)&&!T.test(j),mux:j=>_.test(j),facebook:j=>C.test(j)||v.test(j),streamable:j=>i.test(j),wistia:j=>m.test(j),twitch:j=>c.test(j)||p.test(j),dailymotion:j=>g.test(j),mixcloud:j=>y.test(j),vidyard:j=>w.test(j),kaltura:j=>P.test(j),file:H};return De}var Ee,it;function rn(){if(it)return Ee;it=1;var r=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,d=(s,_)=>{for(var C in _)r(s,C,{get:_[C],enumerable:!0})},a=(s,_,C,v)=>{if(typeof _=="object"||typeof _=="function")for(let i of n(_))!l.call(s,i)&&i!==C&&r(s,i,{get:()=>_[i],enumerable:!(v=t(_,i))||v.enumerable});return s},h=s=>a(r({},"__esModule",{value:!0}),s),f={};d(f,{default:()=>u}),Ee=h(f);var o=ve(),x=tn(),u=[{key:"youtube",name:"YouTube",canPlay:x.canPlay.youtube,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./YouTube-CYiy-f6y.js").then(s=>s.Y),__vite__mapDeps([0,1,2])))},{key:"soundcloud",name:"SoundCloud",canPlay:x.canPlay.soundcloud,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./SoundCloud-CElY0Svc.js").then(s=>s.S),__vite__mapDeps([3,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:x.canPlay.vimeo,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Vimeo-3AVO-IKK.js").then(s=>s.V),__vite__mapDeps([4,1,2])))},{key:"mux",name:"Mux",canPlay:x.canPlay.mux,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Mux-CyARi_c6.js").then(s=>s.M),__vite__mapDeps([5,1,2])))},{key:"facebook",name:"Facebook",canPlay:x.canPlay.facebook,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Facebook-ConogkoP.js").then(s=>s.F),__vite__mapDeps([6,1,2])))},{key:"streamable",name:"Streamable",canPlay:x.canPlay.streamable,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Streamable-CTIs07ht.js").then(s=>s.S),__vite__mapDeps([7,1,2])))},{key:"wistia",name:"Wistia",canPlay:x.canPlay.wistia,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Wistia-7fmOMgIC.js").then(s=>s.W),__vite__mapDeps([8,1,2])))},{key:"twitch",name:"Twitch",canPlay:x.canPlay.twitch,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Twitch-CFQpDeUd.js").then(s=>s.T),__vite__mapDeps([9,1,2])))},{key:"dailymotion",name:"DailyMotion",canPlay:x.canPlay.dailymotion,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./DailyMotion-dKWbUAs1.js").then(s=>s.D),__vite__mapDeps([10,1,2])))},{key:"mixcloud",name:"Mixcloud",canPlay:x.canPlay.mixcloud,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Mixcloud-CcY0iMEd.js").then(s=>s.M),__vite__mapDeps([11,1,2])))},{key:"vidyard",name:"Vidyard",canPlay:x.canPlay.vidyard,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Vidyard-CQ_F0CI1.js").then(s=>s.V),__vite__mapDeps([12,1,2])))},{key:"kaltura",name:"Kaltura",canPlay:x.canPlay.kaltura,lazyPlayer:(0,o.lazy)(()=>X(()=>import("./Kaltura-BCyAbPTC.js").then(s=>s.K),__vite__mapDeps([13,1,2])))},{key:"file",name:"FilePlayer",canPlay:x.canPlay.file,canEnablePIP:s=>x.canPlay.file(s)&&(document.pictureInPictureEnabled||(0,o.supportsWebKitPresentationMode)())&&!x.AUDIO_EXTENSIONS.test(s),lazyPlayer:(0,o.lazy)(()=>X(()=>import("./FilePlayer-CYmZI9zp.js").then(s=>s.F),__vite__mapDeps([14,1,2])))}];return Ee}var at=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function nn(r,t){return!!(r===t||at(r)&&at(t))}function sn(r,t){if(r.length!==t.length)return!1;for(var n=0;n<r.length;n++)if(!nn(r[n],t[n]))return!1;return!0}function an(r,t){t===void 0&&(t=sn);var n,l=[],d,a=!1;function h(){for(var f=[],o=0;o<arguments.length;o++)f[o]=arguments[o];return a&&n===this&&t(f,l)||(d=r.apply(this,f),a=!0,n=this,l=f),d}return h}const on=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),ln=dr(on);var Te,ot;function Vt(){if(ot)return Te;ot=1;var r=typeof Element<"u",t=typeof Map=="function",n=typeof Set=="function",l=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function d(a,h){if(a===h)return!0;if(a&&h&&typeof a=="object"&&typeof h=="object"){if(a.constructor!==h.constructor)return!1;var f,o,x;if(Array.isArray(a)){if(f=a.length,f!=h.length)return!1;for(o=f;o--!==0;)if(!d(a[o],h[o]))return!1;return!0}var u;if(t&&a instanceof Map&&h instanceof Map){if(a.size!==h.size)return!1;for(u=a.entries();!(o=u.next()).done;)if(!h.has(o.value[0]))return!1;for(u=a.entries();!(o=u.next()).done;)if(!d(o.value[1],h.get(o.value[0])))return!1;return!0}if(n&&a instanceof Set&&h instanceof Set){if(a.size!==h.size)return!1;for(u=a.entries();!(o=u.next()).done;)if(!h.has(o.value[0]))return!1;return!0}if(l&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(h)){if(f=a.length,f!=h.length)return!1;for(o=f;o--!==0;)if(a[o]!==h[o])return!1;return!0}if(a.constructor===RegExp)return a.source===h.source&&a.flags===h.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof h.valueOf=="function")return a.valueOf()===h.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof h.toString=="function")return a.toString()===h.toString();if(x=Object.keys(a),f=x.length,f!==Object.keys(h).length)return!1;for(o=f;o--!==0;)if(!Object.prototype.hasOwnProperty.call(h,x[o]))return!1;if(r&&a instanceof Element)return!1;for(o=f;o--!==0;)if(!((x[o]==="_owner"||x[o]==="__v"||x[o]==="__o")&&a.$$typeof)&&!d(a[x[o]],h[x[o]]))return!1;return!0}return a!==a&&h!==h}return Te=function(h,f){try{return d(h,f)}catch(o){if((o.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw o}},Te}var He,lt;function At(){if(lt)return He;lt=1;var r=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,d=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,h=(E,T)=>{for(var V in T)t(E,V,{get:T[V],enumerable:!0})},f=(E,T,V,I)=>{if(T&&typeof T=="object"||typeof T=="function")for(let H of l(T))!a.call(E,H)&&H!==V&&t(E,H,{get:()=>T[H],enumerable:!(I=n(T,H))||I.enumerable});return E},o=(E,T,V)=>(V=E!=null?r(d(E)):{},f(!E||!E.__esModule?t(V,"default",{value:E,enumerable:!0}):V,E)),x=E=>f(t({},"__esModule",{value:!0}),E),u={};h(u,{defaultProps:()=>S,propTypes:()=>w}),He=x(u);var s=o(ur());const{string:_,bool:C,number:v,array:i,oneOfType:m,shape:c,object:p,func:g,node:y}=s.default,w={url:m([_,i,p]),playing:C,loop:C,controls:C,volume:v,muted:C,playbackRate:v,width:m([_,v]),height:m([_,v]),style:p,progressInterval:v,playsinline:C,pip:C,stopOnUnmount:C,light:m([C,_,p]),playIcon:y,previewTabIndex:v,previewAriaLabel:_,fallback:y,oEmbedUrl:_,wrapper:m([_,g,c({render:g.isRequired})]),config:c({soundcloud:c({options:p}),youtube:c({playerVars:p,embedOptions:p,onUnstarted:g}),facebook:c({appId:_,version:_,playerId:_,attributes:p}),dailymotion:c({params:p}),vimeo:c({playerOptions:p,title:_}),mux:c({attributes:p,version:_}),file:c({attributes:p,tracks:i,forceVideo:C,forceAudio:C,forceHLS:C,forceSafariHLS:C,forceDisableHls:C,forceDASH:C,forceFLV:C,hlsOptions:p,hlsVersion:_,dashVersion:_,flvVersion:_}),wistia:c({options:p,playerId:_,customControls:i}),mixcloud:c({options:p}),twitch:c({options:p,playerId:_}),vidyard:c({options:p})}),onReady:g,onStart:g,onPlay:g,onPause:g,onBuffer:g,onBufferEnd:g,onEnded:g,onError:g,onDuration:g,onSeek:g,onPlaybackRateChange:g,onPlaybackQualityChange:g,onProgress:g,onClickPreview:g,onEnablePIP:g,onDisablePIP:g},P=()=>{},S={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:P},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:P,onStart:P,onPlay:P,onPause:P,onBuffer:P,onBufferEnd:P,onEnded:P,onError:P,onDuration:P,onSeek:P,onPlaybackRateChange:P,onPlaybackQualityChange:P,onProgress:P,onClickPreview:P,onEnablePIP:P,onDisablePIP:P};return He}var Le,ct;function cn(){if(ct)return Le;ct=1;var r=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,d=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,h=(g,y,w)=>y in g?t(g,y,{enumerable:!0,configurable:!0,writable:!0,value:w}):g[y]=w,f=(g,y)=>{for(var w in y)t(g,w,{get:y[w],enumerable:!0})},o=(g,y,w,P)=>{if(y&&typeof y=="object"||typeof y=="function")for(let S of l(y))!a.call(g,S)&&S!==w&&t(g,S,{get:()=>y[S],enumerable:!(P=n(y,S))||P.enumerable});return g},x=(g,y,w)=>(w=g!=null?r(d(g)):{},o(!g||!g.__esModule?t(w,"default",{value:g,enumerable:!0}):w,g)),u=g=>o(t({},"__esModule",{value:!0}),g),s=(g,y,w)=>(h(g,typeof y!="symbol"?y+"":y,w),w),_={};f(_,{default:()=>p}),Le=u(_);var C=x($e()),v=x(Vt()),i=At(),m=ve();const c=5e3;class p extends C.Component{constructor(){super(...arguments),s(this,"mounted",!1),s(this,"isReady",!1),s(this,"isPlaying",!1),s(this,"isLoading",!0),s(this,"loadOnReady",null),s(this,"startOnPlay",!0),s(this,"seekOnPlay",null),s(this,"onDurationCalled",!1),s(this,"handlePlayerMount",y=>{if(this.player){this.progress();return}this.player=y,this.player.load(this.props.url),this.progress()}),s(this,"getInternalPlayer",y=>this.player?this.player[y]:null),s(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const y=this.getCurrentTime()||0,w=this.getSecondsLoaded(),P=this.getDuration();if(P){const S={playedSeconds:y,played:y/P};w!==null&&(S.loadedSeconds=w,S.loaded=w/P),(S.playedSeconds!==this.prevPlayed||S.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(S),this.prevPlayed=S.playedSeconds,this.prevLoaded=S.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),s(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:y,playing:w,volume:P,muted:S}=this.props;y(),!S&&P!==null&&this.player.setVolume(P),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):w&&this.player.play(),this.handleDurationCheck()}),s(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:y,onPlay:w,playbackRate:P}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&P!==1&&this.player.setPlaybackRate(P),y(),this.startOnPlay=!1),w(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),s(this,"handlePause",y=>{this.isPlaying=!1,this.isLoading||this.props.onPause(y)}),s(this,"handleEnded",()=>{const{activePlayer:y,loop:w,onEnded:P}=this.props;y.loopOnEnded&&w&&this.seekTo(0),w||(this.isPlaying=!1,P())}),s(this,"handleError",(...y)=>{this.isLoading=!1,this.props.onError(...y)}),s(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const y=this.getDuration();y?this.onDurationCalled||(this.props.onDuration(y),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),s(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(y){if(!this.player)return;const{url:w,playing:P,volume:S,muted:E,playbackRate:T,pip:V,loop:I,activePlayer:H,disableDeferredLoading:R}=this.props;if(!(0,v.default)(y.url,w)){if(this.isLoading&&!H.forceLoad&&!R&&!(0,m.isMediaStream)(w)){console.warn(`ReactPlayer: the attempt to load ${w} is being deferred until the player has loaded`),this.loadOnReady=w;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(w,this.isReady)}!y.playing&&P&&!this.isPlaying&&this.player.play(),y.playing&&!P&&this.isPlaying&&this.player.pause(),!y.pip&&V&&this.player.enablePIP&&this.player.enablePIP(),y.pip&&!V&&this.player.disablePIP&&this.player.disablePIP(),y.volume!==S&&S!==null&&this.player.setVolume(S),y.muted!==E&&(E?this.player.mute():(this.player.unmute(),S!==null&&setTimeout(()=>this.player.setVolume(S)))),y.playbackRate!==T&&this.player.setPlaybackRate&&this.player.setPlaybackRate(T),y.loop!==I&&this.player.setLoop&&this.player.setLoop(I)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(y,w,P){if(!this.isReady){y!==0&&(this.seekOnPlay=y,setTimeout(()=>{this.seekOnPlay=null},c));return}if(w?w==="fraction":y>0&&y<1){const E=this.player.getDuration();if(!E){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(E*y,P);return}this.player.seekTo(y,P)}render(){const y=this.props.activePlayer;return y?C.default.createElement(y,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return s(p,"displayName","Player"),s(p,"propTypes",i.propTypes),s(p,"defaultProps",i.defaultProps),Le}var Re,dt;function dn(){if(dt)return Re;dt=1;var r=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,d=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,h=(I,H,R)=>H in I?t(I,H,{enumerable:!0,configurable:!0,writable:!0,value:R}):I[H]=R,f=(I,H)=>{for(var R in H)t(I,R,{get:H[R],enumerable:!0})},o=(I,H,R,j)=>{if(H&&typeof H=="object"||typeof H=="function")for(let O of l(H))!a.call(I,O)&&O!==R&&t(I,O,{get:()=>H[O],enumerable:!(j=n(H,O))||j.enumerable});return I},x=(I,H,R)=>(R=I!=null?r(d(I)):{},o(!I||!I.__esModule?t(R,"default",{value:I,enumerable:!0}):R,I)),u=I=>o(t({},"__esModule",{value:!0}),I),s=(I,H,R)=>(h(I,typeof H!="symbol"?H+"":H,R),R),_={};f(_,{createReactPlayer:()=>V}),Re=u(_);var C=x($e()),v=x(Rt()),i=x(ln),m=x(Vt()),c=At(),p=ve(),g=x(cn());const y=(0,p.lazy)(()=>X(()=>import("./Preview-Dxb3Vrmp.js").then(I=>I.P),__vite__mapDeps([15,1,2]))),w=typeof window<"u"&&window.document&&typeof document<"u",P=typeof Oe<"u"&&Oe.window&&Oe.window.document,S=Object.keys(c.propTypes),E=w||P?C.Suspense:()=>null,T=[],V=(I,H)=>{var R;return R=class extends C.Component{constructor(){super(...arguments),s(this,"state",{showPreview:!!this.props.light}),s(this,"references",{wrapper:j=>{this.wrapper=j},player:j=>{this.player=j}}),s(this,"handleClickPreview",j=>{this.setState({showPreview:!1}),this.props.onClickPreview(j)}),s(this,"showPreview",()=>{this.setState({showPreview:!0})}),s(this,"getDuration",()=>this.player?this.player.getDuration():null),s(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),s(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),s(this,"getInternalPlayer",(j="player")=>this.player?this.player.getInternalPlayer(j):null),s(this,"seekTo",(j,O,B)=>{if(!this.player)return null;this.player.seekTo(j,O,B)}),s(this,"handleReady",()=>{this.props.onReady(this)}),s(this,"getActivePlayer",(0,i.default)(j=>{for(const O of[...T,...I])if(O.canPlay(j))return O;return H||null})),s(this,"getConfig",(0,i.default)((j,O)=>{const{config:B}=this.props;return v.default.all([c.defaultProps.config,c.defaultProps.config[O]||{},B,B[O]||{}])})),s(this,"getAttributes",(0,i.default)(j=>(0,p.omit)(this.props,S))),s(this,"renderActivePlayer",j=>{if(!j)return null;const O=this.getActivePlayer(j);if(!O)return null;const B=this.getConfig(j,O.key);return C.default.createElement(g.default,{...this.props,key:O.key,ref:this.references.player,config:B,activePlayer:O.lazyPlayer||O,onReady:this.handleReady})})}shouldComponentUpdate(j,O){return!(0,m.default)(this.props,j)||!(0,m.default)(this.state,O)}componentDidUpdate(j){const{light:O}=this.props;!j.light&&O&&this.setState({showPreview:!0}),j.light&&!O&&this.setState({showPreview:!1})}renderPreview(j){if(!j)return null;const{light:O,playIcon:B,previewTabIndex:se,oEmbedUrl:ne,previewAriaLabel:b}=this.props;return C.default.createElement(y,{url:j,light:O,playIcon:B,previewTabIndex:se,previewAriaLabel:b,oEmbedUrl:ne,onClick:this.handleClickPreview})}render(){const{url:j,style:O,width:B,height:se,fallback:ne,wrapper:b}=this.props,{showPreview:D}=this.state,A=this.getAttributes(j),Z=typeof b=="string"?this.references.wrapper:void 0;return C.default.createElement(b,{ref:Z,style:{...O,width:B,height:se},...A},C.default.createElement(E,{fallback:ne},D?this.renderPreview(j):this.renderActivePlayer(j)))}},s(R,"displayName","ReactPlayer"),s(R,"propTypes",c.propTypes),s(R,"defaultProps",c.defaultProps),s(R,"addCustomPlayer",j=>{T.push(j)}),s(R,"removeCustomPlayers",()=>{T.length=0}),s(R,"canPlay",j=>{for(const O of[...T,...I])if(O.canPlay(j))return!0;return!1}),s(R,"canEnablePIP",j=>{for(const O of[...T,...I])if(O.canEnablePIP&&O.canEnablePIP(j))return!0;return!1}),R};return Re}var Ve,ut;function un(){if(ut)return Ve;ut=1;var r=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,d=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,h=(i,m)=>{for(var c in m)t(i,c,{get:m[c],enumerable:!0})},f=(i,m,c,p)=>{if(m&&typeof m=="object"||typeof m=="function")for(let g of l(m))!a.call(i,g)&&g!==c&&t(i,g,{get:()=>m[g],enumerable:!(p=n(m,g))||p.enumerable});return i},o=(i,m,c)=>(c=i!=null?r(d(i)):{},f(!i||!i.__esModule?t(c,"default",{value:i,enumerable:!0}):c,i)),x=i=>f(t({},"__esModule",{value:!0}),i),u={};h(u,{default:()=>v}),Ve=x(u);var s=o(rn()),_=dn();const C=s.default[s.default.length-1];var v=(0,_.createReactPlayer)(s.default,C);return Ve}var pn=un();const hn=pr(pn),mn=r=>r.endsWith(".m3u8")?"hls":r.endsWith(".mp4")?"mp4":"unknown",fn=()=>{const r=M.useRef(null),t=G(),n=L(p=>p.nvrState),{records:l}=L(p=>p.vmsStore),[d,a]=M.useState({playing:!1,controls:!1,muted:!0,played:0,isStoping:!1,playbackRate:1,seekTo:0,isPreview:!0,isError:!1,duration:0}),[h,f]=M.useState(Date.now()),[o,x]=M.useState(""),u=()=>{a(p=>({...p,playing:!0})),t(re({playing:!0}))},s=()=>{a(p=>({...p,playing:!1}))},_=p=>{const g=parseFloat(p);a(y=>({...y,playbackRate:g})),t(re({playbackRate:g}))},C=p=>{d.seeking||(a(g=>({...g,played:p.played})),t(re({played:p.played})))},v=()=>{a(p=>({...p,isError:!0,playing:!1,isPreview:!0})),t(re({isError:!0}))},i=p=>{a(g=>({...g,duration:p})),t(re({duration:p}))},m=()=>{},c=()=>{};return M.useEffect(()=>{if(l.selected!==void 0){const p=`${xe}/${l.selected.ruta}`;a(y=>({...y,url:p}));const g=mn(p);g!==o&&(x(g),f(Date.now()))}},[l.selected]),M.useEffect(()=>{n.playerProps.playing!==void 0&&(a(p=>({...p,playing:n.playerProps.playing,light:void 0,playIcon:void 0,isStoping:!1,isPreview:n.playerProps.isPreview})),t(re({isStoping:!1})))},[n.playerProps.playing]),M.useEffect(()=>{n.playerProps.seeking!==void 0&&a(p=>({...p,seeking:n.playerProps.seeking}))},[n.playerProps.seeking]),M.useEffect(()=>{r.current&&r.current.seekTo(n.playerProps.seekTo)},[n.playerProps.seekTo]),M.useEffect(()=>{a(p=>({...p,played:n.playerProps.played}))},[n.playerProps.played]),e.jsx(U,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},component:"div",children:l.selected&&d.url&&e.jsx(hn,{ref:r,url:d.url,playing:d.playing,muted:d.muted,controls:d.controls,playIcon:d.playIcon,light:d.light,width:"100%",height:"100%",playbackRate:d.playbackRate,onPlay:u,onPause:s,onPlaybackRateChange:_,onProgress:C,onError:v,onDuration:i,onReady:m,onStart:c,config:{file:{hlsOptions:{xhrSetup:function(p){p.withCredentials=!0}}}}},h)})},xn=()=>e.jsxs(e.Fragment,{children:[e.jsx(U,{sx:{flex:1,overflow:"hidden"},children:e.jsx(fn,{})}),e.jsx(gn,{})]}),gn=()=>{const r=G(),t=L(C=>C.nvrState),n=L(C=>C.streamStore),{records:l}=L(C=>C.vmsStore),d=()=>{r(N({openCameraDrawer:!0,openManagementDrawer:!0}))},a=()=>{r(K({cutHls:!0}))},h=()=>{if(t.playerProps.playing!==void 0){const C=t.playerProps.playing,v=!t.playerProps.playing,i=C===!1&&v===!0||C===!0&&v===!1;r(re({playing:!t.playerProps.playing,isPreview:!i}))}},f=()=>{r(re({seeking:!0}))},o=C=>{r(re({played:parseFloat(C.target.value)}))},x=C=>{r(re({seeking:!1})),r(re({seekTo:parseFloat(C.currentTarget.value)}))},u=()=>{r(Ae()),r(K({page:l.page-1,selected:l.list[l.page-1]}))},s=()=>{r(Ae()),r(K({page:l.page+1,selected:l.list[l.page+1]}))},_=async()=>{l.selected&&await Ht(l.selected)};return e.jsx(We,{children:e.jsxs(k,{spacing:0,children:[e.jsx("input",{type:"range",min:0,max:.999999,step:"any",value:t.playerProps.played,onMouseDown:f,onChange:o,onMouseUp:x,disabled:l.selected===void 0,style:{flex:1}}),e.jsxs(k,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",width:"100%",children:[e.jsxs(k,{direction:"row",alignItems:"center",spacing:.5,children:[!n.openCameraDrawer&&e.jsx(q,{onClick:d,children:e.jsx(qe,{})}),e.jsx(q,{disabled:l.selected===void 0,onClick:h,children:t.playerProps.playing?e.jsx(Sr,{}):e.jsx(Pr,{})}),e.jsxs(k,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(pt,{seconds:t.playerProps.duration*t.playerProps.played}),e.jsx("span",{children:"/"}),e.jsx(pt,{seconds:t.playerProps.duration})]})]}),e.jsxs(k,{direction:"row",spacing:2,children:[e.jsx(q,{disabled:l.page===0,onClick:u,children:e.jsx(Et,{})}),e.jsx(q,{disabled:l.page>=Math.ceil(l.totalCount/l.rowsPerPage)-1||l.cutHls,onClick:s,children:e.jsx(Dt,{})})]}),e.jsxs(k,{direction:"row",spacing:.5,children:[e.jsx(q,{disabled:l.selected===void 0||l.selected.isM3u8===void 0||l.selected.isM3u8===!1,onClick:a,children:e.jsx(It,{sx:{width:21,height:"auto"}})}),e.jsx(q,{disabled:l.selected===void 0||l.selected.isM3u8===!0,onClick:_,children:e.jsx(we,{})})]})]})]})})},pt=({seconds:r})=>e.jsx("time",{dateTime:`P${Math.round(r)}S`,children:yn(r)});function yn(r){const t=new Date(r*1e3),n=t.getUTCHours(),l=t.getUTCMinutes(),d=ht(t.getUTCSeconds());return n?`${n}:${ht(l)}:${d}`:`${l}:${d}`}function ht(r){return("0"+r).slice(-2)}const _n=()=>e.jsxs(e.Fragment,{children:[e.jsx(U,{sx:{flex:1,overflow:"hidden"},children:e.jsx(jn,{})}),e.jsx(Cn,{})]}),Cn=()=>{const r=G(),{photos:t}=L(f=>f.vmsStore),n=L(f=>f.streamStore),l=()=>{r(te({page:t.page-1,selected:t.list[t.page-1]}))},d=()=>{r(te({page:t.page+1,selected:t.list[t.page+1]}))},a=async()=>{t.selected&&await Lt(t.selected)},h=()=>{r(N({openCameraDrawer:!0,openManagementDrawer:!0}))};return e.jsx(e.Fragment,{children:e.jsx(We,{children:e.jsxs(k,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",width:"100%",children:[!n.openCameraDrawer&&e.jsx(q,{onClick:h,children:e.jsx(qe,{})}),e.jsxs(k,{direction:"row",spacing:2,children:[e.jsx(q,{disabled:t.page===0,onClick:l,children:e.jsx(Et,{})}),e.jsx(q,{disabled:t.page>=Math.ceil(t.totalCount/t.rowsPerPage)-1,onClick:d,children:e.jsx(Dt,{})})]}),e.jsx(q,{disabled:t.selected===void 0,onClick:a,children:e.jsx(we,{})})]})})})},jn=()=>{const{photos:r}=L(t=>t.vmsStore);return e.jsx(U,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},component:"div",children:r.selected&&e.jsx("img",{src:`${xe}/${r.selected.ruta}`,alt:"movement_detection_photo_viewer",style:{width:"100%",height:"100%",objectFit:"contain"}})})},wn=()=>{const{managementStep:r}=L(t=>t.streamStore);return e.jsxs(e.Fragment,{children:[r===Y.InLive&&e.jsxs(e.Fragment,{children:[e.jsx(U,{sx:{flexGrow:1},children:e.jsx(zr,{})}),e.jsx(Qr,{})]}),r===Y.Records&&e.jsx(e.Fragment,{children:e.jsx(xn,{})}),r===Y.Photos&&e.jsx(e.Fragment,{children:e.jsx(_n,{})})]})},vn=()=>e.jsxs(U,{sx:{width:"100%",height:"100%",display:"flex"},children:[e.jsx(kr,{}),e.jsx(U,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e.jsx(wn,{})}),e.jsx(Ar,{})]}),Vn=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"}));export{Vn as V,tn as a,ve as r};
