import{j as t,S as J,aS as T,r as W,s as Se,ax as je,aT as Fe,aU as Ne,aV as Ve,n as Ye,l as R,aF as ye,ay as oe,az as se,aA as le,aB as U,aC as Z,aD as he,m as pe,T as q,i as Ue,B as G,D as Xe,p as $e,q as Ge,a6 as qe,a9 as Ke,a5 as Qe,aa as Je,ab as et,ac as fe,aW as tt}from"./index-B2MwQ28r.js";import{g as ie}from"./groupByKey-nGMiMvM1.js";import{M as nt}from"./MainSimpleCard-COKO55tB.js";import{a as it,C as rt}from"./ControllerArmedIcon-DlATGlP5.js";import{A as at,a as ot,C as st}from"./ArrowDropUp-DpvEkpl6.js";import{C as lt}from"./ControllerConnectIcon-Di1ptAq0.js";import{L as ht}from"./ListItemButton-Dybxl5ag.js";import{C as ct}from"./CardHeader--yi8JTB-.js";import"./Card-Czpwx8nj.js";const ut=({...i})=>t.jsx(J,{...i,viewBox:"0 0 24 24",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("mask",{id:"mask0_7504_22074",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:t.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),t.jsx("g",{mask:"url(#mask0_7504_22074)",children:t.jsx("path",{d:"M5.85 17.1C6.7 16.45 7.65 15.9375 8.7 15.5625C9.75 15.1875 10.85 15 12 15C13.15 15 14.25 15.1875 15.3 15.5625C16.35 15.9375 17.3 16.45 18.15 17.1C18.7333 16.4167 19.1875 15.6417 19.5125 14.775C19.8375 13.9083 20 12.9833 20 12C20 9.78333 19.2208 7.89583 17.6625 6.3375C16.1042 4.77917 14.2167 4 12 4C9.78333 4 7.89583 4.77917 6.3375 6.3375C4.77917 7.89583 4 9.78333 4 12C4 12.9833 4.1625 13.9083 4.4875 14.775C4.8125 15.6417 5.26667 16.4167 5.85 17.1ZM12 13C11.0167 13 10.1875 12.6625 9.5125 11.9875C8.8375 11.3125 8.5 10.4833 8.5 9.5C8.5 8.51667 8.8375 7.6875 9.5125 7.0125C10.1875 6.3375 11.0167 6 12 6C12.9833 6 13.8125 6.3375 14.4875 7.0125C15.1625 7.6875 15.5 8.51667 15.5 9.5C15.5 10.4833 15.1625 11.3125 14.4875 11.9875C13.8125 12.6625 12.9833 13 12 13ZM12 22C10.6167 22 9.31667 21.7375 8.1 21.2125C6.88333 20.6875 5.825 19.975 4.925 19.075C4.025 18.175 3.3125 17.1167 2.7875 15.9C2.2625 14.6833 2 13.3833 2 12C2 10.6167 2.2625 9.31667 2.7875 8.1C3.3125 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.3125 8.1 2.7875C9.31667 2.2625 10.6167 2 12 2C13.3833 2 14.6833 2.2625 15.9 2.7875C17.1167 3.3125 18.175 4.025 19.075 4.925C19.975 5.825 20.6875 6.88333 21.2125 8.1C21.7375 9.31667 22 10.6167 22 12C22 13.3833 21.7375 14.6833 21.2125 15.9C20.6875 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6875 15.9 21.2125C14.6833 21.7375 13.3833 22 12 22ZM12 20C12.8833 20 13.7167 19.8708 14.5 19.6125C15.2833 19.3542 16 18.9833 16.65 18.5C16 18.0167 15.2833 17.6458 14.5 17.3875C13.7167 17.1292 12.8833 17 12 17C11.1167 17 10.2833 17.1292 9.5 17.3875C8.71667 17.6458 8 18.0167 7.35 18.5C8 18.9833 8.71667 19.3542 9.5 19.6125C10.2833 19.8708 11.1167 20 12 20ZM12 11C12.4333 11 12.7917 10.8583 13.075 10.575C13.3583 10.2917 13.5 9.93333 13.5 9.5C13.5 9.06667 13.3583 8.70833 13.075 8.425C12.7917 8.14167 12.4333 8 12 8C11.5667 8 11.2083 8.14167 10.925 8.425C10.6417 8.70833 10.5 9.06667 10.5 9.5C10.5 9.93333 10.6417 10.2917 10.925 10.575C11.2083 10.8583 11.5667 11 12 11Z",fill:"currentColor"})})]})}),dt=({...i})=>t.jsx(J,{...i,viewBox:"0 0 24 24",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("mask",{id:"mask0_2799_6991",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:t.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),t.jsx("g",{mask:"url(#mask0_2799_6991)",children:t.jsx("path",{d:"M3 21V3H9.2C9.43333 2.4 9.8 1.91667 10.3 1.55C10.8 1.18333 11.3667 1 12 1C12.6333 1 13.2 1.18333 13.7 1.55C14.2 1.91667 14.5667 2.4 14.8 3H21V21H3ZM12 4.25C12.2167 4.25 12.3958 4.17917 12.5375 4.0375C12.6792 3.89583 12.75 3.71667 12.75 3.5C12.75 3.28333 12.6792 3.10417 12.5375 2.9625C12.3958 2.82083 12.2167 2.75 12 2.75C11.7833 2.75 11.6042 2.82083 11.4625 2.9625C11.3208 3.10417 11.25 3.28333 11.25 3.5C11.25 3.71667 11.3208 3.89583 11.4625 4.0375C11.6042 4.17917 11.7833 4.25 12 4.25ZM5 17.85C5.9 16.9667 6.94583 16.2708 8.1375 15.7625C9.32917 15.2542 10.6167 15 12 15C13.3833 15 14.6708 15.2542 15.8625 15.7625C17.0542 16.2708 18.1 16.9667 19 17.85V5H5V17.85ZM12 13C12.9667 13 13.7917 12.6583 14.475 11.975C15.1583 11.2917 15.5 10.4667 15.5 9.5C15.5 8.53333 15.1583 7.70833 14.475 7.025C13.7917 6.34167 12.9667 6 12 6C11.0333 6 10.2083 6.34167 9.525 7.025C8.84167 7.70833 8.5 8.53333 8.5 9.5C8.5 10.4667 8.84167 11.2917 9.525 11.975C10.2083 12.6583 11.0333 13 12 13ZM7 19H17V18.75C16.3 18.1667 15.525 17.7292 14.675 17.4375C13.825 17.1458 12.9333 17 12 17C11.0667 17 10.175 17.1458 9.325 17.4375C8.475 17.7292 7.7 18.1667 7 18.75V19ZM12 11C11.5833 11 11.2292 10.8542 10.9375 10.5625C10.6458 10.2708 10.5 9.91667 10.5 9.5C10.5 9.08333 10.6458 8.72917 10.9375 8.4375C11.2292 8.14583 11.5833 8 12 8C12.4167 8 12.7708 8.14583 13.0625 8.4375C13.3542 8.72917 13.5 9.08333 13.5 9.5C13.5 9.91667 13.3542 10.2708 13.0625 10.5625C12.7708 10.8542 12.4167 11 12 11Z",fill:"currentColor"})})]})}),mt=({...i})=>t.jsx(J,{...i,viewBox:"0 0 24 24",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("mask",{id:"mask0_2799_6831",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:t.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),t.jsx("g",{mask:"url(#mask0_2799_6831)",children:t.jsx("path",{d:"M2 21V3H12V7H22V21H2ZM4 19H10V17H4V19ZM4 15H10V13H4V15ZM4 11H10V9H4V11ZM4 7H10V5H4V7ZM12 19H20V9H12V19ZM14 13V11H18V13H14ZM14 17V15H18V17H14Z",fill:"currentColor"})})]})}),pt=({...i})=>t.jsx(J,{...i,viewBox:"0 0 24 24",children:t.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M12 16.1622C11.1117 16.1622 10.2721 15.9915 9.48125 15.6503C8.69042 15.309 7.99979 14.8432 7.40937 14.2528C6.81896 13.6624 6.35313 12.9718 6.01187 12.1809C5.67062 11.3901 5.5 10.5505 5.5 9.66217C5.5 8.763 5.67062 7.92071 6.01187 7.1353C6.35313 6.34988 6.81896 5.66196 7.40937 5.07155C7.99979 4.48113 8.69042 4.0153 9.48125 3.67405C10.2721 3.3328 11.1117 3.16217 12 3.16217C12.8992 3.16217 13.7415 3.3328 14.5269 3.67405C15.3123 4.0153 16.0002 4.48113 16.5906 5.07155C17.181 5.66196 17.6469 6.34988 17.9881 7.1353C18.3294 7.92071 18.5 8.763 18.5 9.66217C18.5 10.5505 18.3294 11.3901 17.9881 12.1809C17.6469 12.9718 17.181 13.6624 16.5906 14.2528C16.0002 14.8432 15.3123 15.309 14.5269 15.6503C13.7415 15.9915 12.8992 16.1622 12 16.1622ZM12 14.8297C12.2817 14.4397 12.5254 14.0334 12.7312 13.6109C12.9371 13.1884 13.105 12.7388 13.235 12.2622H10.765C10.895 12.7388 11.0629 13.1884 11.2687 13.6109C11.4746 14.0334 11.7183 14.4397 12 14.8297ZM10.31 14.5697C10.115 14.2122 9.94438 13.8411 9.79812 13.4565C9.65188 13.072 9.53 12.6738 9.4325 12.2622H7.515C7.82917 12.8038 8.22187 13.2751 8.69312 13.6759C9.16437 14.0768 9.70333 14.3747 10.31 14.5697ZM13.69 14.5697C14.2967 14.3747 14.8356 14.0768 15.3069 13.6759C15.7781 13.2751 16.1708 12.8038 16.485 12.2622H14.5675C14.47 12.6738 14.3481 13.072 14.2019 13.4565C14.0556 13.8411 13.885 14.2122 13.69 14.5697ZM6.9625 10.9622H9.1725C9.14 10.7455 9.11562 10.5315 9.09937 10.3203C9.08312 10.109 9.075 9.88967 9.075 9.66217C9.075 9.43467 9.08312 9.2153 9.09937 9.00405C9.11562 8.7928 9.14 8.57884 9.1725 8.36217H6.9625C6.90833 8.57884 6.86771 8.7928 6.84062 9.00405C6.81354 9.2153 6.8 9.43467 6.8 9.66217C6.8 9.88967 6.81354 10.109 6.84062 10.3203C6.86771 10.5315 6.90833 10.7455 6.9625 10.9622ZM10.4725 10.9622H13.5275C13.56 10.7455 13.5844 10.5315 13.6006 10.3203C13.6169 10.109 13.625 9.88967 13.625 9.66217C13.625 9.43467 13.6169 9.2153 13.6006 9.00405C13.5844 8.7928 13.56 8.57884 13.5275 8.36217H10.4725C10.44 8.57884 10.4156 8.7928 10.3994 9.00405C10.3831 9.2153 10.375 9.43467 10.375 9.66217C10.375 9.88967 10.3831 10.109 10.3994 10.3203C10.4156 10.5315 10.44 10.7455 10.4725 10.9622ZM14.8275 10.9622H17.0375C17.0917 10.7455 17.1323 10.5315 17.1594 10.3203C17.1865 10.109 17.2 9.88967 17.2 9.66217C17.2 9.43467 17.1865 9.2153 17.1594 9.00405C17.1323 8.7928 17.0917 8.57884 17.0375 8.36217H14.8275C14.86 8.57884 14.8844 8.7928 14.9006 9.00405C14.9169 9.2153 14.925 9.43467 14.925 9.66217C14.925 9.88967 14.9169 10.109 14.9006 10.3203C14.8844 10.5315 14.86 10.7455 14.8275 10.9622ZM14.5675 7.06217H16.485C16.1708 6.5205 15.7781 6.04925 15.3069 5.64842C14.8356 5.24759 14.2967 4.94967 13.69 4.75467C13.885 5.11217 14.0556 5.48321 14.2019 5.8678C14.3481 6.25238 14.47 6.6505 14.5675 7.06217ZM10.765 7.06217H13.235C13.105 6.5855 12.9371 6.13592 12.7312 5.71342C12.5254 5.29092 12.2817 4.88467 12 4.49467C11.7183 4.88467 11.4746 5.29092 11.2687 5.71342C11.0629 6.13592 10.895 6.5855 10.765 7.06217ZM7.515 7.06217H9.4325C9.53 6.6505 9.65188 6.25238 9.79812 5.8678C9.94438 5.48321 10.115 5.11217 10.31 4.75467C9.70333 4.94967 9.16437 5.24759 8.69312 5.64842C8.22187 6.04925 7.82917 6.5205 7.515 7.06217Z",fill:"currentColor"}),t.jsx("path",{d:"M19.5 20.8378L19.5 15.1622",stroke:"currentColor",strokeWidth:"1.45946"}),t.jsx("path",{d:"M19.5 18L4.5 18",stroke:"currentColor",strokeWidth:"1.45946"}),t.jsx("path",{d:"M4.5 20.8378L4.5 15.1622",stroke:"currentColor",strokeWidth:"1.45946"})]})}),ft=({...i})=>t.jsx(J,{...i,viewBox:"0 0 24 24",children:t.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M14.3378 5.5C15.2262 5.5 16.0657 5.67063 16.8566 6.01188C17.6474 6.35313 18.338 6.81896 18.9285 7.40938C19.5189 7.99979 19.9847 8.69042 20.326 9.48125C20.6672 10.2721 20.8378 11.1117 20.8378 12C20.8378 12.8992 20.6672 13.7415 20.326 14.5269C19.9847 15.3123 19.5189 16.0002 18.9285 16.5906C18.338 17.181 17.6474 17.6469 16.8566 17.9881C16.0657 18.3294 15.2262 18.5 14.3378 18.5C13.4387 18.5 12.5964 18.3294 11.811 17.9881C11.0255 17.6469 10.3376 17.181 9.7472 16.5906C9.15679 16.0002 8.69096 15.3123 8.34971 14.5269C8.00846 13.7415 7.83783 12.8992 7.83783 12C7.83783 11.1117 8.00846 10.2721 8.34971 9.48125C8.69096 8.69042 9.15679 7.99979 9.74721 7.40937C10.3376 6.81896 11.0255 6.35312 11.811 6.01188C12.5964 5.67062 13.4387 5.5 14.3378 5.5ZM14.3378 6.8325C14.0562 7.2225 13.8124 7.62875 13.6066 8.05125C13.4007 8.47375 13.2328 8.92333 13.1028 9.4L15.5728 9.4C15.4428 8.92333 15.2749 8.47375 15.0691 8.05125C14.8632 7.62875 14.6195 7.2225 14.3378 6.8325ZM16.0278 7.0925C16.2228 7.45 16.3935 7.82104 16.5397 8.20562C16.686 8.59021 16.8078 8.98833 16.9053 9.4L18.8228 9.4C18.5087 8.85833 18.116 8.38708 17.6447 7.98625C17.1735 7.58542 16.6345 7.2875 16.0278 7.0925ZM12.6478 7.0925C12.0412 7.2875 11.5022 7.58542 11.031 7.98625C10.5597 8.38708 10.167 8.85833 9.85283 9.4L11.7703 9.4C11.8678 8.98833 11.9897 8.59021 12.136 8.20562C12.2822 7.82104 12.4528 7.45 12.6478 7.0925ZM19.3753 10.7L17.1653 10.7C17.1978 10.9167 17.2222 11.1306 17.2385 11.3419C17.2547 11.5531 17.2628 11.7725 17.2628 12C17.2628 12.2275 17.2547 12.4469 17.2385 12.6581C17.2222 12.8694 17.1978 13.0833 17.1653 13.3L19.3753 13.3C19.4295 13.0833 19.4701 12.8694 19.4972 12.6581C19.5243 12.4469 19.5378 12.2275 19.5378 12C19.5378 11.7725 19.5243 11.5531 19.4972 11.3419C19.4701 11.1306 19.4295 10.9167 19.3753 10.7ZM15.8653 10.7L12.8103 10.7C12.7778 10.9167 12.7535 11.1306 12.7372 11.3419C12.721 11.5531 12.7128 11.7725 12.7128 12C12.7128 12.2275 12.721 12.4469 12.7372 12.6581C12.7535 12.8694 12.7778 13.0833 12.8103 13.3L15.8653 13.3C15.8978 13.0833 15.9222 12.8694 15.9385 12.6581C15.9547 12.4469 15.9628 12.2275 15.9628 12C15.9628 11.7725 15.9547 11.5531 15.9385 11.3419C15.9222 11.1306 15.8978 10.9167 15.8653 10.7ZM11.5103 10.7L9.30033 10.7C9.24616 10.9167 9.20554 11.1306 9.17846 11.3419C9.15137 11.5531 9.13783 11.7725 9.13783 12C9.13783 12.2275 9.15137 12.4469 9.17846 12.6581C9.20554 12.8694 9.24616 13.0833 9.30033 13.3L11.5103 13.3C11.4778 13.0833 11.4535 12.8694 11.4372 12.6581C11.421 12.4469 11.4128 12.2275 11.4128 12C11.4128 11.7725 11.421 11.5531 11.4372 11.3419C11.4535 11.1306 11.4778 10.9167 11.5103 10.7ZM11.7703 14.6L9.85283 14.6C10.167 15.1417 10.5597 15.6129 11.031 16.0137C11.5022 16.4146 12.0412 16.7125 12.6478 16.9075C12.4528 16.55 12.2822 16.179 12.136 15.7944C11.9897 15.4098 11.8678 15.0117 11.7703 14.6ZM15.5728 14.6L13.1028 14.6C13.2328 15.0767 13.4007 15.5262 13.6066 15.9487C13.8124 16.3712 14.0562 16.7775 14.3378 17.1675C14.6195 16.7775 14.8632 16.3712 15.0691 15.9487C15.2749 15.5262 15.4428 15.0767 15.5728 14.6ZM18.8228 14.6L16.9053 14.6C16.8078 15.0117 16.686 15.4098 16.5397 15.7944C16.3935 16.179 16.2228 16.55 16.0278 16.9075C16.6345 16.7125 17.1735 16.4146 17.6447 16.0137C18.116 15.6129 18.5087 15.1417 18.8228 14.6Z",fill:"currentColor"}),t.jsx("path",{d:"M3.1622 19.5L8.83788 19.5",stroke:"currentColor",strokeWidth:"1.45946"}),t.jsx("path",{d:"M6.00003 19.5L6.00003 4.5",stroke:"currentColor",strokeWidth:"1.45946"}),t.jsx("path",{d:"M3.1622 4.5L8.83788 4.5",stroke:"currentColor",strokeWidth:"1.45946"})]})});function ge(i,c){var d=Object.keys(i);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(i);c&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),d.push.apply(d,m)}return d}function I(i){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?ge(Object(d),!0).forEach(function(m){h(i,m,d[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(d)):ge(Object(d)).forEach(function(m){Object.defineProperty(i,m,Object.getOwnPropertyDescriptor(d,m))})}return i}function h(i,c,d){return c in i?Object.defineProperty(i,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):i[c]=d,i}function gt(i,c){i.prototype=Object.create(c.prototype),i.prototype.constructor=i,de(i,c)}function de(i,c){return de=Object.setPrototypeOf||function(m,l){return m.__proto__=l,m},de(i,c)}function u(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ct(i,c){var d;return function(){for(var m=arguments.length,l=new Array(m),f=0;f<m;f++)l[f]=arguments[f];var v=this;clearTimeout(d),d=setTimeout(function(){return i.apply(v,l)},c)}}function ee(i,c){for(;i;){if(i.classList&&i.classList.contains(c))return!0;i=i.parentElement}return!1}function Ee(i){var c=i.getBoundingClientRect();return{x:c.left,y:c.top}}function vt(i,c,d){return"https://tile.openstreetmap.org/"+d+"/"+i+"/"+c+".png"}var Ce=300,xt=1500,wt=150,Mt=40,ce=2,ve=300,_t=60,bt=300,St=300,z=function(){return!0},X=function(c,d){return(c+180)/360*Math.pow(2,d)},$=function(c,d){return(1-Math.log(Math.tan(c*Math.PI/180)+1/Math.cos(c*Math.PI/180))/Math.PI)/2*Math.pow(2,d)};function H(i,c){return i/Math.pow(2,c)*360-180}function B(i,c){var d=Math.PI-2*Math.PI*i/Math.pow(2,c);return 180/Math.PI*Math.atan(.5*(Math.exp(d)-Math.exp(-d)))}function P(i,c){var d=Ee(i);return[c.clientX-d.x,c.clientY-d.y]}function jt(i){return i*(2-i)}var K=[B(Math.pow(2,10),10),B(0,10),H(0,10),H(Math.pow(2,10),10)],me=typeof window<"u",O=me&&window.performance&&window.performance.now?function(){return window.performance.now()}:function(){var i=new Date().getTime();return function(){return new Date().getTime()-i}}(),ue=function(c){return me?(window.requestAnimationFrame||window.setTimeout)(c):(c(new Date().getTime()),null)},xe=function(c){return me&&c?(window.cancelAnimationFrame||window.clearTimeout)(c):!1};function we(i,c,d,m,l){return!i||i.length===0?"":i.map(function(f){return c(d,m,l,f)+(f===1?"":" "+f+"x")}).join(", ")}var yt=function(c){var d=c.tile,m=c.tileLoaded;return T.createElement("img",{src:d.url,srcSet:d.srcSet,width:d.width,height:d.height,loading:"lazy",onLoad:m,alt:"",style:{position:"absolute",left:d.left,top:d.top,willChange:"transform",transformOrigin:"top left",opacity:1}})},Te=function(i){gt(c,i);function c(m){var l,f,v,x,g,M,b,S,e;return e=i.call(this,m)||this,h(u(e),"_containerRef",void 0),h(u(e),"_mousePosition",void 0),h(u(e),"_loadTracker",void 0),h(u(e),"_dragStart",null),h(u(e),"_mouseDown",!1),h(u(e),"_moveEvents",[]),h(u(e),"_lastClick",null),h(u(e),"_lastTap",null),h(u(e),"_lastWheel",null),h(u(e),"_touchStartPixel",null),h(u(e),"_touchStartMidPoint",null),h(u(e),"_touchStartDistance",null),h(u(e),"_secondTouchEnd",null),h(u(e),"_warningClearTimeout",null),h(u(e),"_isAnimating",!1),h(u(e),"_animationStart",null),h(u(e),"_animationEnd",null),h(u(e),"_zoomStart",null),h(u(e),"_centerTarget",null),h(u(e),"_zoomTarget",null),h(u(e),"_zoomAround",null),h(u(e),"_animFrame",null),h(u(e),"_boundsSynced",!1),h(u(e),"_minMaxCache",null),h(u(e),"_lastZoom",void 0),h(u(e),"_lastCenter",void 0),h(u(e),"_centerStart",void 0),h(u(e),"_resizeObserver",null),h(u(e),"updateWidthHeight",function(){if(e._containerRef){var n=e._containerRef.getBoundingClientRect();if(n&&n.width>0&&n.height>0)return e.setState({width:n.width,height:n.height}),!0}return!1}),h(u(e),"wa",function(){var n;return(n=window).addEventListener.apply(n,arguments)}),h(u(e),"wr",function(){var n;return(n=window).removeEventListener.apply(n,arguments)}),h(u(e),"bindMouseEvents",function(){e.wa("mousedown",e.handleMouseDown),e.wa("mouseup",e.handleMouseUp),e.wa("mousemove",e.handleMouseMove)}),h(u(e),"bindTouchEvents",function(){e.wa("touchstart",e.handleTouchStart,{passive:!1}),e.wa("touchmove",e.handleTouchMove,{passive:!1}),e.wa("touchend",e.handleTouchEnd,{passive:!1})}),h(u(e),"unbindMouseEvents",function(){e.wr("mousedown",e.handleMouseDown),e.wr("mouseup",e.handleMouseUp),e.wr("mousemove",e.handleMouseMove)}),h(u(e),"unbindTouchEvents",function(){e.wr("touchstart",e.handleTouchStart),e.wr("touchmove",e.handleTouchMove),e.wr("touchend",e.handleTouchEnd)}),h(u(e),"bindResizeEvent",function(){e.wa("resize",e.updateWidthHeight)}),h(u(e),"unbindResizeEvent",function(){e.wr("resize",e.updateWidthHeight)}),h(u(e),"bindWheelEvent",function(){e._containerRef&&e._containerRef.addEventListener("wheel",e.handleWheel,{passive:!1})}),h(u(e),"unbindWheelEvent",function(){e._containerRef&&e._containerRef.removeEventListener("wheel",e.handleWheel)}),h(u(e),"setCenterZoomTarget",function(n,r,a,o,s){if(a===void 0&&(a=!1),o===void 0&&(o=null),s===void 0&&(s=Ce),e.props.animate&&(!a||e.distanceInScreens(n,r,e.state.center,e.state.zoom)<=e.props.animateMaxScreens)){if(e._isAnimating){xe(e._animFrame);var p=e.animationStep(O()),C=p.centerStep,_=p.zoomStep;e._centerStart=C,e._zoomStart=_}else e._isAnimating=!0,e._centerStart=e.limitCenterAtZoom([e._lastCenter[0],e._lastCenter[1]],e._lastZoom),e._zoomStart=e._lastZoom,e.onAnimationStart();e._animationStart=O(),e._animationEnd=e._animationStart+s,o?(e._zoomAround=o,e._centerTarget=e.calculateZoomCenter(e._lastCenter,o,e._lastZoom,r)):(e._zoomAround=null,e._centerTarget=n),e._zoomTarget=r,e._animFrame=ue(e.animate)}else if(e.stopAnimating(),o){var w=e.calculateZoomCenter(e._lastCenter,o,e._lastZoom,r);e.setCenterZoom(w,r,a)}else e.setCenterZoom(n||e.state.center,r,a)}),h(u(e),"setCenterZoomForChildren",function(n,r){e.setCenterZoomTarget(n||e.state.center,r||e.state.zoom,!0)}),h(u(e),"distanceInScreens",function(n,r,a,o){var s=e.state,p=s.width,C=s.height,_=e.latLngToPixel(a,a,o),w=e.latLngToPixel(n,a,o),j=e.latLngToPixel(a,a,r),E=e.latLngToPixel(n,a,r),y=(Math.abs(_[0]-w[0])+Math.abs(j[0]-E[0]))/2/p,L=(Math.abs(_[1]-w[1])+Math.abs(j[1]-E[1]))/2/C;return Math.sqrt(y*y+L*L)}),h(u(e),"animationStep",function(n){if(!e._animationEnd||!e._animationStart||!e._zoomTarget||!e._zoomStart||!e._centerStart||!e._centerTarget)return{centerStep:e.state.center,zoomStep:e.state.zoom};var r=e._animationEnd-e._animationStart,a=Math.max(n-e._animationStart,0),o=jt(a/r),s=(e._zoomTarget-e._zoomStart)*o,p=e._zoomStart+s;if(e._zoomAround){var C=e.calculateZoomCenter(e._centerStart,e._zoomAround,e._zoomStart,p);return{centerStep:C,zoomStep:p}}else{var _=[e._centerStart[0]+(e._centerTarget[0]-e._centerStart[0])*o,e._centerStart[1]+(e._centerTarget[1]-e._centerStart[1])*o];return{centerStep:_,zoomStep:p}}}),h(u(e),"animate",function(n){if(!e._animationEnd||n>=e._animationEnd)e._isAnimating=!1,e.setCenterZoom(e._centerTarget,e._zoomTarget,!0),e.onAnimationStop();else{var r=e.animationStep(n),a=r.centerStep,o=r.zoomStep;e.setCenterZoom(a,o),e._animFrame=ue(e.animate)}}),h(u(e),"stopAnimating",function(){e._isAnimating&&(e._isAnimating=!1,e.onAnimationStop(),xe(e._animFrame))}),h(u(e),"limitCenterAtZoom",function(n,r){var a=e.getBoundsMinMax(r||e.state.zoom);return[Math.max(Math.min(!n||isNaN(n[0])?e.state.center[0]:n[0],a[1]),a[0]),Math.max(Math.min(!n||isNaN(n[1])?e.state.center[1]:n[1],a[3]),a[2])]}),h(u(e),"onAnimationStart",function(){e.props.onAnimationStart&&e.props.onAnimationStart()}),h(u(e),"onAnimationStop",function(){e.props.onAnimationStop&&e.props.onAnimationStop()}),h(u(e),"setCenterZoom",function(n,r,a){a===void 0&&(a=!1);var o=e.limitCenterAtZoom(n,r);if(r&&Math.round(e.state.zoom)!==Math.round(r)){var s=e.tileValues(e.state),p=e.tileValues({center:o,zoom:r,width:e.state.width,height:e.state.height}),C=e.state.oldTiles;e.setState({oldTiles:C.filter(function(D){return D.roundedZoom!==s.roundedZoom}).concat(s)},z);for(var _={},w=p.tileMinX;w<=p.tileMaxX;w++)for(var j=p.tileMinY;j<=p.tileMaxY;j++){var E=w+"-"+j+"-"+p.roundedZoom;_[E]=!1}e._loadTracker=_}e.setState({center:o,zoom:r||e.state.zoom},z);var y=e.props.zoom?e.props.zoom:e._lastZoom,L=e.props.center?e.props.center:e._lastCenter;r&&(a||Math.abs(y-r)>.001||Math.abs(L[0]-o[0])>1e-5||Math.abs(L[1]-o[1])>1e-5)&&(e._lastZoom=r,e._lastCenter=[].concat(o),e.syncToProps(o,r))}),h(u(e),"getBoundsMinMax",function(n){if(e.props.limitBounds==="center")return K;var r=e.state,a=r.width,o=r.height;if(e._minMaxCache&&e._minMaxCache[0]===n&&e._minMaxCache[1]===a&&e._minMaxCache[2]===o)return e._minMaxCache[3];var s=Math.pow(2,n)*256,p=a>s?0:H(a/512,n),C=o>s?0:B(Math.pow(2,n)-o/512,n),_=a>s?0:H(Math.pow(2,n)-a/512,n),w=o>s?0:B(o/512,n),j=[C,w,p,_];return e._minMaxCache=[n,a,o,j],j}),h(u(e),"tileLoaded",function(n){if(e._loadTracker&&n in e._loadTracker){e._loadTracker[n]=!0;var r=Object.values(e._loadTracker).filter(function(a){return!a}).length;r===0&&e.setState({oldTiles:[]},z)}}),h(u(e),"handleTouchStart",function(n){if(e._containerRef&&!(n.target&&ee(n.target,"pigeon-drag-block"))){if(n.touches.length===1){var r=n.touches[0],a=P(e._containerRef,r);if(e.coordsInside(a)&&(e._touchStartPixel=[a],!e.props.twoFingerDrag))if(e.stopAnimating(),e._lastTap&&O()-e._lastTap<ve){n.preventDefault();var o=e.pixelToLatLng(e._touchStartPixel[0]);e.setCenterZoomTarget(null,Math.max(e.props.minZoom,Math.min(e.state.zoom+1,e.props.maxZoom)),!1,o)}else e._lastTap=O(),e.trackMoveEvents(a)}else if(n.touches.length===2&&e._touchStartPixel){n.preventDefault(),e.stopTrackingMoveEvents(),(e.state.pixelDelta||e.state.zoomDelta)&&e.sendDeltaChange();var s=P(e._containerRef,n.touches[0]),p=P(e._containerRef,n.touches[1]);e._touchStartPixel=[s,p],e._touchStartMidPoint=[(s[0]+p[0])/2,(s[1]+p[1])/2],e._touchStartDistance=Math.sqrt(Math.pow(s[0]-p[0],2)+Math.pow(s[1]-p[1],2))}}}),h(u(e),"handleTouchMove",function(n){if(!e._containerRef){e._touchStartPixel=null;return}if(n.touches.length===1&&e._touchStartPixel){var r=n.touches[0],a=P(e._containerRef,r);e.props.twoFingerDrag?e.coordsInside(a)&&e.showWarning("fingers"):(n.preventDefault(),e.trackMoveEvents(a),e.setState({pixelDelta:[a[0]-e._touchStartPixel[0][0],a[1]-e._touchStartPixel[0][1]]},z))}else if(n.touches.length===2&&e._touchStartPixel&&e._touchStartMidPoint&&e._touchStartDistance){var o=e.state,s=o.width,p=o.height,C=o.zoom;n.preventDefault();var _=P(e._containerRef,n.touches[0]),w=P(e._containerRef,n.touches[1]),j=[(_[0]+w[0])/2,(_[1]+w[1])/2],E=[j[0]-e._touchStartMidPoint[0],j[1]-e._touchStartMidPoint[1]],y=Math.sqrt(Math.pow(_[0]-w[0],2)+Math.pow(_[1]-w[1],2)),L=Math.max(e.props.minZoom,Math.min(e.props.maxZoom,C+Math.log2(y/e._touchStartDistance)))-C,D=Math.pow(2,L),k=[(s/2-j[0])*(D-1),(p/2-j[1])*(D-1)];e.setState({zoomDelta:L,pixelDelta:[k[0]+E[0]*D,k[1]+E[1]*D]},z)}}),h(u(e),"handleTouchEnd",function(n){if(!e._containerRef){e._touchStartPixel=null;return}if(e._touchStartPixel){var r=e.props,a=r.zoomSnap,o=r.twoFingerDrag,s=r.minZoom,p=r.maxZoom,C=e.state.zoomDelta,_=e.sendDeltaChange(),w=_.center,j=_.zoom;if(n.touches.length===0)if(o)e.clearWarning();else{var E=e._touchStartPixel[0],y=P(e._containerRef,n.changedTouches[0]);(Math.abs(E[0]-y[0])>ce||Math.abs(E[1]-y[1])>ce)&&(!e._secondTouchEnd||O()-e._secondTouchEnd>bt)&&(n.preventDefault(),e.throwAfterMoving(y,w,j)),e._touchStartPixel=null,e._secondTouchEnd=null}else if(n.touches.length===1){n.preventDefault();var L=P(e._containerRef,n.touches[0]);if(e._secondTouchEnd=O(),e._touchStartPixel=[L],e.trackMoveEvents(L),a){var D=e._touchStartMidPoint?e.pixelToLatLng(e._touchStartMidPoint):e.state.center,k;o&&Math.round(e.state.zoom)===Math.round(e.state.zoom+C)?k=Math.round(e.state.zoom):k=C>0?Math.ceil(e.state.zoom):Math.floor(e.state.zoom);var A=Math.max(s,Math.min(k,p));e.setCenterZoomTarget(D,A,!1,D)}}}}),h(u(e),"handleMouseDown",function(n){if(e._containerRef){var r=P(e._containerRef,n);if(n.button===0&&(!n.target||!ee(n.target,"pigeon-drag-block"))&&e.coordsInside(r))if(e.stopAnimating(),n.preventDefault(),e._lastClick&&O()-e._lastClick<ve){if(!ee(n.target,"pigeon-click-block")){var a=e.pixelToLatLng(e._mousePosition||r);e.setCenterZoomTarget(null,Math.max(e.props.minZoom,Math.min(e.state.zoom+1,e.props.maxZoom)),!1,a)}}else e._lastClick=O(),e._mouseDown=!0,e._dragStart=r,e.trackMoveEvents(r)}}),h(u(e),"handleMouseMove",function(n){e._containerRef&&(e._mousePosition=P(e._containerRef,n),e._mouseDown&&e._dragStart&&(e.trackMoveEvents(e._mousePosition),e.setState({pixelDelta:[e._mousePosition[0]-e._dragStart[0],e._mousePosition[1]-e._dragStart[1]]},z)))}),h(u(e),"handleMouseUp",function(n){if(!e._containerRef){e._mouseDown=!1;return}var r=e.state.pixelDelta;if(e._mouseDown){e._mouseDown=!1;var a=P(e._containerRef,n);if(e.props.onClick&&(!n.target||!ee(n.target,"pigeon-click-block"))&&(!r||Math.abs(r[0])+Math.abs(r[1])<=ce)){var o=e.pixelToLatLng(a);e.props.onClick({event:n,latLng:o,pixel:a}),e.setState({pixelDelta:void 0},z)}else{var s=e.sendDeltaChange(),p=s.center,C=s.zoom;e.throwAfterMoving(a,p,C)}}}),h(u(e),"stopTrackingMoveEvents",function(){e._moveEvents=[]}),h(u(e),"trackMoveEvents",function(n){var r=O();(e._moveEvents.length===0||r-e._moveEvents[e._moveEvents.length-1].timestamp>40)&&(e._moveEvents.push({timestamp:r,coords:n}),e._moveEvents.length>2&&e._moveEvents.shift())}),h(u(e),"throwAfterMoving",function(n,r,a){var o=e.state,s=o.width,p=o.height,C=e.props.animate,_=O(),w=e._moveEvents.shift();if(w&&C){var j=Math.max(_-w.timestamp,1),E=[(n[0]-w.coords[0])/j*120,(n[1]-w.coords[1])/j*120],y=Math.sqrt(E[0]*E[0]+E[1]*E[1]);if(y>Mt){var L=Math.sqrt(s*s+p*p),D=xt*y/L,k=H(X(r[1],a)-E[0]/256,a),A=B($(r[0],a)-E[1]/256,a);e.setCenterZoomTarget([A,k],a,!1,null,D)}}e.stopTrackingMoveEvents()}),h(u(e),"sendDeltaChange",function(){var n=e.state,r=n.center,a=n.zoom,o=n.pixelDelta,s=n.zoomDelta,p=r[0],C=r[1];return(o||s!==0)&&(C=H(X(r[1],a+s)-(o?o[0]/256:0),a+s),p=B($(r[0],a+s)-(o?o[1]/256:0),a+s),e.setCenterZoom([p,C],a+s)),e.setState({pixelDelta:void 0,zoomDelta:0},z),{center:e.limitCenterAtZoom([p,C],a+s),zoom:a+s}}),h(u(e),"getBounds",function(n,r){n===void 0&&(n=e.state.center),r===void 0&&(r=e.zoomPlusDelta());var a=e.state,o=a.width,s=a.height;return{ne:e.pixelToLatLng([o-1,0],n,r),sw:e.pixelToLatLng([0,s-1],n,r)}}),h(u(e),"syncToProps",function(n,r){n===void 0&&(n=e.state.center),r===void 0&&(r=e.state.zoom);var a=e.props.onBoundsChanged;if(a){var o=e.getBounds(n,r);a({center:n,zoom:r,bounds:o,initial:!e._boundsSynced}),e._boundsSynced=!0}}),h(u(e),"handleWheel",function(n){var r=e.props,a=r.mouseEvents,o=r.metaWheelZoom,s=r.zoomSnap,p=r.animate;if(a)if(!o||n.metaKey||n.ctrlKey){n.preventDefault();var C=-n.deltaY/wt;if(!s&&e._zoomTarget){var _=e._zoomTarget-e.state.zoom;e.zoomAroundMouse(C+_,n)}else p?e.zoomAroundMouse(C,n):(!e._lastWheel||O()-e._lastWheel>Ce)&&(e._lastWheel=O(),e.zoomAroundMouse(C,n))}else e.showWarning("wheel")}),h(u(e),"showWarning",function(n){(!e.state.showWarning||e.state.warningType!==n)&&e.setState({showWarning:!0,warningType:n}),e._warningClearTimeout&&window.clearTimeout(e._warningClearTimeout),e._warningClearTimeout=window.setTimeout(e.clearWarning,St)}),h(u(e),"clearWarning",function(){e.state.showWarning&&e.setState({showWarning:!1})}),h(u(e),"zoomAroundMouse",function(n,r){if(e._containerRef){var a=e.state.zoom,o=e.props,s=o.minZoom,p=o.maxZoom,C=o.zoomSnap;if(e._mousePosition=P(e._containerRef,r),!(!e._mousePosition||a===s&&n<0||a===p&&n>0)){var _=e.pixelToLatLng(e._mousePosition),w=a+n;C&&(w=n<0?Math.floor(w):Math.ceil(w)),w=Math.max(s,Math.min(w,p)),e.setCenterZoomTarget(null,w,!1,_)}}}),h(u(e),"zoomPlusDelta",function(){return e.state.zoom+e.state.zoomDelta}),h(u(e),"pixelToLatLng",function(n,r,a){r===void 0&&(r=e.state.center),a===void 0&&(a=e.zoomPlusDelta());var o=e.state,s=o.width,p=o.height,C=o.pixelDelta,_=[(n[0]-s/2-(C?C[0]:0))/256,(n[1]-p/2-(C?C[1]:0))/256],w=X(r[1],a)+_[0],j=$(r[0],a)+_[1];return[Math.max(K[0],Math.min(K[1],B(j,a))),Math.max(K[2],Math.min(K[3],H(w,a)))]}),h(u(e),"latLngToPixel",function(n,r,a){r===void 0&&(r=e.state.center),a===void 0&&(a=e.zoomPlusDelta());var o=e.state,s=o.width,p=o.height,C=o.pixelDelta,_=X(r[1],a),w=$(r[0],a),j=X(n[1],a),E=$(n[0],a);return[(j-_)*256+s/2+(C?C[0]:0),(E-w)*256+p/2+(C?C[1]:0)]}),h(u(e),"calculateZoomCenter",function(n,r,a,o){var s=e.state,p=s.width,C=s.height,_=e.latLngToPixel(r,n,a),w=e.latLngToPixel(r,n,o),j=e.pixelToLatLng([p/2+w[0]-_[0],C/2+w[1]-_[1]],n,o);return e.limitCenterAtZoom(j,o)}),h(u(e),"setRef",function(n){e._containerRef=n}),e.syncToProps=Ct(e.syncToProps,_t),e._lastZoom=(l=(f=m.defaultZoom)!==null&&f!==void 0?f:m.zoom)!==null&&l!==void 0?l:14,e._lastCenter=(v=(x=m.defaultCenter)!==null&&x!==void 0?x:m.center)!==null&&v!==void 0?v:[0,0],e.state={zoom:e._lastZoom,center:e._lastCenter,width:(g=(M=m.width)!==null&&M!==void 0?M:m.defaultWidth)!==null&&g!==void 0?g:-1,height:(b=(S=m.height)!==null&&S!==void 0?S:m.defaultHeight)!==null&&b!==void 0?b:-1,zoomDelta:0,pixelDelta:void 0,oldTiles:[],showWarning:!1,warningType:void 0},e}var d=c.prototype;return d.componentDidMount=function(){var l=this;this.props.mouseEvents&&this.bindMouseEvents(),this.props.touchEvents&&this.bindTouchEvents(),(!this.props.width||!this.props.height)&&(this.updateWidthHeight()||ue(this.updateWidthHeight),this.bindResizeEvent()),this.bindWheelEvent(),this.syncToProps(),typeof window.ResizeObserver<"u"&&(this._resizeObserver=new window.ResizeObserver(function(){l.updateWidthHeight()}),this._resizeObserver.observe(this._containerRef))},d.componentWillUnmount=function(){this.props.mouseEvents&&this.unbindMouseEvents(),this.props.touchEvents&&this.unbindTouchEvents(),this.unbindWheelEvent(),(!this.props.width||!this.props.height)&&this.unbindResizeEvent(),this._resizeObserver&&this._resizeObserver.disconnect()},d.componentDidUpdate=function(l){var f;if(this.props.mouseEvents!==l.mouseEvents&&(this.props.mouseEvents?this.bindMouseEvents():this.unbindMouseEvents()),this.props.touchEvents!==l.touchEvents&&(this.props.touchEvents?this.bindTouchEvents():this.unbindTouchEvents()),this.props.width&&this.props.width!==l.width&&this.setState({width:this.props.width}),this.props.height&&this.props.height!==l.height&&this.setState({height:this.props.height}),!(!this.props.center&&!this.props.zoom)&&!((!this.props.center||this.props.center[0]===(l==null||(f=l.center)===null||f===void 0?void 0:f[0])&&this.props.center[1]===l.center[1])&&this.props.zoom===l.zoom)){var v=this._isAnimating?this._centerTarget:this.state.center,x=this._isAnimating?this._zoomTarget:this.state.zoom;if(v&&x){var g,M,b=(g=this.props.center)!==null&&g!==void 0?g:v,S=(M=this.props.zoom)!==null&&M!==void 0?M:x;(Math.abs(S-x)>.001||Math.abs(b[0]-v[0])>1e-4||Math.abs(b[1]-v[1])>1e-4)&&this.setCenterZoomTarget(b,S,!0)}}},d.coordsInside=function(l){var f=this.state,v=f.width,x=f.height;if(l[0]<0||l[1]<0||l[0]>=v||l[1]>=x)return!1;var g=this._containerRef;if(g){var M=Ee(g),b=document.elementFromPoint(l[0]+M.x,l[1]+M.y);return g===b||g.contains(b)}else return!1},d.tileValues=function(l){var f=l.center,v=l.zoom,x=l.pixelDelta,g=l.zoomDelta,M=l.width,b=l.height,S=Math.round(v+(g||0)),e=v+(g||0)-S,n=Math.pow(2,e),r=M/n,a=b/n,o=X(f[1],S)-(x?x[0]/256/n:0),s=$(f[0],S)-(x?x[1]/256/n:0),p=r/2/256,C=a/2/256,_=Math.floor(o-p),w=Math.floor(o+p),j=Math.floor(s-C),E=Math.floor(s+C);return{tileMinX:_,tileMaxX:w,tileMinY:j,tileMaxY:E,tileCenterX:o,tileCenterY:s,roundedZoom:S,zoomDelta:g||0,scaleWidth:r,scaleHeight:a,scale:n}},d.renderTiles=function(){for(var l=this,f=this.state,v=f.oldTiles,x=f.width,g=f.height,M=this.props.dprs,b=this.props.provider||vt,S=this.tileValues(this.state),e=S.tileMinX,n=S.tileMaxX,r=S.tileMinY,a=S.tileMaxY,o=S.tileCenterX,s=S.tileCenterY,p=S.roundedZoom,C=S.scaleWidth,_=S.scaleHeight,w=S.scale,j=[],E=0;E<v.length;E++){var y=v[E],L=y.roundedZoom-p;if(!(Math.abs(L)>4||L===0))for(var D=1/Math.pow(2,L),k=-(e-y.tileMinX*D)*256,A=-(r-y.tileMinY*D)*256,re=Math.max(y.tileMinX,0),Ze=Math.max(y.tileMinY,0),ke=Math.min(y.tileMaxX,Math.pow(2,y.roundedZoom)-1),De=Math.min(y.tileMaxY,Math.pow(2,y.roundedZoom)-1),F=re;F<=ke;F++)for(var N=Ze;N<=De;N++)j.push({key:F+"-"+N+"-"+y.roundedZoom,url:b(F,N,y.roundedZoom),srcSet:we(M,b,F,N,y.roundedZoom),left:k+(F-y.tileMinX)*256*D,top:A+(N-y.tileMinY)*256*D,width:256*D,height:256*D,active:!1})}for(var Le=Math.max(e,0),Pe=Math.max(r,0),Oe=Math.min(n,Math.pow(2,p)-1),We=Math.min(a,Math.pow(2,p)-1),V=Le;V<=Oe;V++)for(var Y=Pe;Y<=We;Y++)j.push({key:V+"-"+Y+"-"+p,url:b(V,Y,p),srcSet:we(M,b,V,Y,p),left:(V-e)*256,top:(Y-r)*256,width:256,height:256,active:!0});var Ae={width:C,height:_,position:"absolute",top:"calc((100% - "+g+"px) / 2)",left:"calc((100% - "+x+"px) / 2)",overflow:"hidden",willChange:"transform",transform:"scale("+w+", "+w+")",transformOrigin:"top left"},ze=this.props.boxClassname||"pigeon-tiles-box",Ie=-((o-e)*256-C/2),Re=-((s-r)*256-_/2),He={position:"absolute",width:(n-e+1)*256,height:(a-r+1)*256,willChange:"transform",transform:"translate("+Ie+"px, "+Re+"px)"},Be=this.props.tileComponent;return T.createElement("div",{style:Ae,className:ze},T.createElement("div",{className:"pigeon-tiles",style:He},j.map(function(ae){return T.createElement(Be,{key:ae.key,tile:ae,tileLoaded:function(){return l.tileLoaded(ae.key)}})})))},d.renderOverlays=function(){var l=this,f=this.state,v=f.width,x=f.height,g=f.center,M={bounds:this.getBounds(),zoom:this.zoomPlusDelta(),center:g,width:v,height:x},b=T.Children.map(this.props.children,function(e){if(!e)return null;if(!T.isValidElement(e))return e;var n=e.props,r=n.anchor,a=n.position,o=n.offset,s=l.latLngToPixel(r||a||g);return T.cloneElement(e,{left:s[0]-(o?o[0]:0),top:s[1]-(o?o[1]:0),latLngToPixel:l.latLngToPixel,pixelToLatLng:l.pixelToLatLng,setCenterZoom:l.setCenterZoomForChildren,mapProps:l.props,mapState:M})}),S={position:"absolute",width:v,height:x,top:"calc((100% - "+x+"px) / 2)",left:"calc((100% - "+v+"px) / 2)"};return T.createElement("div",{className:"pigeon-overlays",style:S},b)},d.renderAttribution=function(){var l=this.props,f=l.attribution,v=l.attributionPrefix;if(f===!1)return null;var x={position:"absolute",bottom:0,right:0,fontSize:"11px",padding:"2px 5px",background:"rgba(255, 255, 255, 0.7)",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",color:"#333"},g={color:"#0078A8",textDecoration:"none"};return T.createElement("div",{key:"attr",className:"pigeon-attribution",style:x},v===!1?null:T.createElement("span",null,v||T.createElement("a",{href:"https://pigeon-maps.js.org/",style:g,target:"_blank",rel:"noreferrer noopener"},"Pigeon")," | "),f||T.createElement("span",null," © ",T.createElement("a",{href:"https://www.openstreetmap.org/copyright",style:g,target:"_blank",rel:"noreferrer noopener"},"OpenStreetMap")," contributors"))},d.renderWarning=function(){var l=this.props,f=l.metaWheelZoom,v=l.metaWheelZoomWarning,x=l.twoFingerDrag,g=l.twoFingerDragWarning,M=l.warningZIndex,b=this.state,S=b.showWarning,e=b.warningType,n=b.width,r=b.height;if(f&&v||x&&g){var a={position:"absolute",top:0,left:0,width:n,height:r,overflow:"hidden",pointerEvents:"none",opacity:S?100:0,transition:"opacity 300ms",background:"rgba(0,0,0,0.5)",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",fontSize:22,fontFamily:'"Arial", sans-serif',textAlign:"center",zIndex:M},o=typeof window<"u"&&window.navigator&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?"⌘":"ctrl",s=e==="fingers"?g:v;return T.createElement("div",{className:"pigeon-overlay-warning",style:a},s.replace("META",o))}else return null},d.render=function(){var l=this.props,f=l.touchEvents,v=l.twoFingerDrag,x=this.state,g=x.width,M=x.height,b={width:this.props.width?g:"100%",height:this.props.height?M:"100%",position:"relative",display:"inline-block",overflow:"hidden",background:"#dddddd",touchAction:f?v?"pan-x pan-y":"none":"auto"},S=!!(g&&M);return T.createElement("div",{style:b,ref:this.setRef,dir:"ltr"},S&&this.renderTiles(),S&&this.renderOverlays(),S&&this.renderAttribution(),S&&this.renderWarning())},c}(W.Component);h(Te,"defaultProps",{animate:!0,metaWheelZoom:!1,metaWheelZoomWarning:"Use META + wheel to zoom!",twoFingerDrag:!1,twoFingerDragWarning:"Use two fingers to move the map",zoomSnap:!0,mouseEvents:!0,touchEvents:!0,warningZIndex:100,animateMaxScreens:5,minZoom:1,maxZoom:18,limitBounds:"center",dprs:[],tileComponent:yt});function Et(i){var c=typeof i.width<"u"?i.width:typeof i.height<"u"?i.height*29/34:29,d=typeof i.height<"u"?i.height:typeof i.width<"u"?i.width*34/29:34,m=W.useState(i.hover||!1),l=m[0],f=m[1],v=typeof i.hover>"u"?l:i.hover,x=i.color||"#93C0D0",g=function(b){return{event:b,anchor:i.anchor,payload:i.payload}};return T.createElement("div",{style:I({position:"absolute",transform:"translate("+(i.left-c/2)+"px, "+(i.top-(d-1))+"px)",filter:v?"drop-shadow(0 0 4px rgba(0, 0, 0, .3))":"",pointerEvents:"none",cursor:"pointer"},i.style||{}),className:i.className?i.className+" pigeon-click-block":"pigeon-click-block",onClick:i.onClick?function(M){return i.onClick(g(M))}:null,onContextMenu:i.onContextMenu?function(M){return i.onContextMenu(g(M))}:null,onMouseOver:function(b){i.onMouseOver&&i.onMouseOver(g(b)),f(!0)},onMouseOut:function(b){i.onMouseOut&&i.onMouseOut(g(b)),f(!1)}},i.children||T.createElement("svg",{width:c,height:d,viewBox:"0 0 61 71",fill:"none",xmlns:"http://www.w3.org/2000/svg"},T.createElement("g",{style:{pointerEvents:"auto"}},T.createElement("path",{d:"M52 31.5C52 36.8395 49.18 42.314 45.0107 47.6094C40.8672 52.872 35.619 57.678 31.1763 61.6922C30.7916 62.0398 30.2084 62.0398 29.8237 61.6922C25.381 57.678 20.1328 52.872 15.9893 47.6094C11.82 42.314 9 36.8395 9 31.5C9 18.5709 18.6801 9 30.5 9C42.3199 9 52 18.5709 52 31.5Z",fill:x,stroke:"white",strokeWidth:"4"}),T.createElement("circle",{cx:"30.5",cy:"30.5",r:"8.5",fill:"white",opacity:v?.98:.6}))))}function Tt(i){return T.createElement("div",{style:I({position:"absolute",transform:"translate("+i.left+"px, "+i.top+"px)"},i.style||{}),className:i.className?i.className+" pigeon-click-block":"pigeon-click-block"},i.children)}var Me={position:"absolute",top:10,left:10},te={width:28,height:28,borderRadius:2,boxShadow:"0 1px 4px -1px rgba(0,0,0,.3)",background:"white",lineHeight:"26px",fontSize:"20px",fontWeight:700,color:"#666",marginBottom:1,cursor:"pointer",border:"none",display:"block",outline:"none"};function Zt(i){var c=i.style,d=i.buttonStyle,m=i.setCenterZoom,l=i.mapState,f=i.mapProps;return T.createElement("div",{className:"pigeon-zoom-buttons pigeon-drag-block",style:c?I(I({},Me),c):Me},T.createElement("button",{className:"pigeon-zoom-in",type:"button",style:d?I(I({},te),d):te,onClick:function(){return m(l.center,Math.min(l.zoom+1,f.maxZoom))}},"+"),T.createElement("button",{className:"pigeon-zoom-out",type:"button",style:d?I(I({},te),d):te,onClick:function(){return m(l.center,Math.max(l.zoom-1,f.minZoom))}},"–"))}var kt=function(c,d){return function(m,l,f,v){return v===void 0&&(v=1),"https://api.maptiler.com/maps/"+d+"/256/"+f+"/"+m+"/"+l+(v>=2?"@2x":"")+".png?key="+c}};const Dt=({controller:i})=>{const{isLoading:c,isError:d,isSuccess:m,data:l}=Fe({ctrl_id:i.ctrl_id},{refetchOnMountOrArgChange:!0}),{isLoading:f,isError:v,isSuccess:x,data:g}=Ne({ctrl_id:i.ctrl_id},{refetchOnMountOrArgChange:!0}),{isLoading:M,isError:b,isSuccess:S,data:e}=Ve({ctrl_id:i.ctrl_id},{refetchOnMountOrArgChange:!0});return t.jsx(Ye,{sx:{maxWidth:"100%",maxHeight:"100%"},children:t.jsxs(R,{spacing:1,px:3,pt:4,children:[t.jsx(ne,{title:`${i.region.region}, ${i.nodo}`,headerState:t.jsxs(R,{direction:"row",spacing:1,alignItems:"center",justifyContent:"start",children:[i.modo===1&&t.jsx(it,{isArmed:i.seguridad===1}),t.jsx(lt,{isConnect:i.conectado===1})]}),children:t.jsxs(ye,{container:!0,rowSpacing:2,columnSpacing:2,width:"100%",children:[t.jsx(Q,{title:"Dirección",description:i.direccion,size:{xs:12},icon:t.jsx(mt,{})}),t.jsx(Q,{title:"Latitud",description:i.latitud,size:{xs:12,sm:6},icon:t.jsx(pt,{})}),t.jsx(Q,{title:"Longitud",description:i.longitud,size:{xs:12,sm:6},icon:t.jsx(ft,{})}),t.jsx(Q,{title:"Personal de gestión",description:i.personalgestion,size:{xs:12},icon:t.jsx(ut,{})}),t.jsx(Q,{title:"Personal implementador",description:i.personalimplementador,size:{xs:12},icon:t.jsx(dt,{})})]})}),t.jsx(ne,{title:"Cámaras",children:m&&l&&t.jsx(t.Fragment,{children:t.jsx(oe,{component:Lt,children:t.jsxs(se,{"aria-label":"simple table",size:"small",sx:{"& .MuiTableCell-root":{borderColor:"transparent"}},children:[t.jsx(le,{sx:{backgroundColor:"tertiary.opacityMain"},children:t.jsxs(U,{children:[t.jsx(Z,{children:"N°"}),t.jsx(Z,{children:"Tipo"}),t.jsx(Z,{children:"Marca"}),t.jsx(Z,{children:"IP"}),t.jsx(Z,{children:"Descripción"})]})}),t.jsx(he,{children:l.map((n,r)=>{const{cmr_id:a,tipo:o,marca:s,descripcion:p,ip:C}=n;return t.jsxs(U,{children:[t.jsx(Z,{children:r+1}),t.jsx(Z,{children:o}),t.jsx(Z,{children:s}),t.jsx(Z,{children:C}),t.jsx(Z,{children:p})]},a)})})]})})})}),t.jsx(ne,{title:"Detectores",children:x&&g&&t.jsx(t.Fragment,{children:t.jsx(pe,{disablePadding:!0,sx:{borderWidth:1,borderStyle:"solid",borderColor:"divider",borderRadius:"8px",overflow:"hidden"},children:Object.entries(ie(g,"ee_id")).map(([n,r],a,o)=>t.jsx(_e,{title:r[0].detector,divider:a<o.length-1,children:t.jsx(oe,{component:be,children:t.jsxs(se,{"aria-label":"simple table",size:"small",sx:{"& .MuiTableCell-root":{borderColor:"transparent"}},children:[t.jsx(le,{sx:{backgroundColor:"action.hover"},children:t.jsxs(U,{children:[t.jsx(Z,{children:"Pin"}),t.jsx(Z,{children:"Descripción"}),t.jsx(Z,{children:"Estado"})]})}),t.jsx(he,{children:r.map((s,p)=>t.jsxs(U,{children:[t.jsx(Z,{children:s.pin}),t.jsx(Z,{children:s.descripcion}),t.jsx(Z,{children:s.estado===1?"Activo":"Desactivado"})]},p))})]})})},`${n}_${i.ctrl_id}`))})})}),t.jsx(ne,{title:"Controles",children:S&&e&&t.jsx(t.Fragment,{children:t.jsx(pe,{disablePadding:!0,sx:{borderWidth:1,borderStyle:"solid",borderColor:"divider",borderRadius:"8px",overflow:"hidden"},children:Object.entries(ie(e,"es_id")).map(([n,r],a,o)=>t.jsx(_e,{title:r[0].actuador,divider:a<o.length-1,children:t.jsx(oe,{component:be,children:t.jsxs(se,{"aria-label":"simple table",size:"small",sx:{"& .MuiTableCell-root":{borderColor:"transparent"}},children:[t.jsx(le,{sx:{backgroundColor:"action.hover"},children:t.jsxs(U,{children:[t.jsx(Z,{children:"Pin"}),t.jsx(Z,{children:"Descripción"}),t.jsx(Z,{children:"Estado"})]})}),t.jsx(he,{children:r.map((s,p)=>t.jsxs(U,{children:[t.jsx(Z,{children:s.pin}),t.jsx(Z,{children:s.descripcion}),t.jsx(Z,{children:s.estado===1?"Activo":"Desactivado"})]},p))})]})})},`${n}_${i.ctrl_id}`))})})})]})})},ne=({children:i,title:c,headerState:d})=>t.jsx(t.Fragment,{children:t.jsxs(R,{spacing:1.5,children:[t.jsxs(R,{direction:"row",spacing:4,alignItems:"center",justifyContent:"start",children:[t.jsx(q,{variant:"h4",children:c}),d]}),i]})}),_e=({children:i,title:c,divider:d})=>{const[m,l]=W.useState(!1),f=()=>{l(!m)};return t.jsxs(t.Fragment,{children:[t.jsxs(ht,{onClick:f,sx:{backgroundColor:m?"tertiary.opacityMain":"background.default",color:"text.primary",":hover":{color:"text.primary",backgroundColor:m?"tertiary.opacityMain":"custom.trackBackground"}},divider:!m&&d,children:[t.jsx(Ue,{primary:c}),m?t.jsx(at,{}):t.jsx(ot,{})]}),t.jsx(st,{in:m,timeout:"auto",unmountOnExit:!0,sx:{...m&&{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"divider"}},children:i})]})},Lt=Se(je)(({theme:i})=>({borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:i.palette.divider,backgroundColor:i.palette.background.default,backgroundImage:"none",boxShadow:"none",color:i.palette.text.primary})),be=Se(je)(({theme:i})=>({borderTopRightRadius:0,borderTopLeftRadius:0,border:"none",backgroundColor:i.palette.background.default,backgroundImage:"none",boxShadow:"none"})),Q=({description:i,title:c,icon:d,size:m})=>t.jsx(ye,{size:m,px:2,py:1.5,sx:{backgroundColor:"background.paper",borderRadius:2},children:t.jsxs(R,{direction:"row",spacing:1,children:[d,t.jsxs(R,{spacing:.5,children:[t.jsx(q,{variant:"h5",children:c}),t.jsx(q,{variant:"body1",children:i})]})]})}),Pt="6iT4zBnrk40sLvf5PKC6",Ot=kt(Pt,"streets"),Wt=({locationsData:i})=>{const[c,d]=W.useState(!1),[m,l]=W.useState(null),[f,v]=W.useState(!1),[x,g]=W.useState(null),M=W.useRef(null),[b,S]=W.useState({center:[-9.5717863,-75.3154928],zoom:6,provider:Ot,metaWheelZoom:!1,twoFingerDrag:!1,animate:!0,zoomSnap:!1,mouseEvents:!0,touchEvents:!0,minZoom:1,maxZoom:18}),{center:e,zoom:n,provider:r,animate:a,metaWheelZoom:o,twoFingerDrag:s,zoomSnap:p,mouseEvents:C,touchEvents:_,minZoom:w,maxZoom:j}=b,E=({center:k,zoom:A})=>{S(re=>({...re,zoom:A,center:k}))},y=k=>{g(k),v(!0)},L=k=>{d(!0),l(k)},D=()=>{d(!1),l(null)};return t.jsxs(t.Fragment,{children:[t.jsx(G,{sx:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},component:"div",id:"map_drawer_container",ref:M,children:t.jsx(G,{sx:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"},children:t.jsxs(Te,{limitBounds:"edge",center:e,zoom:n,provider:r,onBoundsChanged:E,metaWheelZoom:o,twoFingerDrag:s,zoomSnap:p,animate:a,mouseEvents:C,touchEvents:_,minZoom:w,maxZoom:j,children:[t.jsx(Zt,{}),i.map((k,A)=>t.jsx(Et,{width:50,height:50,anchor:[Number(k.latitud),Number(k.longitud)],onClick:()=>y(k),onMouseOver:()=>L(k),onMouseOut:D,children:t.jsx(G,{sx:{width:50,height:50,display:"grid",placeItems:"center",backgroundColor:"primary.main",borderRadius:"50%",color:"text.textButton",cursor:"pointer",pointerEvents:"auto"},children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("mask",{id:"mask0_5332_54013",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:t.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),t.jsx("g",{mask:"url(#mask0_5332_54013)",children:t.jsx("path",{d:"M12 22C10.2333 22 8.79167 21.7208 7.675 21.1625C6.55833 20.6042 6 19.8833 6 19C6 18.6 6.12083 18.2292 6.3625 17.8875C6.60417 17.5458 6.94167 17.25 7.375 17L8.95 18.475C8.8 18.5417 8.6375 18.6167 8.4625 18.7C8.2875 18.7833 8.15 18.8833 8.05 19C8.26667 19.2667 8.76667 19.5 9.55 19.7C10.3333 19.9 11.15 20 12 20C12.85 20 13.6708 19.9 14.4625 19.7C15.2542 19.5 15.7583 19.2667 15.975 19C15.8583 18.8667 15.7083 18.7583 15.525 18.675C15.3417 18.5917 15.1667 18.5167 15 18.45L16.55 16.95C17.0167 17.2167 17.375 17.5208 17.625 17.8625C17.875 18.2042 18 18.5833 18 19C18 19.8833 17.4417 20.6042 16.325 21.1625C15.2083 21.7208 13.7667 22 12 22ZM12.025 16.5C13.675 15.2833 14.9167 14.0625 15.75 12.8375C16.5833 11.6125 17 10.3833 17 9.15C17 7.45 16.4583 6.16667 15.375 5.3C14.2917 4.43333 13.1667 4 12 4C10.8333 4 9.70833 4.43333 8.625 5.3C7.54167 6.16667 7 7.45 7 9.15C7 10.2667 7.40833 11.4292 8.225 12.6375C9.04167 13.8458 10.3083 15.1333 12.025 16.5ZM12 19C9.65 17.2667 7.89583 15.5833 6.7375 13.95C5.57917 12.3167 5 10.7167 5 9.15C5 7.96667 5.2125 6.92917 5.6375 6.0375C6.0625 5.14583 6.60833 4.4 7.275 3.8C7.94167 3.2 8.69167 2.75 9.525 2.45C10.3583 2.15 11.1833 2 12 2C12.8167 2 13.6417 2.15 14.475 2.45C15.3083 2.75 16.0583 3.2 16.725 3.8C17.3917 4.4 17.9375 5.14583 18.3625 6.0375C18.7875 6.92917 19 7.96667 19 9.15C19 10.7167 18.4208 12.3167 17.2625 13.95C16.1042 15.5833 14.35 17.2667 12 19ZM12 11C12.55 11 13.0208 10.8042 13.4125 10.4125C13.8042 10.0208 14 9.55 14 9C14 8.45 13.8042 7.97917 13.4125 7.5875C13.0208 7.19583 12.55 7 12 7C11.45 7 10.9792 7.19583 10.5875 7.5875C10.1958 7.97917 10 8.45 10 9C10 9.55 10.1958 10.0208 10.5875 10.4125C10.9792 10.8042 11.45 11 12 11Z",fill:"currentColor"})})]})})},A)),c&&m&&t.jsx(Tt,{anchor:[Number(m.latitud),Number(m.longitud)],style:{},children:t.jsxs(nt,{children:[t.jsx(ct,{sx:{py:.5,px:1},title:t.jsx(q,{variant:"subtitle1",children:`${m.region.region}, ${m.nodo}`}),subheader:t.jsx(q,{variant:"caption",children:m.direccion})}),t.jsx(Xe,{})]})})]})})}),t.jsx(rt,{open:f&&x!==null,onClose:()=>v(!1),position:"right",width:520,smWidth:300,children:t.jsxs(G,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[t.jsx(G,{sx:{flex:1,overflow:"hidden"},children:x&&t.jsx(Dt,{controller:x})}),t.jsx(R,{px:4,py:2,sx:{boxShadow:"0px -4px 4px 0px rgba(42, 55, 60, 0.05)"},children:t.jsx($e,{variant:"contained",color:"primary",size:"medium",fullWidth:!0,component:Ge,to:`/site/${x==null?void 0:x.ctrl_id}/cameras`,disabled:!f||x===null,children:"Gestionar sitio"})})]})})]})},Ut=()=>{const[i,c]=W.useState(""),d=g=>{c(g.target.value)},{isSuccess:m,isLoading:l,data:f}=qe(),v=W.useMemo(()=>{if(!f)return[];if(i==="")return f;const g=ie(f,"rgn_id");return g[Number(i)]?g[Number(i)]:[]},[f,i]),x=W.useMemo(()=>f===void 0?{}:ie(f,"rgn_id"),[f]);return t.jsxs(G,{sx:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},children:[m&&t.jsxs(R,{spacing:1,width:200,sx:{position:"absolute",top:10,left:60,zIndex:10},children:[t.jsx(Ke,{htmlFor:"multiple_group_site_select",sx:{display:"none"},children:"Grupos de sitio"}),t.jsxs(Qe,{sx:{width:200,borderRadius:"10px",backgroundColor:"custom.trackBackground",borderWidth:1,borderStyle:"solid",borderColor:"custom.outlineBoder",boxShadow:"0px 5px 30px 0px rgba(42, 55, 60, 0.18)","&.Mui-focused":{outline:"none",border:"none",boxShadow:"none"},"&.MuiOutlinedInput-root":{color:"text.primary","& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},fontWeight:500},"& .MuiSelect-icon":{color:"text.primary"}},displayEmpty:!0,value:i,onChange:d,inputProps:{id:"multiple_group_site_select"},renderValue:g=>{if(g.length===0)return t.jsx(t.Fragment,{children:"Grupo de sitio"});const M=x[g]?x[g][0]:void 0;return t.jsx(t.Fragment,{children:M==null?void 0:M.region.region})},IconComponent:({...g})=>i!==""?t.jsx(Je,{onClick:M=>{M.stopPropagation(),c("")}}):t.jsx(et,{...g}),MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[t.jsx(fe,{disabled:!0,value:"",children:t.jsx(t.Fragment,{children:"Grupos de sitio"})}),Object.entries(x).map(([g,M])=>t.jsx(fe,{value:String(M[0].rgn_id),children:t.jsx(q,{variant:"body1",color:"textPrimary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:M[0].region.region})},g))]})]}),l&&t.jsx(tt,{}),m&&t.jsx(Wt,{locationsData:v})]})};export{Ut as default};
