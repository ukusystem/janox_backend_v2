import{r as s,v as y,w as I,j as t,B as R,aW as h}from"./index-B2MwQ28r.js";const w=({q:u,cmr_id:a,ctrl_id:c,isContain:S})=>{const n=s.useRef(null),e=s.useRef(null),[j,l]=s.useState(!1),[m,f]=s.useState(!1),[p,d]=s.useState(!1),[C,g]=s.useState(!1),[E,x]=s.useState(null);return s.useEffect(()=>(e.current||(e.current=y(`${I}/stream/${c}/${a}/${u}`,{withCredentials:!0})),e.current.on("stream_flux",r=>{n.current&&r&&(n.current.src=r)}),e.current.on("stream_state",r=>{const{state:i,typeState:o}=r;o==="isConfiguring"&&l(i),o==="isError"&&d(i),o==="isLoading"&&f(i),o==="isSuccess"&&g(i)}),e.current.on("stream_error",r=>{x(r)}),()=>{e.current&&(e.current.disconnect(),e.current=null),n.current&&(n.current=null),l(!1),d(!1),f(!1),g(!1),x(null)}),[c,a,u]),t.jsx(t.Fragment,{children:t.jsxs(R,{sx:{width:"100%",height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:[j&&t.jsx(h,{children:"Configurando"}),m&&t.jsx(h,{children:"Cargando"}),p&&t.jsx("div",{children:E}),e.current&&C&&t.jsx("img",{ref:n,style:{width:"100%",height:"100%",position:"absolute",objectFit:S?"contain":void 0},alt:`Video Stream ${a}`})]})})};export{w as S};
